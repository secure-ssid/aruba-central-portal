(()=>{"use strict";let e,t,r,n,i,o;var a={117:e=>{var t=function(e){var t={};if(!e||"string"!=typeof e)return t;var r=new URLSearchParams(e.trim().replace(/^[?#&]/,"")),n=r.keys();do{var i=n.next(),o=i.value;if(o){var a=r.getAll(o);1===a.length?t[o]=a[0]:t[o]=a}}while(!1===i.done)return t},r=function(e){var t="{{space}}",r=new URLSearchParams;return Object.keys(e).forEach(function(n){var i=e[n];"string"==typeof e[n]?i=i.replace(/ /g,t):["object","undefined"].includes(typeof i)&&!Array.isArray(i)&&(i=""),Array.isArray(i)?i.forEach(function(e){r.append(n,e)}):r.append(n,i)}),r.toString().replace(RegExp(encodeURIComponent(t),"g"),"%20")};e.exports={parse:function(e){return t(e)},stringify:function(e){return r(e)}}}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return a[e](r,r.exports,l),r.exports}l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};l.r(d),l.d(d,{context:()=>ri,dataCollector:()=>ra,identity:()=>rE,libraryInfo:()=>rS});var c={};l.r(c),l.d(c,{activityCollector:()=>r5,advertising:()=>aN,audiences:()=>r4,consent:()=>ni,eventMerge:()=>ns,mediaAnalyticsBridge:()=>nA,personalization:()=>ow,pushNotifications:()=>aU,rulesEngine:()=>o4,streamingMedia:()=>o8});let u=/client\.greenlake\.hpe\.com/,p=/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,m=/[?&]testmeasure=true/i;function g(e){let t=e.sessionStorage;try{if("true"===t.getItem("testmeasure")||m.test(e.location.search))return t.setItem("testmeasure","true"),!0}catch(e){}return!1}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h{get currentState(){return h.currentState}compute(){let e=this.window,t=e.location,r=e.navigator,n=()=>{let e=t.hostname,n=/headless|Googlebot|Bingbot|Slurp|DuckDuckBot|Baiduspider|YandexBot|Sogou|Exabot|facebot|ia_archiver|spider|SeznamBot|PetalBot|63.0.3239.0|Yeti|coccocbot|applebot/i.test(r.userAgent);try{n=n||!!r.webdriver}catch(e){}try{n=n||!(r.languages.length>0)}catch(e){n=!0}return!/developer(?:\.greenlake)?\.hpe.com/i.test(e)&&(n||/(localhost|\d+\.\d+\.\d+\.\d+|testing)/i.test(e)||/www.hpe.com\/h22229/i.test(t.href)||/(origin.*www.*|stg|itg|dev|uat|qa\.it|itg\.it|stg\.it).*\.hpe\.com/i.test(e)||/\.(hp[ieq]corp|hpcorp|hqcorp|cloudfront|appspot|astadia)\.(net|com)/i.test(e))};return h.currentState={is_testing:g(e)||n(),is_dev:g(e)||n(),is_blacklist:(()=>{let e=[/(SMAGENTNAME=|docname=|CategoryName=)/i];0x18913fc34b2>new Date().getTime()&&(e=[/(SMAGENTNAME=|docname=|CategoryName=)/i]);let r=!1,n=!1,i=!1,o=!1,a=!1,s=!1;for(let e of[/(attend.hpe.com.+semail=)/i,/itcs.hpecorp.net.+email/i,/engage.hpe?.com.+em=/i,/esam.hpe.com.+email/i,/norton.+internet.+security/i,/hc9w03272\.etcs\.hpe\.com/i,/solutionsizers\.ext\.hpe\.com/i,/staging\.mylearning\.com/i])r=r||e.test(t.href);for(let e of[/(mail=|name=|phone=|password=|pwd=|employeenum|empid|employeeid|kioskid|user=)/i,/userid=/i])n=n||e.test(t.search);for(let r of e)i=i||r.test(t.search);for(let e of[/ngec-qa\.it\.hpe\.com|(occ-ext|ezc-itg)\.wip\.it\.hpe\.com/i])o=o||e.test(t.hostname);for(let e of[/zerto\.com|arubanetworks\.com/,/(\.hp\.com|.*sbc\.hpe\.com|gordon\.|sitebuilder\.hpe.+com|softwaresupport\.|softwaregrp\.|microfocus\.|viewcentral\.|archive\.org|internal\.support\.)/i,/(\d\.\d\.\d\.\d)/i,/(austin|houston|myroomalpha\d\.\w*|origin-(auth|stg)-www-hpe-com\.\w*).hpe?.com|microfocus\.com|partsurfermobile\.ext\.hpe\.com/i])a=a||e.test(t.hostname);try{s=(e=>{let t=!1;try{t=p.test(e)||p.test(decodeURIComponent(e))}catch(e){}return t})(t.href)}catch(e){}return(s||r||a||n)&&!(i||o)})()||function(e){let t=e.location.hostname;return/www\.qbert(?:-qa|-uat|-dev|npi)?\.gss\.ext\.hpe\.com/i.test(t)||u.test(e.location.hostname)}(e)},h.currentState}constructor(e){f(this,"window",void 0),this.window=e,void 0===h.currentState&&(h.currentState=this.compute())}}f(h,"currentState",void 0);let y="https://d3brryyoc4rul6.cloudfront.net/metrics/bootstrap/prod_wsdk_dev.js";function v(e,t,r,n=!0,i=!1){var o;let a=e.document.createElement("script");a.type="text/javascript",a.async=!0,a.defer=n,a.src=t,i&&a.setAttribute("loading","lazy"),r&&(a.onload=r,a.addEventListener("readystatechange",r));let s=e.document.getElementsByTagName("script")[0];null==(o=s.parentNode)||o.insertBefore(a,s)}function w(e){let t=e.location.hostname;return/b2b\.(it\.)?hpe\.com/i.test(t)}function b(e){var t,r,n,i;let o=e.location.hostname,a=e.location.pathname,s=null!=(i=null==(n=e.digitalData)||null==(r=n.page)||null==(t=r.pageInfo)?void 0:t.breadCrumbs)?i:["no"];return w(e)||/buy\.(it\.)?hpe\.com\/(b2b|shop)/i.test(o+a)||/ngec([^.]+)?\.(it\.)?hpe\.com\/(shop\/login|b2b\/)/i.test(o+a)||"b2b-hybris"===s[0]||/occ-ext\.wip\.it\.hpe\.com\/ngc-maui\/(MauiServlet|HybrisIntegration)/i.test(o+a)}let E=e=>null!=e&&!Array.isArray(e)&&"object"==typeof e,I=e=>{let t="=".repeat((4-e.length%4)%4),r=atob((e+t).replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(r,e=>e.codePointAt(0))},S=(e,t={})=>{let{urlSafe:r=!1}=t||{},n=btoa(String.fromCharCode(...e));return r?n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):n};function C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var k=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=C({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var o=r[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",C({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,C({},this.attributes,t))},withConverter:function(t){return e(C({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let T={get:k.get.bind(k),set:k.set.bind(k),remove:k.remove.bind(k),withConverter:k.withConverter.bind(k)},D=(e,t)=>{Object.keys(t).forEach(r=>{if(E(e[r])&&E(t[r]))return void D(e[r],t[r]);e[r]=t[r]})},P=(e,...t)=>{if(null==e)throw TypeError('deepAssign "target" cannot be null or undefined');let r=Object(e);return t.forEach(e=>D(r,Object(e))),r},O=(e,t)=>r=>{P(t.split(".").reduce((e,t)=>(e[t]=e[t]||{},e[t]),e),r)},A=()=>{let e=[];return{add(t){e.push(t)},call:(...t)=>Promise.all(e.map(e=>e(...t)))}},R=({logger:e,cookieJar:t})=>({...t,set:(r,n,i)=>(e.info("Setting cookie",{name:r,value:n,...i}),t.set(r,n,i))}),N=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e},_=(e,t)=>e===t,x=(e,t)=>e.appendChild(t),M=(e,t={},r={},n=[],i=document)=>{let o=i.createElement(e);return Object.keys(t).forEach(e=>{o.setAttribute(e,t[e])}),((e,t)=>{Object.keys(t).forEach(r=>{if("style"===r&&E(t[r])){let n=t[r];Object.keys(n).forEach(t=>{e.style[t]=n[t]})}else e[r]=t[r]})})(o,r),n.forEach(e=>x(o,e)),o},L="STYLE",$="SCRIPT",U=({src:e,currentDocument:t=document})=>new Promise((r,n)=>{M("IMG",{src:e},{onload:r,onerror:n,onabort:n},[],t)}),j=e=>Array.isArray(e)&&e.length>0,q=e=>Array.isArray(e)?e:null==e?[]:[].slice.call(e),B=/^\s*>/,F=(e,t)=>B.test(t)?q(e.querySelectorAll(`:scope ${t}`)):q(e.querySelectorAll(t)),V=":shadow",H=(e,t)=>{if(!t.startsWith(">"))return t;let r=e instanceof Element||e instanceof Document?":scope":":host";return`${r} ${t}`},z=(e,t=document)=>-1===e.indexOf(V)?F(t,e):((e,t)=>{let r=t.split(V);if(r.length<2)return F(e,t);let n=e;for(let e=0;e<r.length;e+=1){let t=r[e].trim();if(""===t&&n.shadowRoot){n=n.shadowRoot;continue}let i=H(n,t),o=F(n,i);if(0===o.length||!o[0]||!o[0].shadowRoot)return o;n=o[0].shadowRoot}})(t,e),G="MutationObserver",J={childList:!0,subtree:!0},X=5e3,Q=e=>Error(`Could not find: ${e}`),Y=e=>new Promise(e),W=(e,t=z,r=X,n=window,i=document)=>{let o=t(e);if(j(o))return Promise.resolve(o);return"function"==typeof n[G]?((e,t,r,n,i)=>Y((o,a)=>{let s,l=new e[G](()=>{let e=i(r);j(e)&&(l.disconnect(),s&&clearTimeout(s),o(e))});s=setTimeout(()=>{l.disconnect(),a(Q(r))},n),l.observe(t,J)}))(n,i,e,r,t):"visible"===i.visibilityState?((e,t,r,n)=>Y((i,o)=>{let a=()=>{let r=n(t);if(j(r))return void i(r);e.requestAnimationFrame(a)};a(),setTimeout(()=>{o(Q(t))},r)}))(n,e,r,t):((e,t,r)=>Y((n,i)=>{let o=()=>{let t=r(e);if(j(t))return void n(t);setTimeout(o,100)};o(),setTimeout(()=>{i(Q(e))},t)}))(e,r,t)},K=(t=document)=>{if(void 0===e){let r=t.querySelector("[nonce]");e=r&&(r.nonce||r.getAttribute("nonce"))}return e},Z=(e,t={})=>document.querySelector(`script[src="${e}"]`)?(t.onLoad&&t.onLoad(),Promise.resolve()):new Promise((r,n)=>{let{attributes:i={},onLoad:o,onError:a}=t,s=M("script",{type:"text/javascript",src:e,async:!0,...K()&&{nonce:K()},...i},{onload:()=>{o&&o(),r()},onerror:()=>{let t=Error(`Failed to load script: ${e}`);a&&a(t),n(t)}}),l=()=>{let e=document.head||document.body;if(e)x(e,s);else{let e=Error("Neither <head> nor <body> available for script insertion.");a&&a(e),n(e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()}),ee=e=>{let t=e.parentNode;return t?t.removeChild(e):null},et={name:"Adobe Alloy"},er={style:{display:"none",width:0,height:0}},en=e=>(e=>{let t=0x811c9dc5,r=new TextEncoder().encode(e);for(let e=0;e<r.length;e+=1)t^=r[e],t=Math.imul(t,0x1000193);return t>>>0})(e).toString(16).padStart(8,"0"),ei="com.adobe.alloy.",eo=(e,t)=>e.slice(-t),ea=`${ei}getTld`,es="kndctr",el=e=>e.replace("@","_"),ed=(e,t)=>`${es}_${el(e)}_${t}`,ec=(e,t)=>{let r={};return e.forEach(e=>{let n=t(e);r[n]||(r[n]=[]),r[n].push(e)}),r},eu="Chrome",ep="Edge",em="EdgeChromium",eg="Unknown",ef=e=>{let t,r=!1;return()=>(r||(r=!0,t=e()),t)},eh=[eu,ep,em,"IE",eg],ey=({getBrowser:e})=>ef(()=>eh.includes(e())),ev=({orgId:e})=>{let t=ed(e,"identity");return()=>!!T.get(t)},ew=(e,t,r)=>({getItem(n){try{return e[t].getItem(r+n)}catch{return null}},setItem(n,i){try{return e[t].setItem(r+n,i),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach(n=>{n.startsWith(r)&&e[t].removeItem(n)}),!0}catch{return!1}}}),eb=e=>t=>{let r=ei+t;return{session:ew(e,"sessionStorage",r),persistent:ew(e,"localStorage",r)}},eE=e=>E(e)&&0===Object.keys(e).length,eI=e=>"number"==typeof e&&!Number.isNaN(e),eS=e=>{let t=parseInt(e,10);return eI(t)&&e===t},eC=e=>"string"==typeof e&&e.length>0,ek=()=>{},eT=(e,t)=>null!=e&&E(e)?Object.keys(e).reduce((r,n)=>{let i=e[n];if(E(i)){let e=eT(i,t);return eE(e)?r:{...r,[n]:e}}return t(i)?{...r,[n]:i}:r},{}):e;var eD=l(117);let eP=e=>Array.isArray(e)?e.map(e=>eP(e)):"object"==typeof e&&null!==e?Object.keys(e).sort().reduce((t,r)=>(t[r]=eP(e[r]),t),{}):e,eO=e=>eP(e),eA=e=>e instanceof Error?e:Error(e),eR=({error:e,message:t})=>{try{e.message=t}catch{}},eN=({error:e,message:t})=>{let r=eA(e),n=`${t}
Caused by: ${r.message}`;return eR({error:r,message:n}),r},e_=(e,t)=>{if(eI(e)||"string"==typeof e){let t=Math.round(Number(e));if(!Number.isNaN(t))return t}return t},ex=(e,t,r)=>`${e}`.padStart(t,r),eM={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},eL=new Uint8Array(16),e$=[];for(let e=0;e<256;++e)e$.push((e+256).toString(16).slice(1));let eU=function(e,r,n){if(eM.randomUUID&&!r&&!e)return eM.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(eL)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r){if((n=n||0)<0||n+16>r.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[n+e]=i[e];return r}return function(e,t=0){return(e$[e[t+0]]+e$[e[t+1]]+e$[e[t+2]]+e$[e[t+3]]+"-"+e$[e[t+4]]+e$[e[t+5]]+"-"+e$[e[t+6]]+e$[e[t+7]]+"-"+e$[e[t+8]]+e$[e[t+9]]+"-"+e$[e[t+10]]+e$[e[t+11]]+e$[e[t+12]]+e$[e[t+13]]+e$[e[t+14]]+e$[e[t+15]]).toLowerCase()}(i)},ej=e=>function(t,r){return null==t?t:e.call(this,t,r)},eq=(e,t)=>function(r,n){return t.call(this,e.call(this,r,n),n)},eB=(e,t,r)=>Object.assign(eq(e,t),e,r),eF=(e,t,r)=>Object.assign(eq(e,ej(t)),e,r),eV=(e,t,r,n)=>{if(!e)throw Error(`'${r}': Expected ${n}, but got ${JSON.stringify(t)}.`)},eH=(e,t)=>(eV("boolean"==typeof e,e,t,"true or false"),e),ez=(e,t)=>(eV("function"==typeof e,e,t,"a function"),e),eG=(e,t)=>(r,n)=>(eV(r>=t,r,n,`${e} greater than or equal to ${t}`),r),eJ=e=>(t,r)=>(E(t)?eV(!eE(t),t,r,e):eV(t.length>0,t,r,e),t),eX=/^[a-z0-9.-]{1,}$/i,eQ=(e,t)=>(eV(eX.test(e),e,t,"a valid domain"),e),eY=(e,t)=>(eV(eS(e),e,t,"an integer"),e),eW=(e,t)=>(eV(eI(e),e,t,"a number"),e),eK=(e,t)=>(eV((e=>{try{return null!==RegExp(e)}catch{return!1}})(e),e,t,"a regular expression"),e),eZ=(e,t)=>{if(null==e)throw Error(`'${t}' is a required option`);return e},e0=(e,t)=>(eV("string"==typeof e,e,t,"a string"),e),e1=e=>e;e1.default=function(e){return eB(this,t=>null==t?e:t)},e1.required=function(){return eB(this,eZ)},e1.deprecated=function(e){return eB(this,((e="This field has been deprecated")=>function(t,r){let n=e;return void 0!==t&&(r&&(n=`'${r}': ${n}`),this&&this.logger&&this.logger.warn(n)),t})(e))};let e2=function(){return eF(this,eQ)},e3=function(e){return eF(this,eG("an integer",e))},e5=function(e){return eF(this,eG("a number",e))},e6=function(e){return eF(this,(t,r)=>(eV(t<=e,t,r,`a number less than or equal to ${e}`),t))},e4=function(){return eF(this,eY,{minimum:e3})},e9=function(){return eF(this,eJ("a non-empty string"))},e7=function(){return eF(this,eJ("a non-empty array"))},e8=function(){return eF(this,eJ("a non-empty object"))},te=function(){return eF(this,eK)},tt=function(e){return eF(this,(t,r)=>(eV(e.test(t),t,r,`does not match the ${e.toString()}`),t))},tr=function(){return eF(this,(()=>{let e=[];return(t,r)=>(eV(-1===e.indexOf(t),t,r,"a unique value across instances"),e.push(t),t)})())},tn=function(){return eF(this,(e,t)=>(eV((e=>{let t=Object.create(null);for(let r=0;r<e.length;r+=1){let n=e[r];if(n in t)return!1;t[n]=!0}return!0})(e),e,t,"array values to be unique"),e))},ti=e=>({noUnknownFields:function(){return eF(this,(t,r)=>{let n=[];if(Object.keys(t).forEach(t=>{if(!e[t]){let e=r?`${r}.${t}`:t;n.push(`'${e}': Unknown field.`)}}),n.length)throw Error(n.join(`
`));return t})},nonEmpty:e8,concat:function(t){let r={...e,...t.schema};return eF(this,t,ti(r))},renamed:function(e,t,r){var n;let i,o;return Object.assign((i=ej(function(n,i){eV(E(n),n,i,"an object");let{[e]:o,[r]:a,...s}=n,l=t(o,i);if(void 0!==l){let t=`The field '${e}' is deprecated. Use '${r}' instead.`;if(i&&(t=`'${i}': ${t}`),void 0!==a&&a!==l)throw Error(t);this&&this.logger&&this.logger.warn(t)}return{[r]:a||l,...s}}),o=this,function(e,t){let r=[],n=[i,o].reduce((e,n)=>{try{return n.call(this,e,t)}catch(t){return r.push(t),e}},e);if(r.length)throw Error(r.join(`
`));return n}),this,n)},schema:e}),to=(function(e,t){return eB(this,function(r,n){let i;return eV(e.find(e=>{try{return i=e.call(this,r,n),!0}catch{return!1}}),r,n,t),i})}).bind(e1),ta=(function(){return this}).bind(e1),ts=(function(e){return eF(this,function(t,r){eV(Array.isArray(t),t,r,"an array");let n=[],i=t.map((i,o)=>{try{return e.call(this,i,`${r}[${o}]`,t)}catch(e){n.push(e.message);return}});if(n.length)throw Error(n.join(`
`));return i},{nonEmpty:e7,uniqueItems:tn})}).bind(e1),tl=(function(){return eF(this,eH)}).bind(e1),td=(function(){return eF(this,ez)}).bind(e1),tc=(function(e){return eF(this,(t,r)=>(eV(t===e,t,r,`${e}`),t))}).bind(e1),tu=(function(){return eF(this,eW,{minimum:e5,maximum:e6,integer:e4,unique:tr})}).bind(e1),tp=(function(e){return eF(this,function(t,r){eV(E(t),t,r,"an object");let n=[],i={};if(Object.keys(t).forEach(o=>{let a=t[o],s=r?`${r}.${o}`:o;try{let t=e.call(this,a,s);void 0!==t&&(i[o]=t)}catch(e){n.push(e.message)}}),n.length)throw Error(n.join(`
`));return i},{nonEmpty:e8})}).bind(e1),tm=(function(e){return eF(this,function(t,r){eV(E(t),t,r,"an object");let n=[],i={};if(Object.keys(e).forEach(o=>{let a=t[o],s=e[o],l=r?`${r}.${o}`:o;try{let e=s.call(this,a,l);void 0!==e&&(i[o]=e)}catch(e){n.push(e.message)}}),Object.keys(t).forEach(e=>{Object.prototype.hasOwnProperty.call(i,e)||(i[e]=t[e])}),n.length)throw Error(n.join(`
`));return i},ti(e))}).bind(e1),tg=(function(){return eF(this,e0,{regexp:te,domain:e2,nonEmpty:e9,unique:tr,matches:tt})}).bind(e1),tf=function(...e){return to(e.map(tc),`one of these values: ${JSON.stringify(e)}`)},th=tp(ts(tm({authenticatedState:tf("ambiguous","authenticated","loggedOut"),id:tg(),namespace:tm({code:tg()}).noUnknownFields(),primary:tl(),xid:tg()}).noUnknownFields()).required()),ty=tm({}),tv="alloy_debug",tw=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],tb=(e,t)=>(...r)=>{let n;try{n=e(...r)}catch(e){throw eN({error:e,message:t})}return n instanceof Promise&&(n=n.catch(e=>{throw eN({error:e,message:t})})),n},tE=(e,t)=>{let r,n=0,i=0;do{if(t<0||t+i>=e.length)throw Error("Invalid varint: buffer ended unexpectedly");if(n|=(127&(r=e[t+i]))<<7*i,(i+=1)>10)throw Error("Invalid varint: too long")}while(128&r)return{value:n,length:i}},tI=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),tS="pending",tC="disabled",tk="wait",tT="auto",tD="general",tP="declinedConsent",tO="default",tA="initial",tR=e=>{let t=Error(e);return t.code=tP,t.message=e,t},tN=e=>e&&e._experience&&e._experience.decisioning&&j(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[],t_=()=>{let e,t,r={},n=!1,i=!1,o=!0,a=e=>{if(i)throw Error(`${e} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){let n=JSON.parse(JSON.stringify(r));return e&&P(n,{xdm:e}),t&&P(n,{data:t}),n},setUserXdm(t){a("setUserXdm"),e=t},setUserData(e){a("setUserData"),t=e},mergeXdm(e){a("mergeXdm"),e&&P(r,{xdm:e})},mergeData(e){a("mergeData"),e&&P(r,{data:e})},mergeMeta(e){a("mergeMeta"),e&&P(r,{meta:e})},mergeQuery(e){a("mergeQuery"),e&&P(r,{query:e})},documentMayUnload(){n=!0},finalize(n){if(i)return;let a=((e,t=_)=>e.filter((r,n)=>((e,t,r)=>{for(let n=0;n<e.length;n+=1)if(r(e[n],t))return n;return -1})(e,r,t)===n))([...tN(e),...tN(r.xdm)],(e,t)=>e===t||e.id&&t.id&&e.id===t.id&&e.scope&&t.scope&&e.scope===t.scope);if(e&&this.mergeXdm(e),a.length>0&&(r.xdm._experience.decisioning.propositions=a),t&&s.mergeData(t),i=!0,n){o=!1;let e={xdm:r.xdm||{},data:r.data||{}};o=!1!==n(e),r.xdm=e.xdm||{},r.data=e.data||{},eE(r.xdm)&&delete r.xdm,eE(r.data)&&delete r.data}},getDocumentMayUnload:()=>n,isEmpty:()=>eE(r)&&(!e||eE(e))&&(!t||eE(t)),shouldSend:()=>o,getViewName(){if(e&&e.web&&e.web.webPageDetails)return e.web.webPageDetails.viewName},toJSON(){if(!i)throw Error("toJSON called before finalize");return r}};return s},tx="configure",tM="setDebug",tL=({command:e,options:t})=>{let{commandName:r,documentationUri:n="https://adobe.ly/3sHgQHb",optionsValidator:i}=e,o=t;if(i)try{o=i(t)}catch(e){throw Error(`Invalid ${r} command options:
	 - ${e} For command documentation see: ${n}`)}return o},t$=e=>({...e}),tU=({errorPrefix:e,logger:t})=>(r,n)=>{let i=eA(r);if(i.code===tP)return t.warn(`The ${n} could not fully complete. ${i.message}`),{};throw eR({error:i,message:`${e} ${i.message}`}),i},tj="__view__",tq=e=>(t,r)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(r)},tB=e=>{let{payload:t,getAction:r,getUseSendBeacon:n,datastreamIdOverride:i,edgeSubPath:o}=e,a=eU(),s=!1,l=!1;return{getId:()=>a,getPayload:()=>t,getAction:()=>r({isIdentityEstablished:l}),getDatastreamIdOverride:()=>i,getUseSendBeacon:()=>n({isIdentityEstablished:l}),getEdgeSubPath:()=>o||"",getUseIdThirdPartyDomain:()=>s,setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){l=!0}}},tF=({payload:e,datastreamIdOverride:t})=>{let r=({isIdentityEstablished:t})=>e.getDocumentMayUnload()&&t;return tB({payload:e,getAction:({isIdentityEstablished:e})=>r({isIdentityEstablished:e})?"collect":"interact",getUseSendBeacon:r,datastreamIdOverride:t})},tV=e=>{let{content:t,addIdentity:r,hasIdentity:n}=e,i=e=>{Object.assign("meta.configOverrides".split(".").reduce((e,t)=>(e[t]=e[t]||{},e[t]),t),e)};return{mergeMeta:O(t,"meta"),mergeState:O(t,"meta.state"),mergeQuery:O(t,"query"),mergeConfigOverride:e=>i((e=>{if(null==e||"object"!=typeof e)return null;let t=eT(e,e=>null!=e&&!!("boolean"==typeof e||eI(e)||eC(e)||j(e)));return eE(t)?null:t})(e)),addIdentity:r,hasIdentity:n,toJSON:()=>t}},tH=e=>t=>(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t])!==void 0,tz=()=>{let e={};return{...tV({content:e,addIdentity:tq(e),hasIdentity:tH(e)}),addEvent:t=>{e.events=e.events||[],e.events.push(t)},getDocumentMayUnload:()=>(e.events||[]).some(e=>e.getDocumentMayUnload())}},tG=({localConfigOverrides:e,globalConfigOverrides:t,payload:r})=>{let n={payload:r},{datastreamId:i,...o}=e||{};return i&&(n.datastreamIdOverride=i),t&&!eE(t)&&r.mergeConfigOverride(t),o&&!eE(o)&&r.mergeConfigOverride(o),n},tJ="clientId",tX="Event was canceled because the onBeforeEventSend callback returned false.",tQ=e=>{let t=e.shift()||[];return((...e)=>e.length<2?Object.assign(...e):e.reduce((e,t)=>(E(t)&&Object.keys(t).forEach(r=>{Array.isArray(t[r])?Array.isArray(e[r])?e[r].push(...t[r]):e[r]=[...t[r]]:e[r]=t[r]}),e)))({},...t,...e.shift()||[],...e)},tY=e=>t=>{let r=()=>{throw t};return e.call({error:t}).then(r,r)},tW="The server responded with a",tK=[429,503,502,504],tZ=({response:e,retriesAttempted:t})=>t<3&&tK.includes(e.statusCode),t0=({response:e,retriesAttempted:t})=>{let r=(e=>{let t,r=e.getHeader("Retry-After");if(r){let e=parseInt(r,10);t=eS(e)?1e3*e:Math.max(0,new Date(r).getTime()-new Date().getTime())}return t})(e);return void 0===r&&(r=(e=>{let t=1e3+1e3*e,r=.3*t,n=t-r;return Math.round(n+Math.random()*(t+r-n))})(t)),r},t1=e=>t=>{P(t,{timestamp:e().toISOString()})},t2="2.29.0",t3=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]],t5=(e=>t=>{P(t,{web:{webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}}})})(window),t6=(e=>t=>{let{screen:{width:r,height:n}}=e,i={},o=e_(n);o>=0&&(i.screenHeight=o);let a=e_(r);a>=0&&(i.screenWidth=a);let s=(e=>{let{screen:{orientation:t}}=e;if(null==t||null==t.type)return null;let r=t.type.split("-");return 0===r.length||"portrait"!==r[0]&&"landscape"!==r[0]?null:r[0]})(e)||(e=>{if("function"==typeof e.matchMedia){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null})(e);s&&(i.screenOrientation=s),Object.keys(i).length>0&&P(t,{device:i})})(window),t4=(i=window,e=>{let{document:{documentElement:{clientWidth:t,clientHeight:r}={}}}=i,n={type:"browser"},o=e_(t);o>=0&&(n.browserDetails={viewportWidth:o});let a=e_(r);a>=0&&(n.browserDetails=n.browserDetails||{},n.browserDetails.viewportHeight=a),P(e,{environment:n})}),t9=(o=()=>new Date,e=>{let t=o(),r={},n=e_(t.getTimezoneOffset());void 0!==n&&(r.localTimezoneOffset=n),(void 0===n||6e3>Math.abs(n))&&(r.localTime=(e=>{let t=e.getFullYear(),r=ex(e.getMonth()+1,2,"0"),n=ex(e.getDate(),2,"0"),i=ex(e.getHours(),2,"0"),o=ex(e.getMinutes(),2,"0"),a=ex(e.getSeconds(),2,"0"),s=ex(e.getMilliseconds(),3,"0"),l=e_(e.getTimezoneOffset(),0),d=ex(Math.floor(Math.abs(l)/60),2,"0"),c=ex(Math.abs(l)%60,2,"0");return`${t}-${r}-${n}T${i}:${o}:${a}.${s}${l>0?"-":"+"}${d}:${c}`})(t)),P(e,{placeContext:r})}),t7=t1(()=>new Date),t8=(e=>"userAgentData"in e?(t,r)=>{try{return e.userAgentData.getHighEntropyValues(t3.map(e=>e[0])).then(e=>{let r={};t3.forEach(([t,n])=>{Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===n&&(r[t]=e[t])}),P(t,{environment:{browserDetails:{userAgentClientHints:r}}})})}catch(e){return r.warn(`Unable to collect user-agent client hints. ${e.message}`),ek}}:ek)(navigator),re={web:t5,device:t6,environment:t4,placeContext:t9},rt={...re,highEntropyUserAgentHints:t8},rr=[t7,e=>{P(e,{implementationDetails:{name:"https://ns.adobe.com/experience/alloy",version:t2,environment:"browser"}})}],rn=({config:e,logger:t})=>((e,t,r,n)=>{let i=e.context.flatMap((e,n)=>r[e]?[r[e]]:(t.warn(`Invalid context[${n}]: '${e}' is not available.`),[])).concat(n);return{namespace:"Context",lifecycle:{onBeforeEvent({event:e}){let r={};return Promise.all(i.map(e=>Promise.resolve(e(r,t)))).then(()=>e.mergeXdm(r))}}}})(e,t,rt,rr);rn.namespace="Context",rn.configValidators=tm({context:ts(tg()).default(Object.keys(re))});let ri=rn,ro=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:e=>(({options:e})=>tm({type:tg(),xdm:tm({eventType:tg(),identityMap:th}),data:tm({}),documentUnloading:tl(),renderDecisions:tl(),decisionScopes:ts(tg()).uniqueItems(),personalization:tm({decisionScopes:ts(tg()).uniqueItems(),surfaces:ts(tg()).uniqueItems(),sendDisplayEvent:tl().default(!0),includeRenderedPropositions:tl().default(!1),defaultPersonalizationEnabled:tl(),decisionContext:tm({})}).default({sendDisplayEvent:!0}),datasetId:tg(),mergeId:tg(),edgeConfigOverrides:ty,advertising:tm({handleAdvertisingData:tf(tC,tk,tT).default(tC)})}).required().noUnknownFields()(e))({options:e}),run:r=>{let{xdm:n,data:i,documentUnloading:o,type:a,mergeId:s,datasetId:l,edgeConfigOverrides:d,...c}=r,u=e.createEvent();return o&&u.documentMayUnload(),u.setUserXdm(n),u.setUserData(i),a&&u.mergeXdm({eventType:a}),s&&u.mergeXdm({eventMergeId:s}),d&&(c.edgeConfigOverrides=d),l&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),c.edgeConfigOverrides=d||{},P(c.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:l}}}})),e.sendEvent(u,c)}},applyResponse:{documentationUri:"",optionsValidator:e=>(({options:e})=>tm({renderDecisions:tl(),responseHeaders:tp(tg().required()),responseBody:tm({handle:ts(tm({type:tg().required(),payload:ta().required()})).required()}).required(),personalization:tm({sendDisplayEvent:tl().default(!0),decisionContext:tm({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e))({options:e}),run:t=>{let{renderDecisions:r=!1,decisionContext:n={},responseHeaders:i={},responseBody:o={handle:[]},personalization:a}=t,s=e.createEvent();return e.applyResponse(s,{renderDecisions:r,decisionContext:n,responseHeaders:i,responseBody:o,personalization:a})}}}});ro.namespace="DataCollector";let ra=ro,rs=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`,rl=tm({thirdPartyCookiesEnabled:tl().default(!0),idMigrationEnabled:tl().default(!0)}),rd=tm({url:tg().required().nonEmpty(),edgeConfigOverrides:ty}).required().noUnknownFields(),rc="ECID",ru=({logger:e})=>new Promise((t,r)=>{if(E(window.adobe)&&E(window.adobe.optIn)){let n=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),n.fetchPermissions(()=>{n.isApproved([n.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):r(Error("Legacy opt-in was declined."))},!0)}else t()}),rp="CORE",rm=e=>{try{return decodeURIComponent(e)}catch{return""}},rg=(e,t)=>{e.addIdentity(rc,{id:t})},rf=e=>e.getPayloadsByType("identity:result").reduce((e,t)=>(t.namespace&&t.namespace.code&&(e[t.namespace.code]=t.id),e),{}),rh=({payload:e,datastreamIdOverride:t})=>tB({payload:e,datastreamIdOverride:t,getAction:()=>"identity/acquire",getUseSendBeacon:()=>!1}),ry=e=>{let t={query:{identity:{fetch:e}}};return tV({content:t,addIdentity:tq(t),hasIdentity:tH(t)})},rv=/^([^?#]*)(\??[^#]*)(#?.*)$/,rw=tm({namespaces:ts(tf(rc,rp)).nonEmpty().uniqueItems().default([rc]),edgeConfigOverrides:ty}).noUnknownFields().default({namespaces:[rc]}),rb=({config:e,logger:t,consent:r,fireReferrerHideableImage:n,sendEdgeNetworkRequest:i,apexDomain:o,getBrowser:a,identity:s})=>{let{orgId:l,thirdPartyCookiesEnabled:d,edgeConfigOverrides:c}=e,u=(({config:e,getEcidFromVisitor:t,apexDomain:r,isPageSsl:n,cookieJar:i})=>{let{idMigrationEnabled:o,orgId:a}=e,s=`AMCV_${a}`,l=()=>{let e=null,t=i.get("s_ecid")||i.get(s);if(t){let r=t.match(/(^|\|)MCMID\|(\d+)($|\|)/);r&&(e=r[2])}return e};return{getEcid(){if(o){let e=l();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid(e){o&&l()!==e&&i.set(s,`MCMID|${e}`,{domain:r,expires:390,...n?{sameSite:"none",secure:!0}:{}})}}})({config:e,getEcidFromVisitor:(({logger:e,orgId:t,awaitVisitorOptIn:r})=>()=>{let n=(e=>{let t=e.Visitor;return"function"==typeof t&&"function"==typeof t.getInstance&&t})(window);return n?r({logger:e}).then(()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise(r=>{n.getInstance(t,{}).getMarketingCloudVisitorID(t=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),r(t)},!0)}))).catch(t=>{t?e.info(`${t.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")}):Promise.resolve()})({logger:t,orgId:l,awaitVisitorOptIn:ru}),apexDomain:o,cookieJar:R({logger:t,cookieJar:T}),isPageSsl:"https:"===window.location.protocol}),p=ev({orgId:l}),m=(({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:r,globalConfigOverrides:n})=>({namespaces:i,edgeConfigOverrides:o}={})=>e({request:r(tG({payload:t(i),globalConfigOverrides:n,localConfigOverrides:o}))}))({sendEdgeNetworkRequest:i,createIdentityRequestPayload:ry,createIdentityRequest:rh,globalConfigOverrides:c}),g=ey({getBrowser:a}),f=(({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>r=>{e&&t()&&r.setUseIdThirdPartyDomain()})({thirdPartyCookiesEnabled:d,areThirdPartyCookiesSupportedByDefault:g}),h=(({getLegacyEcid:e,addEcidToPayload:t})=>r=>r.hasIdentity(rc)?Promise.resolve():e().then(e=>{e&&t(r,e)}))({getLegacyEcid:u.getEcid,addEcidToPayload:rg}),y=(({locationSearch:e,dateProvider:t,orgId:r,logger:n})=>i=>{if(i.hasIdentity(rc))return;let o=eD.parse(e).adobe_mc;if(void 0===o)return;Array.isArray(o)&&(n.warn("Found multiple adobe_mc query string paramters, only using the last one."),o=o[o.length-1]);let a=o.split("|").reduce((e,t)=>{let[r,n]=t.split("=");return e[r]=rm(n),e[r]=e[r].replace(/[^a-zA-Z0-9@.]/g,""),e},{}),s=parseInt(a.TS,10),l=a.MCMID,d=rm(a.MCORGID);t().getTime()/1e3<=s+300&&d===r&&l?(n.info(`Found valid ECID identity ${l} from the adobe_mc query string parameter.`),i.addIdentity(rc,{id:l})):n.info("Detected invalid or expired adobe_mc query string parameter.")})({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:l,logger:t}),v=(({doesIdentityCookieExist:e,orgId:t,logger:r})=>({onResponse:n,onRequestFailure:i})=>new Promise((o,a)=>{n(()=>{e()?o():(r.warn(`Identity cookie not found. This could be caused by any of the following issues:
	* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.
	* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.
	* The request was canceled by the browser and not fully processed.`),a(Error("Identity cookie not found.")))}),i(()=>{e()?o():a(Error("Identity cookie not found."))})}))({doesIdentityCookieExist:p,orgId:l,logger:t}),w=(({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:r,awaitIdentityCookie:n,logger:i})=>{let o,a=e=>(t(e),r(e.getPayload()));return({request:t,onResponse:r,onRequestFailure:s})=>{if(e())return t.setIsIdentityEstablished(),Promise.resolve();if(o){i.info("Delaying request while retrieving ECID from server.");let e=o;return(o=e.catch(()=>n({onResponse:r,onRequestFailure:s}))).catch(()=>{}),e.then(()=>{i.info("Resuming previously delayed request."),t.setIsIdentityEstablished()}).catch(()=>a(t))}return(o=n({onResponse:r,onRequestFailure:s})).catch(()=>{}),a(t)}})({doesIdentityCookieExist:p,setDomainForInitialIdentityPayload:f,addLegacyEcidToPayload:h,awaitIdentityCookie:v,logger:t}),b=(({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange")))({processIdSyncs:(({fireReferrerHideableImage:e,logger:t})=>r=>{let n=r.filter(e=>"url"===e.type);return n.length?Promise.all(n.map(r=>e(r.spec).then(()=>{t.info(rs(r,!0))}).catch(()=>{t.error(rs(r,!1))}))).then(ek):Promise.resolve()})({fireReferrerHideableImage:n,logger:t})}),E=(({dateProvider:e,orgId:t})=>(r,n)=>{let i=Math.round(e().getTime()/1e3),o=encodeURIComponent(`TS=${i}|MCMID=${r}|MCORGID=${encodeURIComponent(t)}`),[,a,s,l]=n.match(rv),d=(e=>""===e?"?":"?"===e?"":"&")(s);return`${a}${s}${d}adobe_mc=${o}${l}`})({dateProvider:()=>new Date,orgId:l,globalConfigOverrides:c}),I=(({thirdPartyCookiesEnabled:e})=>t=>{let r=rw(t);if(!e&&r.namespaces.includes(rp))throw Error(`namespaces: The ${rp} namespace cannot be requested when third-party cookies are disabled.`);return r})({thirdPartyCookiesEnabled:d});return(({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:r,setLegacyEcid:n,handleResponseForIdSyncs:i,getNamespacesFromResponse:o,getIdentity:a,consent:s,appendIdentityToUrl:l,logger:d,identity:c,getIdentityOptionsValidator:u})=>{let p,m={};return{lifecycle:{onBeforeRequest:({request:n,onResponse:i,onRequestFailure:o})=>(e(n.getPayload()),t(n.getPayload()),r({request:n,onResponse:i,onRequestFailure:o})),onResponse({response:e}){let t=o(e);return(!p||!p[rc])&&t&&t[rc]&&n(t[rc]),t&&Object.keys(t).length>0&&(p={...p,...t}),m={...m,...e.getEdge()},c.setIdentityAcquired(),i(e)}},commands:{getIdentity:{optionsValidator:u,run:e=>{let{namespaces:t}=e;return s.awaitConsent().then(()=>{if(p)return;let r=c.getEcidFromCookie();if(!(r&&t.includes(rc))||(p||(p={}),p[rc]=r,1!==t.length))return a(e)}).then(()=>({identity:t.reduce((e,t)=>(e[t]=p[t]||null,e),{}),edge:m}))}},appendIdentityToUrl:{optionsValidator:rd,run:e=>s.withConsent().then(()=>{if(p)return;let t=c.getEcidFromCookie();if(t){p||(p={}),p[rc]=t;return}return a(e)}).then(()=>({url:l(p[rc],e.url)})).catch(t=>(d.warn(`Unable to append identity to url. ${t.message}`),e))}}}})({addEcidQueryToPayload:(({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{let r={identity:{fetch:[rc]}};return e&&t()&&r.identity.fetch.push(rp),e=>{e.mergeQuery(r)}})({thirdPartyCookiesEnabled:d,areThirdPartyCookiesSupportedByDefault:g}),addQueryStringIdentityToPayload:y,ensureSingleIdentity:w,setLegacyEcid:u.setEcid,handleResponseForIdSyncs:b,getNamespacesFromResponse:rf,getIdentity:m,consent:r,identity:s,appendIdentityToUrl:E,logger:t,config:e,getIdentityOptionsValidator:I})};rb.namespace="Identity",rb.configValidators=rl;let rE=rb,rI=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:(({config:e,componentRegistry:t})=>{let r=[...t.getCommandNames(),tx,tM].sort(),n={...e};return Object.keys(e).forEach(t=>{let r=e[t];"function"==typeof r&&(n[t]=r.toString())}),{version:t2,configs:n,commands:r,components:t.getComponentNames()}})({config:e,componentRegistry:t})})}}});rI.namespace="LibraryInfo";let rS=rI,rC=eb(window),{console:rk,fetch:rT,navigator:rD}=window,rP=tm({debugEnabled:tl().default(!1),datastreamId:tg().unique().required(),edgeDomain:tg().domain().default("edge.adobedc.net"),edgeBasePath:tg().nonEmpty().default("ee"),orgId:tg().unique().required(),onBeforeEventSend:td().default(ek),edgeConfigOverrides:ty}).renamed("edgeConfigId",tg().unique(),"datastreamId"),rO=((e,t)=>{let r="",n=e.location.hostname.toLowerCase().split("."),i=1;for(;i<n.length&&!t.get(ea);)i+=1,r=eo(n,i).join("."),t.set(ea,ea,{domain:r});return t.remove(ea,{domain:r}),r})(window,T),rA=(({fetch:e})=>(t,r)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:r}).then(e=>e.text().then(t=>({statusCode:e.status,getHeader:t=>e.headers.get(t),body:t}))))({fetch:rT}),rR=(({appendNode:e=x,awaitSelector:t=W,createNode:r=M,fireImage:n=U}={})=>{let i;return o=>{let{hideReferrer:a,url:s}=o;return a?(({src:o})=>t("BODY").then(([t])=>i||e(t,i=r("IFRAME",et,er))).then(e=>n({src:o,currentDocument:e.contentWindow.document})))({src:s}):n({src:s})}})(),rN=(({window:e,createNamespacedStorage:t})=>{let r=t("validation.");return()=>{let t=eD.parse(e.location.search).adb_validation_sessionid;if(!t)return"";let n=(e=>{let t=e.persistent.getItem(tJ);return t||(t=eU(),e.persistent.setItem(tJ,t)),t})(r),i=`${t}|${n}`;return`&${eD.stringify({adobeAepValidationToken:i})}`}})({window,createNamespacedStorage:rC}),r_=(({userAgent:e})=>ef(()=>((e,t)=>{let r=Object.keys(e);for(let n=0;n<r.length;n+=1){let i=r[n];if(e[i].test(t))return i}return eg})({[ep]:/Edge\/([0-9\._]+)/,[em]:/Edg\/([0-9\.]+)/,[eu]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,Firefox:/Firefox\/([0-9\.]+)(?:\s|$)/,IE:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,Safari:/Version\/([0-9\._]+).*Safari/},e)))({userAgent:window.navigator.userAgent}),rx=({getDebugEnabled:e,console:t,getMonitors:r,context:n})=>{let i=`[${n.instanceName}]`;n.componentName&&(i+=` [${n.componentName}]`);let o=(e,t)=>{let i=r();if(i.length>0){let r={...n,...t};i.forEach(t=>{t[e]&&t[e](r)})}},a=(r,...n)=>{o("onBeforeLog",{level:r,arguments:n}),e()&&t[r](i,...n)};return{get enabled(){return r().length>0||e()},logOnInstanceCreated(e){o("onInstanceCreated",e),a("info","Instance initialized.")},logOnInstanceConfigured(e){o("onInstanceConfigured",e),a("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand(e){o("onBeforeCommand",e),a("info",`Executing ${e.commandName} command. Options:`,e.options)},logOnCommandResolved(e){o("onCommandResolved",e),a("info",`${e.commandName} command resolved. Result:`,e.result)},logOnCommandRejected(e){o("onCommandRejected",e),a("error",`${e.commandName} command was rejected. Error:`,e.error)},logOnBeforeNetworkRequest(e){o("onBeforeNetworkRequest",e),a("info",`Request ${e.requestId}: Sending request.`,e.payload)},logOnNetworkResponse(e){o("onNetworkResponse",e);let t=e.parsedBody||e.body?"response body:":"no response body.";a("info",`Request ${e.requestId}: Received response with status code ${e.statusCode} and ${t}`,e.parsedBody||e.body)},logOnNetworkError(e){o("onNetworkError",e),a("error",`Request ${e.requestId}: Network request failed.`,e.error)},logOnContentHiding(e){o("onContentHiding",{status:e.status}),a(e.logLevel,e.message)},logOnContentRendering(e){o("onContentRendering",{status:e.status,payload:e.detail}),a(e.logLevel,e.message)},info:a.bind(null,"info"),warn:a.bind(null,"warn"),error:a.bind(null,"error")}},rM=e=>{let t=window.__alloyMonitors||[];return e&&(t=t.concat(e)),t},rL="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",r$=tg().regexp().default(rL),rU=tm({clickCollectionEnabled:tl().default(!0),clickCollection:tm({internalLinkEnabled:tl().default(!0),externalLinkEnabled:tl().default(!0),downloadLinkEnabled:tl().default(!0),sessionStorageEnabled:tl().default(!1),eventGroupingEnabled:tl().default(!1),filterClickProperties:td()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:r$,onBeforeLinkClickSend:td().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),rj=(e=document)=>null!==e.getElementById("cppXYctnr"),rq=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname},rB=({properties:e,logger:t}={})=>{let r=e||{};return{get pageName(){return r.pageName},set pageName(value){r.pageName=value},get linkName(){return r.linkName},set linkName(value){r.linkName=value},get linkRegion(){return r.linkRegion},set linkRegion(value){r.linkRegion=value},get linkType(){return r.linkType},set linkType(value){r.linkType=value},get linkUrl(){return r.linkUrl},set linkUrl(value){r.linkUrl=value},get pageIDType(){return r.pageIDType},set pageIDType(value){r.pageIDType=value},get clickedElement(){return r.clickedElement},set clickedElement(value){r.clickedElement=value},get properties(){return{pageName:r.pageName,linkName:r.linkName,linkRegion:r.linkRegion,linkType:r.linkType,linkUrl:r.linkUrl,pageIDType:r.pageIDType}},isValidLink:()=>!!r.linkUrl&&!!r.linkType&&!!r.linkName&&!!r.linkRegion,isInternalLink(){return this.isValidLink()&&"other"===r.linkType},isValidActivityMapData:()=>!!r.pageName&&!!r.linkName&&!!r.linkRegion&&void 0!==r.pageIDType,get xdm(){if(r.filteredXdm)return r.filteredXdm;return(e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}))(this)},get data(){if(r.filteredData)return r.filteredData;return(e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}))(this)},applyPropertyFilter(e){e&&!1===e(r)&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),r={})},applyOptionsFilter(e){let n=this.options;if(n&&n.clickedElement&&(n.xdm||n.data)){if(e&&!1===e(n)){t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),this.options=void 0;return}this.options=n,r.filteredXdm=n.xdm,r.filteredData=n.data}},get options(){let e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),!e.xdm&&!e.data)return;return e},set options(value){r={},value&&((e,t)=>{let{xdm:r,data:n,clickedElement:i}=e;if(t.clickedElement=i,r&&r.web&&r.web.webInteraction){let{name:e,region:n,type:i,URL:o}=r.web.webInteraction;t.linkName=e,t.linkRegion=n,t.linkType=i,t.linkUrl=o}if(n&&n.__adobe&&n.__adobe.analytics){let{contextData:e}=n.__adobe.analytics;if(e&&e.a&&e.a.activitymap){let{page:r,link:n,region:i,pageIDType:o}=e.a.activitymap;t.pageName=r||t.pageName,t.linkName=n||t.linkName,t.linkRegion=i||t.linkRegion,void 0!==o&&(t.pageIDType=o)}}})(value,r)}}},rF="clickData",rV=e=>e&&e.replace(/\s+/g," ").trim(),rH=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,rz=e=>{let t=[],r=!1;return(e=>!(e&&e.nodeName&&e.nodeName.match(rH)))(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach(e=>{let n=rz(e);t=t.concat(n.supportedNodes),r=r||n.includesUnsupportedNodes})):r=!0,{supportedNodes:t,includesUnsupportedNodes:r}},rG=(e,t,r)=>{let n;return r&&r!==e.nodeName.toUpperCase()||(n=e.getAttribute(t)),n},rJ=/^(HEADER|MAIN|FOOTER|NAV)$/i,rX=e=>{let t;return"region"===e.role&&eC(e["aria-label"])&&(t=e["aria-label"]),t},rQ=e=>{let t;return e&&e.nodeName&&e.nodeName.match(rJ)&&(t=e.nodeName),t},rY=e=>!!(e.href&&("A"===e.tagName||"AREA"===e.tagName)&&(!e.onclick||!e.protocol||0>e.protocol.toLowerCase().indexOf("javascript"))),rW=e=>!!e&&!!e.onclick,rK=e=>{if("INPUT"===e.tagName){let t=e.getAttribute("type");if("submit"===t||"image"===t&&e.src)return!0}return!1},rZ=e=>"BUTTON"===e.tagName&&"submit"===e.type,r0=e=>{let t=e.indexOf("?"),r=e.indexOf("#");return t>=0&&(t<r||r<0)?e.substring(0,t):r>=0?e.substring(0,r):e},r1=(({window:e,getLinkName:t,getLinkRegion:r,getAbsoluteUrlFromAnchorElement:n,findClickableElement:i,determineLinkType:o})=>({clickedElement:a,config:s,logger:l,clickActivityStorage:d})=>{let{onBeforeLinkClickSend:c,clickCollection:u}=s,{filterClickDetails:p}=u,m=rB({logger:l});if(a){let l=i(a);if(l){m.clickedElement=a,m.linkUrl=n(e,l),m.linkType=o(e,s,m.linkUrl,l),m.linkRegion=r(l),m.linkName=t(l),m.pageIDType=0,m.pageName=e.location.href;let i=d.load();i&&i.pageName&&(m.pageName=i.pageName,m.pageIDType=1),p?m.applyPropertyFilter(p):c&&m.applyOptionsFilter(c)}}return m})({window,getLinkName:e=>{let t=rV(e.innerText||e.textContent),r=rz(e);if(!t||r.includesUnsupportedNodes){let e=(e=>{let t={texts:[]};return e.supportedNodes.forEach(e=>{e.getAttribute&&(t.alt||(t.alt=rV(e.getAttribute("alt"))),t.title||(t.title=rV(e.getAttribute("title"))),t.inputValue||(t.inputValue=rV(rG(e,"value","INPUT"))),t.imgSrc||(t.imgSrc=rV(rG(e,"src","IMG")))),e.nodeValue&&t.texts.push(e.nodeValue)}),t})(r);(t=rV(e.texts.join("")))||(t=e.alt||e.title||e.inputValue||e.imgSrc)}return t||""},getLinkRegion:e=>{let t,r=e.parentNode;for(;r;){if(t=rV(r.id||rX(r)||rQ(r)))return t;r=r.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:(e,t)=>{let r=e.location.href,n=t.href||"";"string"!=typeof n&&(n="");try{return new URL(n,r).href}catch{return r}},findClickableElement:e=>{let t=e;for(;t&&(!t.nodeName||"BODY"!==t.nodeName);){if(rY(t)||rW(t)||rK(t)||rZ(t))return t;t=t.parentNode}return null},determineLinkType:(e,t,r,n)=>{let i="other";return eC(r)&&(((e,t,r)=>{let n=!1;if(t){if(r&&r.download)n=!0;else if(e){let r=new RegExp(e),i=r0(t).toLowerCase();n=r.test(i)}}return n})(t.downloadLinkQualifier,r,n)?i="download":((e,t)=>{let r=!1;if(t&&e.location.hostname){let n=e.location.hostname.toLowerCase();r=0>r0(t).toLowerCase().indexOf(n)}return r})(e,r)&&(i="exit")),i}}),r2=e=>{if(!r){let t=eb(window)(e.orgId||""),n=(()=>{let e={};return{getItem:t=>e[t],setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}})();r=(({storage:e})=>({save:t=>{let r=JSON.stringify(t);e.setItem(rF,r)},load:()=>{let t=null,r=e.getItem(rF);return r&&(t=JSON.parse(r)),t},remove:()=>{e.removeItem(rF)}}))({storage:e.clickCollection.sessionStorageEnabled?t.session:n})}},r3=({config:e,eventManager:t,handleError:n,logger:i})=>{((e,t)=>{let{clickCollectionEnabled:r,onBeforeLinkClickSend:n,downloadLinkQualifier:i}=e;!1===r&&(n&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),i&&i!==rL&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))})(e,i);let o=e.clickCollection;r||r2(e);let a=(({config:e,logger:t,getClickedElementProperties:r,clickActivityStorage:n})=>{let{clickCollectionEnabled:i,clickCollection:o}=e;return i?({event:i,clickedElement:a})=>{var s,l;let d=r({clickActivityStorage:n,clickedElement:a,config:e,logger:t}),c=d.linkType;!rj()&&(d.isValidLink()&&((e,t)=>t&&("download"===t&&!e.downloadLinkEnabled||"exit"===t&&!e.externalLinkEnabled||"other"===t&&!e.internalLinkEnabled))(o,c)?t.info(`Cancelling link click event due to clickCollection.${c}LinkEnabled = false.`):d.isInternalLink()&&o.eventGroupingEnabled&&(!e.onBeforeLinkClickSend||o.filterClickDetails)&&(s=window.location.hostname,l=d.linkUrl,rq(s)===rq(l))?n.save(d.properties):d.isValidLink()?(i.mergeXdm(d.xdm),i.mergeData(d.data),n.save({pageName:d.pageName,pageIDType:d.pageIDType})):d.isValidActivityMapData()&&n.save(d.properties))}:()=>void 0})({config:e,logger:i,clickActivityStorage:r,getClickedElementProperties:r1}),s=(({clickActivityStorage:e})=>t=>{if(rj())return;let r=rB({properties:e.load()});if(r.isValidLink()||r.isValidActivityMapData()){if(r.isValidLink()){let e=r.xdm;delete e.eventType,t.mergeXdm(e)}r.isValidActivityMapData()&&t.mergeData(r.data),e.save({pageName:r.pageName,pageIDType:r.pageIDType})}})({clickActivityStorage:r}),l=(({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})})({clickActivityStorage:r});return{lifecycle:{onComponentsRegistered(e){let{lifecycle:r}=e;(({eventManager:e,lifecycle:t,handleError:r})=>{let n=(({eventManager:e,lifecycle:t,handleError:r})=>n=>{if(n.s_fe)return Promise.resolve();let i="composedPath"in n&&n.composedPath().length>0?n.composedPath()[0]:n.target,o=e.createEvent();return o.documentMayUnload(),t.onClick({event:o,clickedElement:i}).then(()=>o.isEmpty()?Promise.resolve():e.sendEvent(o)).then(ek).catch(e=>{r(e,"click collection")})})({eventManager:e,lifecycle:t,handleError:r});document.addEventListener("click",n,!0)})({eventManager:t,lifecycle:r,handleError:n})},onClick({event:e,clickedElement:t}){a({event:e,clickedElement:t})},onBeforeEvent({event:e}){(e=>{let t=e.getContent();return void 0!==t.xdm&&void 0!==t.xdm.web&&void 0!==t.xdm.web.webPageDetails&&void 0!==t.xdm.web.webPageDetails.name})(e)&&(o.eventGroupingEnabled&&s(e),l(e,i,r))}}}};r3.namespace="ActivityCollector",r3.configValidators=rU,r3.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(r||r2(e),{getLinkDetails:n=>r1({clickActivityStorage:r,clickedElement:n,config:e,logger:t}).properties});let r5=r3,r6=({logger:e,fireReferrerHideableImage:t})=>{let r=R({logger:e,cookieJar:T.withConverter({write:e=>encodeURIComponent(e)})});return{lifecycle:{onResponse:(({processDestinations:e})=>({response:t})=>(({response:t})=>e(t.getPayloadsByType("activation:push")))({response:t}).then(()=>(({response:e})=>({destinations:e.getPayloadsByType("activation:pull")}))({response:t})))({processDestinations:(({fireReferrerHideableImage:e,logger:t,cookieJar:r,isPageSsl:n})=>{let i=n?{sameSite:"none",secure:!0}:{};return n=>(n.filter(e=>"cookie"===e.type).forEach(e=>{let{name:t,value:n,domain:o,ttlDays:a}=e.spec;r.set(t,n||"",{domain:o||"",expires:a||10,...i})}),Promise.all(n.filter(e=>"url"===e.type).map(r=>e(r.spec).then(()=>{t.info(`URL destination succeeded: ${r.spec.url}`)}).catch(()=>{}))).then(ek))})({fireReferrerHideableImage:t,logger:e,cookieJar:r,isPageSsl:"https:"===window.location.protocol})})},commands:{}}};r6.namespace="Audiences";let r4=r6,r9=({standard:e,version:t})=>`${e}.${t}`,r7=()=>{let e={};return{...tV({content:e,addIdentity:(t,r)=>{e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(r)},hasIdentity:t=>(e.identityMap&&e.identityMap[t])!==void 0}),setConsent:t=>{e.consent=t}}},r8=({payload:e,datastreamIdOverride:t})=>tB({payload:e,datastreamIdOverride:t,getAction:()=>"privacy/set-consent",getUseSendBeacon:()=>!1}),ne=e=>e.split(";").reduce((e,t)=>{let[r,n]=t.split("=");return e[r]=n,e},{}),nt=tm({consent:ts(ta()).required().nonEmpty(),identityMap:th,edgeConfigOverrides:ty}).noUnknownFields().required(),nr=tm({defaultConsent:tf("in","out",tS).default("in")}),nn=({config:e,consent:t,sendEdgeNetworkRequest:r,createNamespacedStorage:n})=>{let{orgId:i,defaultConsent:o}=e,a=(({parseConsentCookie:e,orgId:t,cookieJar:r})=>{let n=ed(t,"consent");return{read(){let t=r.get(n);return t?e(t):{}},clear(){r.remove(n)}}})({parseConsentCookie:ne,orgId:i,cookieJar:T}),s=(()=>{let e=0,t=Promise.resolve();return{addTask(r){e+=1;let n=()=>r().finally(()=>{e-=1});return t=t.then(n,n)},get length(){return e}}})(),l=(({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:r,edgeConfigOverrides:n})=>({consentOptions:i,identityMap:o,edgeConfigOverrides:a})=>{let s=tG({payload:e(),globalConfigOverrides:n,localConfigOverrides:a});return s.payload.setConsent(i),E(o)&&Object.keys(o).forEach(e=>{o[e].forEach(t=>{s.payload.addIdentity(e,t)})}),r({request:t(s)}).then(()=>{})})({createConsentRequestPayload:r7,createConsentRequest:r8,sendEdgeNetworkRequest:r,edgeConfigOverrides:e.edgeConfigOverrides});return(({storedConsent:e,taskQueue:t,defaultConsent:r,consent:n,sendSetConsentRequest:i,validateSetConsentOptions:o,consentHashStore:a,doesIdentityCookieExist:s})=>{let l=e.read(),d=s(),c=void 0!==l[tD];d&&c||a.clear(),d||(e.clear(),l={}),n.initializeConsent({[tD]:r},l);let u=()=>{if(0===t.length){let t=e.read();void 0!==t[tD]&&n.setConsent(t)}};return{commands:{setConsent:{optionsValidator:o,run:({consent:e,identityMap:r,edgeConfigOverrides:o})=>{n.suspend();let s=a.lookup(e);return t.addTask(()=>s.isNew()?i({consentOptions:e,identityMap:r,edgeConfigOverrides:o}):Promise.resolve()).then(()=>s.save()).finally(u)}}},lifecycle:{onResponse:u,onRequestFailure:u}}})({storedConsent:a,taskQueue:s,defaultConsent:o,consent:t,sendSetConsentRequest:l,validateSetConsentOptions:nt,consentHashStore:(({storage:e})=>({clear(){e.clear()},lookup(t){let r={},n=e=>{let t=r9(e),{standard:n,version:i,...o}=e;return r[t]||(r[t]=en(JSON.stringify(eO(o))).toString()),r[t]};return{isNew:()=>t.some(t=>{let r=r9(t),i=e.getItem(r);return null===i||i!==n(t)}),save(){t.forEach(t=>{let r=r9(t);e.setItem(r,n(t))})}}}}))({storage:n(`${el(i)}.consentHashes.`).persistent}),doesIdentityCookieExist:ev({orgId:i})})};nn.namespace="Consent",nn.configValidators=nr;let ni=nn,no=()=>({eventMergeId:eU()}),na=()=>(({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}}))({createEventMergeId:no});na.namespace="EventMerge";let ns=na,nl={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},nd=({config:e,eventManager:t,consent:r,sendEdgeNetworkRequest:n,setTimestamp:i})=>({createMediaEvent({options:r}){let n=t.createEvent(),{xdm:o}=r;if(i(o),n.setUserXdm(o),o.eventType===nl.AD_START){let{advertisingDetails:t}=r.xdm.mediaCollection;n.mergeXdm({mediaCollection:{advertisingDetails:{playerName:t.playerName||e.streamingMedia.playerName}}})}return n},createMediaSession(r){let{playerName:n,channel:i,appVersion:o}=e.streamingMedia,a=t.createEvent(),{sessionDetails:s}=r.xdm.mediaCollection;return a.setUserXdm(r.xdm),a.mergeXdm({eventType:nl.SESSION_START,mediaCollection:{sessionDetails:{playerName:s.playerName||n,channel:s.channel||i,appVersion:s.appVersion||o}}}),a},augmentMediaEvent({event:e,playerId:t,getPlayerDetails:r,sessionID:n}){if(!t||!r)return e;let{playhead:i,qoeDataDetails:o}=r({playerId:t});return e.mergeXdm({mediaCollection:{playhead:e_(i),qoeDataDetails:o,sessionID:n}}),e},trackMediaSession:({event:e,mediaOptions:r,edgeConfigOverrides:n})=>t.sendEvent(e,{mediaOptions:r,edgeConfigOverrides:n}),trackMediaEvent({event:e,action:t}){let i=tz(),o=(({mediaRequestPayload:e,action:t})=>tB({payload:e,edgeSubPath:"/va",getAction:()=>t,getUseSendBeacon:()=>!1}))({mediaRequestPayload:i,action:t});return i.addEvent(e),e.finalize(),r.awaitConsent().then(()=>n({request:o}).then(()=>({})))}}),nc={MAIN:"main",COMPLETED:"completed"},nu=()=>{let e;return{getSession:t=>e[t]||{},storeSession:({playerId:t,sessionDetails:r})=>{void 0===e&&(e={}),e[t]=r},stopPing:({playerId:t})=>{let r=e[t];r&&(clearTimeout(r.pingId),r.pingId=null,r.playbackState=nc.COMPLETED)},savePing:({playerId:t,pingId:r,playbackState:n})=>{e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=r,e[t].playbackState=n)}}},np=({mediaEventManager:e,mediaSessionCacheManager:t,config:r})=>{let n=i=>{let o=e.createMediaEvent({options:i}),{playerId:a,xdm:s}=i,{eventType:l}=s,d=l.split(".")[1],{getPlayerDetails:c,sessionPromise:u,playbackState:p}=t.getSession(a);return u.then(i=>i.sessionId?(e.augmentMediaEvent({event:o,eventType:l,playerId:a,getPlayerDetails:c,sessionID:i.sessionId}),e.trackMediaEvent({event:o,action:d}).then(()=>{if(a)if(l===nl.SESSION_COMPLETE||l===nl.SESSION_END)t.stopPing({playerId:a});else{let e=((e,t)=>e===nl.AD_START||e===nl.Ad_BREAK_START||e===nl.AD_SKIP||e===nl.AD_COMPLETE?"ad":e===nl.AD_BREAK_COMPLETE||e===nl.CHAPTER_COMPLETE||e===nl.CHAPTER_START||e===nl.CHAPTER_SKIP||e===nl.SESSION_START?"main":e===nl.SESSION_END||e===nl.SESSION_COMPLETE?"completed":t)(l,p);if("completed"===e)return;let i=setTimeout(()=>{n({playerId:a,xdm:{eventType:nl.PING}})},1e3*("ad"===e?r.streamingMedia.adPingInterval:r.streamingMedia.mainPingInterval));t.savePing({playerId:a,pingId:i,playbackState:e})}})):Promise.reject(Error(`Failed to trigger media event: ${l}. Session ID is not available for playerId: ${a}.`)))};return e=>n(e)},nm=({config:e,mediaEventManager:t,mediaSessionCacheManager:r,legacy:n=!1})=>i=>{if(!e.streamingMedia)return Promise.reject(Error("Streaming media is not configured."));let{playerId:o,getPlayerDetails:a,edgeConfigOverrides:s}=i,l=t.createMediaSession(i);t.augmentMediaEvent({event:l,playerId:o,getPlayerDetails:a});let d=t.trackMediaSession({event:l,mediaOptions:{playerId:o,getPlayerDetails:a,legacy:n},edgeConfigOverrides:s});return r.storeSession({playerId:o,sessionDetails:{sessionPromise:d,getPlayerDetails:a,playbackState:nc.MAIN}}),d},ng=e=>"string"!=typeof e||!e.trim(),nf=({mediaSessionCacheManager:e,config:t,trackMediaEvent:r})=>({response:n,playerId:i,getPlayerDetails:o})=>{let a=n.getPayloadsByType("media-analytics:new-session");if(j(a)){let{sessionId:n}=a[0];if(ng(n))return{};if(!i||!o)return{sessionId:n};let s=setTimeout(()=>{r({playerId:i,xdm:{eventType:nl.PING}})},1e3*t.streamingMedia.mainPingInterval);return e.savePing({playerId:i,pingId:s,playbackState:nc.MAIN}),{sessionId:n}}return{}},nh={Video:"video",Audio:"audio"},ny={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},nv={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},nw={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},nb={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},nE={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},nI={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},nS={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},nC={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"},nk=({logger:e})=>({createMediaObject:(t,r,n,i,o)=>{let a=tm({friendlyName:tg().nonEmpty(),name:tg().nonEmpty(),length:tu().required(),streamType:tg().nonEmpty(),contentType:tg().nonEmpty()});try{let e=a({friendlyName:t,name:r,length:n,streamType:o,contentType:i});return{sessionDetails:{name:e.name,friendlyName:e.friendlyName,length:Math.round(e.length),streamType:e.streamType,contentType:e.contentType}}}catch(t){return e.warn("An error occurred while creating the Media Object.",t),{}}},createAdBreakObject:(t,r,n)=>{let i=tm({friendlyName:tg().nonEmpty(),offset:tu(),index:tu()});try{let e=i({friendlyName:t,offset:r,index:n});return{advertisingPodDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index}}}catch(t){return e.warn("An error occurred while creating the Ad Break Object.",t),{}}},createAdObject:(t,r,n,i)=>{let o=tm({friendlyName:tg().nonEmpty(),name:tg().nonEmpty(),podPosition:tu(),length:tu()});try{let e=o({friendlyName:t,name:r,podPosition:n,length:i});return{advertisingDetails:{friendlyName:e.friendlyName,name:e.name,podPosition:e.podPosition,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Advertising Object.",t),{}}},createChapterObject:(t,r,n,i)=>{let o=tm({friendlyName:tg().nonEmpty(),offset:tu(),length:tu(),index:tu()});try{let e=o({friendlyName:t,offset:r,length:n,index:i});return{chapterDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Chapter Object.",t),{}}},createStateObject:t=>{let r=tg().matches(/^[a-zA-Z0-9_]{1,64}$/,"This is not a valid state name.");try{return{name:r(t)}}catch(t){return e.warn("An error occurred while creating the State Object.",t),{}}},createQoEObject:(t,r,n,i)=>{let o=tm({bitrate:tu(),droppedFrames:tu(),fps:tu(),startupTime:tu()});try{let e=o({bitrate:t,droppedFrames:r,fps:n,startupTime:i});return{bitrate:e.bitrate,droppedFrames:e.droppedFrames,framesPerSecond:e.fps,timeToStart:e.startupTime}}catch(t){return e.warn("An error occurred while creating the QOE Object.",t),{}}}}),nT={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},nD={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"},nP=({logger:e,trackMediaSession:t,trackMediaEvent:r,uuid:n})=>{let i=null,o=({eventType:e,mediaDetails:t={},contextData:r=[]})=>{let n=(({eventType:e})=>e===nw.BufferComplete||e===nw.SeekComplete?nb.Play:e===nw.StateStart||e===nw.StateEnd?nb.StateUpdate:e===nw.SeekStart?nb.Pause:e)({eventType:e});if(e===nw.StateStart)return{eventType:`media.${n}`,mediaCollection:{statesStart:[t]}};if(e===nw.StateEnd)return{eventType:`media.${n}`,mediaCollection:{statesEnd:[t]}};let i={eventType:`media.${n}`,mediaCollection:{...t}},o=[];return Object.keys(r).forEach(e=>{nT[e]?i.mediaCollection.sessionDetails[nT[e]]=r[e]:nD[e]?i.mediaCollection.advertisingDetails[nD[e]]=r[e]:o.push({name:e,value:r[e]})}),j(o)&&(i.mediaCollection.customMetadata=o),i};return{trackSessionStart:(r,a={})=>{if(null==r||eE(r))return e.warn("Invalid media object"),{};null===i&&(e.warn("The Media Session was completed. Restarting a new session."),i={qoe:null,lastPlayhead:0,playerId:n()});let s=o({eventType:nb.SessionStart,mediaDetails:r,contextData:a});return t({playerId:i.playerId,getPlayerDetails:()=>({playhead:i.lastPlayhead,qoeDataDetails:i.qoe}),xdm:s})},trackPlay:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=o({eventType:nb.Play});return r({playerId:i.playerId,xdm:t})},trackPause:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=o({eventType:nb.Pause});return r({playerId:i.playerId,xdm:t})},trackSessionEnd:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=o({eventType:nb.SessionEnd});return r({playerId:i.playerId,xdm:t})},trackComplete:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=o({eventType:nb.SessionComplete});return r({playerId:i.playerId,xdm:t})},trackError:t=>{if(e.warn(`trackError(${t})`),null===i)return e.warn("The Media Session was completed."),{};let n=o({eventType:nb.Error,mediaDetails:{errorDetails:{name:t,source:"player"}}});return r({playerId:i.playerId,xdm:n})},trackEvent:(t,n,a)=>{if(eE(n))return e.warn("Invalid media object."),{};if(null===i)return e.warn("The Media Session was completed."),{};if(!Object.values(nw).includes(t))return e.warn("Invalid event type"),{};let s=o({eventType:t,mediaDetails:n,contextData:a});return r({playerId:i.playerId,xdm:s})},updatePlayhead:t=>{if(null===i)return void e.warn("The Media Session was completed.");eI(t)&&(i.lastPlayhead=parseInt(t,10))},updateQoEObject:t=>{if(null===i)return void e.warn("The Media Session was completed.");t&&(i.qoe=t)},destroy:()=>{e.warn("Destroy called, destroying the tracker."),i=null}}},nO=({eventManager:e,sendEdgeNetworkRequest:t,config:r,logger:n,consent:i})=>{let o=nu({config:r}),a=nd({sendEdgeNetworkRequest:t,config:r,consent:i,eventManager:e,setTimestamp:t1(()=>new Date)}),s=np({mediaSessionCacheManager:o,mediaEventManager:a,config:r}),l=nm({config:r,mediaEventManager:a,mediaSessionCacheManager:o,legacy:!0});return(({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:r,logger:n,createMediaHelper:i,createGetInstance:o,config:a})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=ek}){if(!e)return;let{legacy:n,playerId:i,getPlayerDetails:o}=e;n&&t(({response:e})=>r({playerId:i,getPlayerDetails:o,response:e}))}},commands:{getMediaAnalyticsTracker:{run:()=>a.streamingMedia?(n.info("Streaming media is configured in legacy mode."),Promise.resolve({getInstance:()=>o({logger:n,trackMediaEvent:e,trackMediaSession:t,uuid:eU}),Event:nw,MediaType:nh,PlayerState:nv,StreamType:ny,MediaObjectKey:nE,VideoMetadataKeys:nI,AudioMetadataKeys:nS,AdMetadataKeys:nC,...i({logger:n})})):Promise.reject(Error("Streaming media is not configured."))}}}))({mediaResponseHandler:nf({mediaSessionCacheManager:o,config:r,trackMediaEvent:s}),trackMediaSession:l,trackMediaEvent:s,createMediaHelper:nk,createGetInstance:nP,logger:n,config:r})};nO.namespace="Legacy Media Analytics";let nA=nO,nR=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,nN=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,n_=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,nx=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,nM=(e="/")=>{let t=e.length;for(;t>0&&-1!=="/".indexOf(e.charAt(t-1));)t-=1;return e.substring(0,t)||"/"},nL=e=>`${e.surfaceType}://${e.authority}${e.path||""}${e.fragment||""}`,n$=e=>{let t=e();return"web://"+t.host.toLowerCase()+nM(t.pathname)},nU=e=>!!e&&0===e.indexOf("web://")&&-1===e.indexOf("#"),nj="https://ns.adobe.com/personalization/default-content-item",nq="https://ns.adobe.com/personalization/dom-action",nB="https://ns.adobe.com/personalization/html-content-item",nF="https://ns.adobe.com/personalization/json-content-item",nV="https://ns.adobe.com/personalization/ruleset-item",nH="https://ns.adobe.com/personalization/redirect-item",nz="https://ns.adobe.com/personalization/message/in-app",nG=e=>e.filter((t,r)=>e.indexOf(t)===r),nJ="decisioning.propositionDisplay",nX="decisioning.propositionInteract",nQ="decisioning.propositionTrigger",nY="decisioning.propositionDismiss",nW="decisioning.propositionSuppressDisplay",nK={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},nZ={[nJ]:nK.DISPLAY,[nX]:nK.INTERACT,[nQ]:nK.TRIGGER,[nY]:nK.DISMISS,[nW]:nK.SUPPRESS},n0={[nK.DISPLAY]:nJ,[nK.INTERACT]:nX,[nK.TRIGGER]:nQ,[nK.DISMISS]:nY,[nK.SUPPRESS]:nW},n1=e=>nZ[e],n2={propositions:[]},n3=(e="undefined")=>M("DIV",{},{innerHTML:e}),n5=/:eq\((\d+)\)/g,n6=e=>-1===e.indexOf(":eq("),n4=/(#|\.)(-?\w+)/g,n9=(e,t,r)=>`${t}${CSS.escape(r)}`,n7=e=>{let t=document;if(n6(e))return z(e,t);let r=(e=>{let t=[],r=e.trim().replace(n4,n9).split(n5).filter(eC),{length:n}=r,i=0;for(;i<n;){let e=r[i],n=r[i+1];n?t.push({sel:e,eq:Number(n)}):t.push({sel:e}),i+=2}return t})(e),{length:n}=r,i=[],o=t,a=0;for(;a<n;){let{sel:e,eq:t}=r[a],s=z(e,o),{length:l}=s;if(0===l||null!=t&&t>l-1)break;a<n-1&&(null==t?[o]=s:o=s[t]),a===n-1&&(i=null==t?s:[s[t]]),a+=1}return i},n8=(e,t=document)=>t.getElementById(e),ie=(e,t,r)=>{e.setAttribute(t,r)},it=(e,t)=>e.getAttribute(t),ir=(e,t,r,n)=>{let i;i=n?`${t}:${r} !${n};`:`${t}:${r};`,e.style.cssText+=`;${i}`},ii=(e,t)=>{if(!e)return;let r=e.parentNode;r&&r.insertBefore(t,e.nextElementSibling)},io=(e,t)=>{if(!e)return;let r=e.parentNode;r&&r.insertBefore(t,e)},ia=e=>{let{childNodes:t}=e;return t?q(t):[]},is=e=>e.firstElementChild,il=(e=document)=>{if(void 0===n){let t=e.querySelector("[nonce]");n=t&&(t.nonce||t.getAttribute("nonce"))}return n},id=e=>M("IMG",{src:e}),ic=e=>{z("IMG",e).forEach(e=>{let t=it(e,"src");t&&id(t)})},iu=e=>e.tagName===L&&!it(e,"src"),ip=e=>{let t=z(L,e),{length:r}=t,n=il();if(n)for(let e=0;e<r;e+=1){let r=t[e];iu(r)&&(r.nonce=n)}},im=e=>{let t=document.createElement("script");t.src=e,t.async=!0;let r=((e,t)=>new Promise((r,n)=>{t.onload=()=>{r(t)},t.onerror=()=>{n(Error(`Failed to load script: ${e}`))}}))(e,t);return document.head.appendChild(t),r},ig=(e,t)=>!!e&&e.tagName===t,ih=e=>ig(e,$)&&!it(e,"src"),iy=e=>ig(e,$)&&it(e,"src"),iv=e=>{let t=z($,e),r=[],{length:n}=t,i=il(),o={...i&&{nonce:i}};for(let e=0;e<n;e+=1){let n=t[e];if(!ih(n))continue;let{textContent:i}=n;i&&r.push(M($,o,{textContent:i}))}return r},iw=e=>{let t=z($,e),r=[],{length:n}=t;for(let e=0;e<n;e+=1){let n=t[e];if(!iy(n))continue;let i=it(n,"src");i&&r.push(i)}return r},ib=(e,t)=>{t.forEach(t=>{e.appendChild(t),e.removeChild(t)})},iE=e=>Promise.all(e.map(im)),iI=(e,t,r)=>{let n=n3(t);ip(n);let i=ia(n),o=iv(n),a=iw(n);return ic(n),i.forEach(t=>{x(e,t)}),r(e),ib(e,o),iE(a)},iS=(e,t,r)=>(ia(e).forEach(ee),iI(e,t,r)),iC=(e,t,r)=>{let n=n3(t);ip(n);let i=ia(n),o=iv(n),a=iw(n),{length:s}=i,l=s-1;for(ic(n);l>=0;){let t=i[l];r(t);let n=is(e);n?io(n,t):x(e,t),l-=1}return ib(e,o),iE(a)},ik="alloy-prehiding",iT={},iD=e=>{if(iT[e])return;let t=il(),r=M(L,{...t&&{nonce:t}},{textContent:`${e} { visibility: hidden }`});x(document.head,r),iT[e]=r},iP=e=>{let t=iT[e];t&&(ee(t),delete iT[e])},iO=(e,t,r)=>{let n=n3(t);ip(n);let i=ia(n),o=iv(n),a=iw(n);return ic(n),i.forEach(t=>{r(t),io(e,t)}),ib(e,o),iE(a)},iA=(e,t,r)=>iO(e,t,r).then(()=>{ee(e)}),iR=(e,t,r)=>{let n=n3(t);ip(n);let i=ia(n),o=iv(n),a=iw(n);ic(n);let s=e;return i.forEach(e=>{r(e),ii(s,e),s=e}),ib(e,o),iE(a)},iN=(e,t,r)=>{let{priority:n,...i}=t;Object.keys(i).forEach(t=>{ir(e,t,i[t],n)}),r(e)},i_=(e,t,r)=>{Object.keys(t).forEach(r=>{ie(e,r,t[r])}),r(e)},ix=(e,t,r)=>{"IMG"===e.tagName&&(id(t),r(e),e.removeAttribute("src"),ie(e,"src",t))},iM=(e,{from:t,to:r},n)=>{let i=(e=>{let{children:t}=e;return t?q(t):[]})(e),o=i[t],a=i[r];o&&a&&(t<r?ii(a,o):io(a,o),n(a),n(o))},iL=(e,t=!1)=>async(r,n,i)=>{let{selector:o,prehidingSelector:a,content:s}=r;iD(a);try{let r=await W(o,n7);(({containers:e,content:t,decorateProposition:r,renderFunc:n,renderStatusHandler:i,alwaysRender:o})=>Promise.all(e.filter(e=>o||i.shouldRender(e)).map(async e=>{await n(e,t,r),i.markAsRendered(e)})))({containers:r,content:s,decorateProposition:n,renderFunc:e,renderStatusHandler:i,alwaysRender:t})}finally{iP(a)}},i$=(e,t,r)=>{r(e),e.textContent=t},iU=e=>`${e}`.endsWith("px")?e:`${e}px`,ij=(e,t,r)=>{let{priority:n,...i}=t;Object.keys(i).forEach(t=>{let r=i[t];("left"===t||"top"===t)&&(r=iU(r)),ir(e,t,r,n)}),r(e)},iq=(e,t,r)=>{r(e)},iB=(e,t,r)=>{let{priority:n,...i}=t;Object.keys(i).forEach(t=>{let r=i[t];("width"===t||"height"===t)&&(r=iU(r)),ir(e,t,r,n)}),r(e)},iF="customCode",iV="appendHtml",iH="click",iz="collectInteractions",iG=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:r=[],propositionAction:n,documentMayUnload:i=!1,eventType:o=nJ,propositionEventTypes:a=[n1(o)],viewName:s})=>{let l=e.createEvent(),d={eventType:o};return s&&(d.web={webPageDetails:{viewName:s}}),j(r)&&t(l,r,a,n),l.mergeXdm(d),i&&l.documentMayUnload(),e.sendEvent(l)},iJ=(e,t)=>{if(n6(e))return((e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e))(e,t);let r=n7(e),n=!1;for(let e=0;e<r.length;e+=1)if(r[e]===t){n=!0;break}return n},iX="view",iQ=e=>e.map(e=>{let{trackingLabel:t,scopeType:r,...n}=e;return n}),iY=(e,t,r)=>{let{documentElement:n}=document,i=e,o=0;for(;i&&i!==n;){if(iJ(t,i)){let e=r(t),n={metas:e},i=e.find(e=>e.trackingLabel);i&&(n.label=i.trackingLabel,n.weight=o);let a=e.find(e=>e.scopeType===iX);return a&&(n.viewName=a.scope,n.weight=o),n}i=i.parentNode,o+=1}return{metas:null}},iW=(e,t,r)=>{let n,i=[],o="",a=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(let l=0;l<t.length;l+=1){let{metas:d,label:c,weight:u,viewName:p}=iY(e,t[l],r);d&&(c&&u<=a&&(o=c,a=u),p&&u<=s&&(n=p,s=u),i.push(...iQ(d)))}return{decisionsMeta:(e=>e.filter((t,r)=>{let n=JSON.stringify(t);return r===e.findIndex(e=>JSON.stringify(e)===n)}))(i),propositionActionLabel:o,propositionActionToken:void 0,viewName:n}},iK=(e=document)=>-1!==e.location.href.indexOf("adobe_authoring_enabled"),iZ=(e,t,r,n)=>{if(0===t.length)return;let i={};r.forEach(e=>{i[e]=1});let o={_experience:{decisioning:{propositions:t,propositionEventType:i}}};n&&(o._experience.decisioning.propositionAction=n),e.mergeXdm(o)},i0=(e,t)=>{e.mergeQuery({personalization:{...t}})},i1=(e,t)=>e===nF&&t===iz,i2={[nq]:()=>!0,[nB]:()=>!0,[nF]:i1,[nz]:()=>!0,[nj]:()=>!0},i3=e=>{let{selector:t,type:r}=e;return r!==iF||"BODY > *:eq(0)"!==t?e:{...e,selector:"BODY"}},i5=e=>{let t={...e},{content:r,selector:n}=t;return ng(r)||null==n||!ig(n7(n)[0],"HEAD")?t:(t.type=iV,t.content=z("SCRIPT,LINK,STYLE",n3(r)).map(e=>e.outerHTML).join(""),t)},i6=()=>({render:ek,setRenderAttempted:!0,includeInNotification:!0}),i4="always",i9="never",i7="decoratedElementsOnly",i8=[i4,i9,i7],oe="data-aep-interact-id",ot="data-aep-click-label",or=0,on=(e,t,r,n,i,o,a,s)=>{let{scopeDetails:l={}}=a,{decisionProvider:d}=l;return((e,t)=>!!e&&!!e[t]&&[i4,i7].includes(e[t]))(e,d)||t===iH?e=>{if(!e.tagName)return;let t=((e,t)=>t?parseInt(t,10):++or)(0,it(e,oe));s(r,n,o,a,t),ie(e,oe,t),i&&!it(e,ot)&&ie(e,ot,i)}:ek},oi=(e,t)=>e!==iX?{shouldRender:()=>!0,markAsRendered:()=>{}}:{shouldRender:e=>!e||!(e.dataset.adobePropositionIds??"").split(",").includes(t),markAsRendered:e=>{let r=(e.dataset.adobePropositionIds??"").split(",");r.includes(t)||r.push(t),e.dataset.adobePropositionIds=r.sort().join(",")}},oo="BODY",oa="text/html",os=["content","contentType"],ol=["mobileParameters","webParameters","html"],od=e=>{let t=z(`#${e}`,document);t&&t.length>0&&ee(t[0])},oc=e=>(t,r=!1)=>(r?e.location.href=t:e.location.replace(t),new Promise(()=>{})),ou="alloy-messaging-container",op="alloy-overlay-container",om="alloy-content-iframe",og=()=>[ou,op].forEach(od),of=["enabled","parentElement","insertionMethod"],oh=(e,t,r)=>{let{interactIds:n,clickLabel:i="",clickToken:o}=(e=>{let t,r,{documentElement:n}=document,i=e,o=new Set;for(;i&&i!==n&&!(i instanceof ShadowRoot);){let e=it(i,oe);e&&o.add(e),t=t||it(i,ot),r=r||it(i,"data-aep-click-token"),i=i.parentNode}return{interactIds:[...o],clickLabel:t,clickToken:r}})(e),a=((e,t,r)=>n=>{let{scopeDetails:i={}}=n,{decisionProvider:o}=i;return e[o]===i4||e[o]===i7&&(t||r)})(r,i,o);if(0===n.length)return{};let s=t(n).filter(a);return{decisionsMeta:iQ(s),propositionActionLabel:i,propositionActionToken:o,viewName:(e=>{let t=e.find(e=>e.scopeType===iX);return t?t.scope:void 0})(s)}},oy=({config:e,logger:t,eventManager:r,consent:n})=>{let i,{targetMigrationEnabled:o,prehidingStyle:a,autoCollectPropositionInteractions:s}=e,l=iG({eventManager:r,mergeDecisionsMeta:iZ}),d=()=>{let e=n8(ik);e&&(t.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),ee(e))},c=e=>{if(!e||n8(ik))return;let r=il(),n=M(L,{id:ik,...r&&{nonce:r}},{textContent:e});t.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),x(document.head,n)},{storeInteractionMeta:u,getInteractionMetas:p}=(()=>{let e={},t={};return{storeInteractionMeta:(r,n,i,o,a)=>{e[a=parseInt(a,10)]||(e[a]={},t[a]={}),t[a][r]||(t[a][r]=new Set),t[a][r].add(n),e[a][r]={...o,scopeType:i}},getInteractionMetas:r=>Array.isArray(r)&&0!==r.length?Object.values(r.map(e=>parseInt(e,10)).reduce((r,n)=>(Object.keys(e[n]||{}).forEach(i=>{r[i]||(r[i]={proposition:e[n][i],items:new Set}),r[i].items=new Set([...r[i].items,...t[n][i]])}),r),{})).map(({proposition:e,items:t})=>({...e,items:Array.from(t).map(e=>({id:e}))})):[]}})(),{storeClickMeta:m,getClickSelectors:g,getClickMetas:f}=(()=>{let e={};return{storeClickMeta:({selector:t,meta:{id:r,scope:n,scopeDetails:i,trackingLabel:o,scopeType:a}})=>{e[t]||(e[t]={}),e[t][r]={scope:n,scopeDetails:i,trackingLabel:o,scopeType:a}},getClickSelectors:()=>Object.keys(e),getClickMetas:t=>e[t]?(e=>Object.keys(e).map(t=>({id:t,...e[t]})))(e[t]):{}}})(),h=(({window:e})=>()=>e.location)({window}),y={setHtml:iL(iS,!0),[iF]:iL(iC),setText:iL(i$,!0),setAttribute:iL(i_,!0),setImageSource:iL(ix,!0),setStyle:iL(iN,!0),move:iL(ij,!0),resize:iL(iB,!0),rearrange:iL(iM),remove:iL(ee,!0),insertAfter:iL(iR),insertBefore:iL(iO),replaceHtml:iL(iA,!0),prependHtml:iL(iC),[iV]:iL(iI),[iz]:iL(iq,!0)},v=(({preprocess:e,isPageWideSurface:t})=>(r,n=!0,i=!1)=>{let{id:o,scope:a,scopeDetails:s,items:l=[]}=r,{characteristics:{scopeType:d}={}}=s||{};return{getScope:()=>a,getScopeType:()=>a===tj||t(a)?"page":d===iX?iX:"proposition",getItems(){return l.map(t=>((t,r)=>{let{id:n,schema:i,data:o,characteristics:{trackingLabel:a}={}}=t,s=o?o.type:void 0,l=e(o);return{getId:()=>n,getSchema:()=>i,getSchemaType:()=>s,getData:()=>l,getProposition:()=>r,getTrackingLabel:()=>a,getOriginalItem:()=>t,toString:()=>JSON.stringify(t),toJSON:()=>t}})(t,this))},getNotification:()=>({id:o,scope:a,scopeDetails:s}),getId:()=>o,toJSON:()=>r,shouldSuppressDisplay:()=>i,addToReturnValues(e,t,i,o){n&&(e.push({...r,items:i.map(e=>e.getOriginalItem()),renderAttempted:o}),o||t.push({...r,items:i.map(e=>e.getOriginalItem())}))}}})({preprocess:(i=[i5,i3],e=>e?i.reduce((e,t)=>({...e,...t(e)}),e):e),isPageWideSurface:nU}),w=(({createProposition:e})=>{let t=!1,r=Promise.resolve({}),n=(t,r)=>{let n=t[r.toLowerCase()];return n&&n.length>0?n:[e({scope:r,scopeDetails:{characteristics:{scopeType:iX}},items:[{schema:nj}]},!1)]};return{createCacheUpdate:e=>{let i=N();return t=!0,r=r.then(e=>i.promise.then(t=>({...e,...t})).catch(()=>e)),{update(t){let r=ec(t.filter(e=>e.getScope()),e=>e.getScope().toLowerCase());return(i.resolve(r),e)?n(r,e):[]},cancel(){i.reject()}}},getView:e=>r.then(t=>n(t,e)),isInitialized:()=>t}})({createProposition:v}),b=oc(window),E=(({schemaProcessors:e,logger:t})=>{let r=(e,r)=>()=>Promise.resolve().then(e).then(()=>(t.enabled&&t.info(`Action ${r.toString()} executed.`),r.toJSON())).catch(e=>{let{message:n,stack:i}=e,o=`Failed to execute action ${r.toString()}. ${n} ${i}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:r.getProposition().getNotification(),item:r.toJSON()},error:e,message:o,logLevel:"warn"})}),n=async(e,t)=>{let r=(await Promise.allSettled(e.map(e=>e()))).filter(e=>"fulfilled"===e.status).map(e=>e.value);if(t&&j(r))return{...t,items:r}},i=t=>{let r=e[t.getSchema()];return r?r(t):{}},o=({renderers:e,returnedPropositions:t,returnedDecisions:o,items:a,proposition:s})=>{let l,d,c,u,p=[...e],m=[...t],g=[...o],f=[],h=[],y=[],v=!1,w=!1,b=0;for(;a.length>b;){if(u=a[b],{render:l,setRenderAttempted:d,includeInNotification:c,onlyRenderThis:w}=i(u),w){m=[],g=[],d?(f=[u],h=[]):(f=[],h=[u]),p=[],y=[l],v=c;break}l&&y.push(r(l,u)),c&&(v=!0),d?f.push(u):h.push(u),b+=1}if(y.length>0){let e=v?s.getNotification():void 0;p.push(()=>n(y,e))}else v&&p.push(()=>Promise.resolve(s.getNotification()));return f.length>0&&s.addToReturnValues(m,g,f,!0),h.length>0&&s.addToReturnValues(m,g,h,!1),{renderers:p,returnedPropositions:m,returnedDecisions:g,onlyRenderThis:w}};return(e,r=[])=>{let n,i,a,s=[],l=[],d=[],c=0;for(;e.length>c&&(a=(i=e[c]).getItems(),{renderers:s,returnedPropositions:l,returnedDecisions:d,onlyRenderThis:n}=o({renderers:s,returnedPropositions:l,returnedDecisions:d,items:a,proposition:i}),!n);)c+=1;return n&&e.forEach((e,t)=>{t!==c&&e.addToReturnValues(l,d,e.getItems(),!1)}),r.forEach(e=>{e.addToReturnValues(l,d,e.getItems(),!1)}),{returnedPropositions:l,returnedDecisions:d,render:()=>Promise.all(s.map(e=>e())).then(e=>{let r=e.filter(e=>e),n=r.map(e=>{let{id:t,scope:r,scopeDetails:n}=e;return{id:t,scope:r,scopeDetails:n}});if(j(r)){let e=ec(r,e=>e.scope);t.logOnContentRendering({status:"rendering-succeeded",detail:{...e},message:`Scopes: ${JSON.stringify(e)} successfully executed.`,logLevel:"info"})}return n})}}})({schemaProcessors:{[nj]:i6,[nq]:(({modules:e,logger:t,storeInteractionMeta:r,storeClickMeta:n,autoCollectPropositionInteractions:i})=>o=>{let{type:a,selector:s}=o.getData()||{};if(!a)return t.warn("Invalid DOM action data: missing type.",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(a===iH)return s?(n({selector:s,meta:{...o.getProposition().getNotification(),trackingLabel:o.getTrackingLabel(),scopeType:o.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",o.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[a])return t.warn("Invalid DOM action data: unknown type.",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};let l=oi(o.getProposition().getScopeType(),o.getId()),d=on(i,a,o.getProposition().getId(),o.getId(),o.getTrackingLabel(),o.getProposition().getScopeType(),o.getProposition().getNotification(),r);return{render:()=>e[a](o.getData(),d,l),setRenderAttempted:!0,includeInNotification:!0}})({modules:y,logger:t,storeInteractionMeta:u,storeClickMeta:m,autoCollectPropositionInteractions:s}),[nB]:(({modules:e,logger:t,storeInteractionMeta:r,autoCollectPropositionInteractions:n})=>i=>{let{type:o,selector:a}=i.getData()||{};if(!a||!o)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[o])return t.warn("Invalid HTML content data",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};let s=on(n,o,i.getProposition().getId(),i.getId(),i.getTrackingLabel(),i.getProposition().getScopeType(),i.getProposition().getNotification(),r),l=oi(i.getProposition().getScopeType(),i.getId());return{render:()=>e[o](i.getData(),s,l),setRenderAttempted:!0,includeInNotification:!0}})({modules:y,logger:t,storeInteractionMeta:u,autoCollectPropositionInteractions:s}),[nH]:(({logger:e,executeRedirect:t,collect:r})=>n=>{let{content:i}=n.getData()||{};return i?{render:()=>(iD(oo),r({decisionsMeta:[n.getProposition().getNotification()],documentMayUnload:!0}).then(()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:n.getProposition().getNotification(),redirect:i},message:`Redirect action ${n.toString()} executed.`,logLevel:"info"}),t(i))).catch(e=>{throw iP(oo),e})),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",n.getData()),{})})({logger:t,executeRedirect:b,collect:l}),[nz]:(({modules:e,logger:t})=>r=>{let n=r.getData(),i=r.getProposition(),o={...i.getNotification()},a=i.shouldSuppressDisplay();if(!n)return t.warn("Invalid in-app message data: undefined.",n),{};let{type:s="defaultContent"}=n;return e[s]?((e,t)=>{for(let r=0;r<os.length;r+=1){let n=os[r];if(!Object.prototype.hasOwnProperty.call(e,n))return t.warn(`Invalid in-app message data: missing property '${n}'.`,e),!1}let{content:r,contentType:n}=e;if("application/json"===n)for(let n=0;n<ol.length;n+=1){let i=ol[n];if(!Object.prototype.hasOwnProperty.call(r,i))return t.warn(`Invalid in-app message data.content: missing property '${i}'.`,e),!1}return!0})(n,t)?o?{render:()=>a?null:e[s]({...n,meta:o}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",o),{}):{}:(t.warn("Invalid in-app message data: unknown type.",n),{})})({modules:{defaultContent:e=>((e,t)=>new Promise(r=>{let{meta:n}=e;((e={},t)=>{og();let{content:r,contentType:n,mobileParameters:i}=e,{webParameters:o}=e;if(n!==oa)return;let a=M("div",{id:ou}),s=((e,t)=>{let r=new DOMParser().parseFromString(e,oa),n=r.querySelector("script");n&&n.setAttribute("nonce",il());let i=M("iframe",{src:URL.createObjectURL(new Blob([r.documentElement.outerHTML],{type:"text/html"})),id:om});return i.addEventListener("load",()=>{let{addEventListener:e}=i.contentDocument||i.contentWindow.document;e("click",t)}),i})(r,((e,t=oc(window))=>r=>{r.preventDefault(),r.stopImmediatePropagation();let{target:n}=r,i="a"===n.tagName.toLowerCase()?n:n.closest("a");if(!i)return;let{action:o,interaction:a,link:s,label:l,uuid:d}=(e=>{let t,r,n={};if(!e||"a"!==e.tagName.toLowerCase())return n;let{href:i}=e;if(!i||!i.startsWith("adbinapp://"))return n;let o=i.split("?"),a=o[0].split("://")[1],s=e.innerText,l=e.getAttribute("data-uuid")||"";if(j(o)){let e=eD.parse(o[1]);t=e.interaction||"",r=rm(e.link||"")}return{action:a,interaction:t,link:r,label:s,uuid:l}})(i);e(o,{label:l,id:a,uuid:d,link:s}),"dismiss"===o&&og(),eC(s)&&s.length>0&&t(s,!0)})(t)),l=M("div",{id:op});if((e=>{if(!e)return!1;let t=Object.keys(e);if(!t.includes(ou)||!t.includes(op))return!1;let r=Object.values(e);for(let e=0;e<r.length;e+=1){if(!tm(r[e],"style")||!tm(r[e],"params"))return!1;for(let t=0;t<of.length;t+=1)if(!tm(r[e].params,of[t]))return!1}return!0})(o)||(o=(e=>{if(!e)return;let{uiTakeover:t=!1}=e;return{[om]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[ou]:{style:(e=>{let{verticalAlign:t,width:r,horizontalAlign:n,backdropColor:i,height:o,cornerRadius:a,horizontalInset:s,verticalInset:l,uiTakeover:d=!1}=e,c={width:r?`${r}%`:"100%",backgroundColor:i||"rgba(0, 0, 0, 0.5)",borderRadius:a?`${a}px`:"0px",border:"none",position:d?"fixed":"relative",overflow:"hidden"};return"left"===n?c.left=s?`${s}%`:"0":"right"===n?c.right=s?`${s}%`:"0":"center"===n&&(c.left="50%",c.transform="translateX(-50%)"),"top"===t?c.top=l?`${l}%`:"0":"bottom"===t?(c.position="fixed",c.bottom=l?`${l}%`:"0"):"center"===t&&(c.top="50%",c.transform=`${"center"===n?`${c.transform} `:""}translateY(-50%)`,c.display="flex",c.alignItems="center",c.justifyContent="center"),o?c.height=`${o}vh`:c.height="100%",c})(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[op]:{style:(e=>{let{backdropOpacity:t,backdropColor:r}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:r||"#FFFFFF"}})(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}}}})(i)),o){var d;d=o,[{id:op,element:l},{id:ou,element:a},{id:om,element:s}].forEach(({id:e,element:t})=>{let{style:r={},params:n={}}=d[e];Object.assign(t.style,r);let{parentElement:i="body",insertionMethod:o="appendChild",enabled:a=!0}=n,s=document.querySelector(i);a&&s&&"function"==typeof s[o]&&s[o](t)})}})(e,(e,r)=>{let i={};i[nK.INTERACT]=1,-1!==Object.values(nK).indexOf(e)&&(i[e]=1),t({decisionsMeta:[n],propositionAction:r,eventType:nX,propositionEventTypes:Object.keys(i)})}),r({meta:n})}))(e,l)},logger:t})},logger:t}),I=(()=>{let e=Promise.resolve([]);return{concat(t){e=e.then(e=>t.then(t=>e.concat(t)).catch(()=>e))},clear(){let t=e;return e=Promise.resolve([]),t}}})(),S=((e,t)=>(r,n,i)=>{if(!r)return()=>void 0;if(!n){let e=N();return t.concat(e.promise),e.resolve}return(t=[],r=[])=>{j(t)&&e({decisionsMeta:t,viewName:i}),j(r)&&e({decisionsMeta:r,eventType:nW,propositionAction:{reason:"Conflict"},viewName:i})}})(l,I),C=(({logger:e,prehidingStyle:t,showContainers:r,hideContainers:n,mergeQuery:i,processPropositions:o,createProposition:a,notificationHandler:s,consent:l})=>({cacheUpdate:d,personalizationDetails:c,event:u,onResponse:p})=>{let{state:m,wasSet:g}=l.current();"out"===m&&g||(c.isRenderDecisions()?n(t):r()),i(u,c.createQueryDetails());let f=s(c.isRenderDecisions(),c.isSendDisplayEvent(),c.getViewName());p(({response:t})=>{let n,i,s,l=t.getPayloadsByType("personalization:decisions");j(l)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:c.createQueryDetails()}});let{page:u=[],view:p=[],proposition:m=[]}=ec(l.map(e=>a(e)),e=>e.getScopeType()),g=d.update(p);return c.isRenderDecisions()?({render:n,returnedPropositions:i,returnedDecisions:s}=o([...u,...g],m),j(u)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:tj,propositions:u.map(e=>e.toJSON())}}),j(g)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${c.getViewName()}.`,logLevel:"info",detail:{scope:c.getViewName(),propositions:g.map(e=>e.toJSON())}}),n().then(f),r()):{returnedPropositions:i,returnedDecisions:s}=o([],[...u,...g,...m]),{propositions:i,decisions:s}})})({prehidingStyle:a,showContainers:d,hideContainers:c,mergeQuery:i0,processPropositions:E,createProposition:v,notificationHandler:S,consent:n,logger:t}),k=(({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:r,getInteractionMetas:n,getClickMetas:i,getClickSelectors:o,autoCollectPropositionInteractions:a})=>({event:s,clickedElement:l})=>{let d,c,u,p=[];if([t(l,n,a),r(l,o(),i)].forEach(({decisionsMeta:e,propositionActionLabel:t,propositionActionToken:r,viewName:n})=>{Array.prototype.push.apply(p,e),!d&&t&&(d=t),!c&&r&&(c=r),!u&&n&&(u=n)}),j(p)){let t={eventType:nX};u&&(t.web={webPageDetails:{viewName:u}}),s.mergeXdm(t),e(s,p,[nK.INTERACT],((e,t)=>{if(!t&&!e)return;let r={};return e&&(r.label=e),t&&(r.tokens=[t]),r})(d,c))}})({mergeDecisionsMeta:iZ,collectInteractions:oh,collectClicks:iW,getInteractionMetas:p,getClickMetas:f,getClickSelectors:g,autoCollectPropositionInteractions:s}),T=(({processPropositions:e,viewCache:t,logger:r})=>({personalizationDetails:n,onResponse:i})=>{let o,a,s=n.getViewName();return i(()=>({propositions:o,decisions:a})),t.getView(s).then(t=>{let i;return n.isRenderDecisions()?({render:i,returnedPropositions:o,returnedDecisions:a}=e(t),r.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:t.map(e=>e.toJSON())}}),i()):({returnedPropositions:o,returnedDecisions:a}=e([],t),[])})})({processPropositions:E,viewCache:w,logger:t}),D=(({processPropositions:e,createProposition:t,renderedPropositions:r,viewCache:n})=>{let i=e=>!(e.scope===tj&&e.renderAttempted);return({propositions:o=[],metadata:a={},viewName:s})=>{let l=N();r.concat(l.promise);let d=(({propositions:e,metadata:t})=>e.filter(i).map(e=>{if(j(e.items)){let{id:r,scope:n,scopeDetails:i}=e;return{id:r,scope:n,scopeDetails:i,items:(({items:e,metadataForScope:t={}})=>{let{actionType:r,selector:n}=t;return e.filter(e=>((e,t)=>"function"==typeof i2[e]&&i2[e](e,t))(e.schema,r)).map(e=>{let{schema:i}=e;return i===nB||i1(i,r)?eE(t)?void 0:{...e,schema:i1(i,r)?nq:i,data:{...e.data,selector:n,type:r}}:{...e}}).filter(e=>e)})({items:e.items,metadataForScope:t[e.scope]})}}return e}).filter(e=>j(e.items)))({propositions:o,metadata:a}).map(e=>t(e));return Promise.resolve().then(()=>s?n.getView(s):[]).then(t=>{let{render:r,returnedPropositions:n}=e([...d,...t]);return r().then(l.resolve),{propositions:n}})}})({processPropositions:E,createProposition:v,renderedPropositions:I,viewCache:w}),P=(({targetMigrationEnabled:e})=>e?e=>{e.getPayload().mergeMeta({target:{migration:!0}})}:ek)({targetMigrationEnabled:o}),O=(({processPropositions:e,createProposition:t,notificationHandler:r})=>({renderDecisions:n,propositions:i,event:o,personalization:a={}})=>{if(!n)return Promise.resolve();let{sendDisplayEvent:s=!0}=a,l=o?o.getViewName():void 0,d=(()=>{let e=0;return t=>{let{items:r=[]}=t;return!!r.some(e=>e.schema===nz)&&(e+=1)>1}})(),c=i.map(e=>t(e,!0,d(e))),{render:u,returnedPropositions:p}=e(c),m=r(n,s,l),g=c.reduce((e,t)=>(e[t.getId()]=t,e),{});return u().then(e=>{m(e.filter(e=>!g[e.id].shouldSuppressDisplay()),e.filter(e=>g[e.id].shouldSuppressDisplay()))}),Promise.resolve({propositions:p})})({processPropositions:E,createProposition:v,notificationHandler:S}),A=(({showContainers:e,consent:t})=>()=>{let{state:r,wasSet:n}=t.current();"out"===r&&n?e():t.awaitConsent().catch(e)})({showContainers:d,consent:n});return(({getPageLocation:e,logger:t,fetchDataHandler:r,viewChangeHandler:n,onClickHandler:i,isAuthoringModeEnabled:o,mergeQuery:a,viewCache:s,showContainers:l,applyPropositions:d,setTargetMigration:c,mergeDecisionsMeta:u,renderedPropositions:p,onDecisionHandler:m,handleConsentFlicker:g})=>({lifecycle:{onComponentsRegistered(){g()},onDecision:m,onBeforeRequest:({request:e})=>(c(e),Promise.resolve()),onBeforeEvent({event:i,renderDecisions:d,decisionScopes:c=[],personalization:m={},onResponse:g=ek,onRequestFailure:f=ek}){if(g(()=>({propositions:[]})),f(()=>l()),o())return t.warn("Rendering is disabled for authoring mode."),a(i,{enabled:!1}),Promise.resolve();let h=(({getPageLocation:e,renderDecisions:t,decisionScopes:r,personalization:n,event:i,isCacheInitialized:o,logger:a})=>{let s=i.getViewName();return{isRenderDecisions:()=>t,isSendDisplayEvent:()=>!!n.sendDisplayEvent,shouldIncludeRenderedPropositions:()=>!!n.includeRenderedPropositions,getViewName:()=>s,hasScopes:()=>r.length>0||j(n.decisionScopes),hasSurfaces:()=>j(n.surfaces),hasViewName:()=>eC(s),createQueryDetails(){let t=[...r];j(n.decisionScopes)&&t.push(...n.decisionScopes);let i=((e=[],t,r)=>e.map(e=>((e,t,r)=>{let n,i,o=e=>(r.warn(e),null);if(!eC(e))return o(`Invalid surface: ${e}`);let a=(e=>{let t,r,n,i=e.match(nR);return i?{surfaceType:eC(t=i[1])?t.toLowerCase():"",authority:eC(r=i[2])?r.toLowerCase():"",path:eC(n=i[3])?nM(n):"/",fragment:i[4]}:null})((n=e,i=t,n.startsWith("#")?n$(i)+n:n));return null===a?o(`Invalid surface: ${e}`):["web","webapp"].includes(a.surfaceType)?a.authority&&nN.test(a.authority)?a.path&&!n_.test(a.path)?o(`Invalid path ${a.path} in surface: ${e}`):a.fragment&&!nx.test(a.fragment)?o(`Invalid fragment ${a.fragment} in surface: ${e}`):a:o(`Invalid authority ${a.authority} in surface: ${e}`):o(`Unsupported surface type ${a.surfaceType} in surface: ${e}`)})(e,t,r)).filter(e=>null!=e).map(nL))(n.surfaces,e,a);if(this.shouldRequestDefaultPersonalization()){t.includes(tj)||t.push(tj);let r=n$(e);i.includes(r)||i.push(r)}let o=[nj,nB,nF,nH,nV,nz,"https://ns.adobe.com/personalization/message/content-card"];return t.includes(tj)&&o.push(nq),{schemas:o,decisionScopes:nG(t),surfaces:nG(i)}},isCacheInitialized:()=>o,shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return n.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==n.defaultPersonalizationEnabled}}})({getPageLocation:e,renderDecisions:d,decisionScopes:c,personalization:m,event:i,isCacheInitialized:s.isInitialized(),logger:t}),y=[];if(h.shouldIncludeRenderedPropositions()&&y.push(p.clear()),h.shouldFetchData()){let e=s.createCacheUpdate(h.getViewName());f(()=>e.cancel()),r({cacheUpdate:e,personalizationDetails:h,event:i,onResponse:g})}else h.shouldUseCachedData()&&y.push(n({personalizationDetails:h,event:i,onResponse:g,onRequestFailure:f}));return Promise.all(y).then(e=>{let t=e.flatMap(e=>e);j(t)&&u(i,t,[nK.DISPLAY])})},onClick({event:e,clickedElement:t}){i({event:e,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:e=>(({logger:e,options:t})=>{let r=tm({propositions:ts(tm({id:tg().required(),scope:tg().required(),scopeDetails:tm({decisionProvider:tg().required()}).required(),items:ts(tm({id:tg().required(),schema:tg().required(),data:tm(ta())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:tm(ta()),viewName:tg()}).required();try{return r(t)}catch(t){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",t),n2}})({logger:t,options:e}),run:d}}}))({getPageLocation:h,logger:t,fetchDataHandler:C,viewChangeHandler:T,onClickHandler:k,isAuthoringModeEnabled:iK,mergeQuery:i0,viewCache:w,showContainers:d,applyPropositions:D,setTargetMigration:P,mergeDecisionsMeta:iZ,renderedPropositions:I,onDecisionHandler:O,handleConsentFlicker:A})};oy.namespace="Personalization";let ov=i8.map(e=>tc(e));oy.configValidators=tm({prehidingStyle:tg().nonEmpty(),targetMigrationEnabled:tl().default(!1),autoCollectPropositionInteractions:tm({AJO:to(ov).default(i4),TGT:to(ov).default(i9)}).default({AJO:i4,TGT:i9}).noUnknownFields()});let ow=oy,ob=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,oE=(e,t={},r=[])=>(Object.keys(e).forEach(n=>{ob(e[n])||Array.isArray(e[n])?oE(e[n],t,[...r,n]):t[[...r,n].join(".")]=e[n]}),t),oI=e=>ob(e)?oE(e):e,oS={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},oC={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},ok={AND:"and",OR:"or"},oT={ORDERED:"ordered",MOST_RECENT:"mostRecent"};function oD(e){return"object"==typeof e||void 0===e}function oP(e){return"number"==typeof e}let oO={[oC.EQUALS]:{matches:(e,t,r=[])=>{if(oD(e[t]))return!1;let n=String(e[t]).toLowerCase();for(let e=0;e<r.length;e+=1)if(!oD(r[e])&&n===String(r[e]).toLowerCase())return!0;return!1}},[oC.NOT_EQUALS]:{matches:(e,t,r=[])=>{if(oD(e[t]))return!1;let n=String(e[t]).toLowerCase();for(let e=0;e<r.length;e+=1)if(!oD(r[e])&&n===String(r[e]).toLowerCase())return!1;return!0}},[oC.EXISTS]:{matches:(e,t)=>void 0!==e[t]&&null!==e[t]},[oC.NOT_EXISTS]:{matches:(e,t)=>void 0===e[t]||null===e[t]},[oC.GREATER_THAN]:{matches:(e,t,r=[])=>{let n=e[t];if(!oP(n))return!1;for(let e=0;e<r.length;e+=1)if(oP(r[e])&&n>r[e])return!0;return!1}},[oC.GREATER_THAN_OR_EQUAL_TO]:{matches:(e,t,r=[])=>{let n=e[t];if(!oP(n))return!1;for(let e=0;e<r.length;e+=1)if(oP(r[e])&&n>=r[e])return!0;return!1}},[oC.LESS_THAN]:{matches:(e,t,r=[])=>{let n=e[t];if(!oP(n))return!1;for(let e=0;e<r.length;e+=1)if(oP(r[e])&&n<r[e])return!0;return!1}},[oC.LESS_THAN_OR_EQUAL_TO]:{matches:(e,t,r=[])=>{let n=e[t];if(!oP(n))return!1;for(let e=0;e<r.length;e+=1)if(oP(r[e])&&n<=r[e])return!0;return!1}},[oC.CONTAINS]:{matches:(e,t,r=[])=>{if(oD(e[t]))return!1;let n=String(e[t]).toLowerCase();for(let e=0;e<r.length;e+=1)if(!oD(r[e])&&-1!==n.indexOf(String(r[e]).toLowerCase()))return!0;return!1}},[oC.NOT_CONTAINS]:{matches:(e,t,r=[])=>{if(oD(e[t]))return!1;let n=String(e[t]).toLowerCase();for(let e=0;e<r.length;e+=1)if(!oD(r[e])&&-1!==n.indexOf(String(r[e]).toLowerCase()))return!1;return!0}},[oC.STARTS_WITH]:{matches:(e,t,r=[])=>{if(oD(e[t]))return!1;let n=String(e[t]).toLowerCase();for(let e=0;e<r.length;e+=1)if(!oD(r[e])&&n.startsWith(String(r[e]).toLowerCase()))return!0;return!1}},[oC.ENDS_WITH]:{matches:(e,t,r=[])=>{if(oD(e[t]))return!1;let n=String(e[t]).toLowerCase();for(let e=0;e<r.length;e+=1)if(!oD(r[e])&&n.endsWith(r[e].toLowerCase()))return!0;return!1}}},oA="eventType",oR=["iam.eventType",oA,"type"],oN=["iam.id","id"],o_=(e,t)=>{for(let r=0;r<t.length;r+=1)if(void 0!==e[t[r]])return t[r];throw Error("The event does not match the expected schema.")},ox=e=>{let t=structuredClone(e);return[[o_(t,oR),oA],[o_(t,oN),"eventId"]].forEach(([e,r])=>{e!==r&&(t[r]=t[e],delete t[e])}),t};function oM(e,t){return{evaluate:(e,r)=>t.evaluate(e,r),toString:()=>`Condition{type=${e}, definition=${t}}`}}function oL(e){let{id:t,type:r,detail:n}=e;return{id:t,type:r,detail:n}}function o$(e){let{condition:t,consequences:r,key:n}=e,i=function e(t){let{type:r,definition:n}=t;if(oS.MATCHER===r)return oM(r,function(e){let{key:t,matcher:r,values:n}=e;return{evaluate:e=>{let i=oO[r];return!!i&&i.matches(e,t,n)}}}(n));if(oS.GROUP===r)return oM(r,function(t){var r;let{logic:n,conditions:i}=t;return r=i.map(e),{evaluate:(e,t)=>{if(ok.AND===n){let n=!0;for(let i=0;i<r.length;i+=1)n=n&&r[i].evaluate(e,t);return n}if(ok.OR===n){let n=!1;for(let i=0;i<r.length;i+=1)if(n=n||r[i].evaluate(e,t))return!0}return!1}}}(n));if(oS.HISTORICAL===r)return oM(r,function(e){let{events:t,from:r,to:n,matcher:i,value:o,searchType:a}=e;return{evaluate:(e,s)=>{var l=oT.MOST_RECENT===a?function(e,t,r,n=0,i=1/0){try{return e.reduce((e,o,a)=>{let s=r.generateEventHash(ox(o)),l=t.events[s];if(!l)return e;let d=l.timestamps.filter(e=>e>=n&&e<=i).pop();return d&&d>e.timestamp?{index:a,timestamp:d}:e},{index:-1,timestamp:0}).index}catch{return -1}}(t,e,s,r,n):oT.ORDERED===a?function(e,t,r,n=0,i=1/0){try{let o=n,a=e.every(e=>{let n=r.generateEventHash(ox(e)),a=t.events[n];if(!a)return!1;let s=a.timestamps[0],l=s>=o&&s<=i;return o=s,l});return Number(a)}catch{return 0}}(t,e,s,r,n):function(e,t,r,n=0,i=1/0){return e.reduce((e,o)=>{try{let a=r.generateEventHash(ox(o)),s=t.events[a];if(!s)return e;let{timestamps:l=[]}=s;return e+l.filter(e=>e>=n&&e<=i).length}catch{return e}},0)}(t,e,s,r,n);switch(i){case oC.GREATER_THAN:return l>o;case oC.GREATER_THAN_OR_EQUAL_TO:return l>=o;case oC.LESS_THAN:return l<o;case oC.LESS_THAN_OR_EQUAL_TO:return l<=o;case oC.EQUALS:return l===o;case oC.NOT_EQUALS:return l!==o;default:return!1}}}}(n));throw Error("Can not parse condition")}(t),o=r.map(oL);return{key:n,execute:(e,t)=>i.evaluate(e,t)?o:[],toString:()=>`Rule{condition=${i}, consequences=${o}}`}}function oU(e,t=e=>e[0]){let r={};return function(...n){let i=t(n);return void 0===r[i]&&(r[i]=e(...n)),r[i]}}function oj(e,t){let r=65535&t;return((t-r)*e|0)+(r*e|0)|0}let oq=oU(function(e,t=0){let r,n=e.length,i=t,o=-2&n;for(let t=0;t<o;t+=2)r=(131071&(r=oj(r=e.charCodeAt(t)|e.charCodeAt(t+1)<<16,0xcc9e2d51)))<<15|r>>>17,i^=r=oj(r,0x1b873593),i=5*(i=(524287&i)<<13|i>>>19)+0xe6546b64|0;return n%2==1&&(r=(131071&(r=oj(r=e.charCodeAt(o),0xcc9e2d51)))<<15|r>>>17,i^=r=oj(r,0x1b873593)),i^=n<<1,i^=i>>>16,i=oj(i,0x85ebca6b),i^=i>>>13,i=oj(i,0xc2b2ae35),i^=i>>>16},e=>e.join("-")),oB=oU(function(e,t){return Math.round(Math.abs(oq(e))%t/t*1e4)/100});function oF(e,t){return t.map(t=>t.execute(e)).filter(e=>e.length>0)}let oV=e=>{let t=structuredClone(e);return en(Object.keys(t).sort().reduce((e,r)=>{let n=t[r];return void 0==n||""===n?e:e+=`${r}:${n}`},""))},oH=1e3,oz=30,oG="events",oJ={TYPE:"~type",SOURCE:"~source"},oX={EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},oQ={REQUEST:"com.adobe.eventSource.requestContent"},oY="insert",oW=e=>e?.scopeDetails?.activity?.id,oK=e=>{e.clear()},oZ={cjmiam:(e,t,r)=>{let{html:n,mobileParameters:i}=r;return{schema:nz,data:{mobileParameters:i,webParameters:{},content:n,contentType:oa},id:e}},schema:(e,t,r)=>{let{schema:n,data:i,id:o}=r;return{schema:n,data:i,id:o||e}}},o0=e=>{let{schema:t,data:r}=e;if(t===nV)return!0;if(t!==nF)return!1;try{let e="string"==typeof r.content?JSON.parse(r.content):r.content;return e&&Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"rules")}catch{return!1}},o1=e=>{let t={},r=e.split(".");switch(r.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=r[1];break;case 3:t.subdomain="www"===r[0]?"":r[0],t.domain=e,t.topLevelDomain=r[2];break;case 4:t.subdomain="www"===r[0]?"":r[0],t.domain=e,t.topLevelDomain=`${r[2]}.${r[3]}`}return t},o2=(e,t=o1)=>{"string"!=typeof e&&(e="");let{host:r,path:n,query:i,anchor:o}=(e=>{try{let t=new URL(e),r=t.pathname;return e.endsWith("/")||"/"!==r||(r=""),{host:t.hostname,path:r,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{host:"",path:"",query:"",anchor:""}}})(e);return{path:n,query:i,fragment:o,...t(r)}},o3=(e,...t)=>t,o5=(e,...t)=>!0,o6=({config:e,eventManager:t,createNamespacedStorage:r,consent:n,getBrowser:i,logger:o})=>{let a,{orgId:s,personalizationStorageEnabled:l}=e,d=iG({eventManager:t,mergeDecisionsMeta:iZ}),c=r(`${el(s)}.decisioning.`);l||oK(c.persistent);let u=(({storage:e,logger:t})=>{let r,n,i,o=e,a=e=>{let t,a,s=(t=o=e,e=>{try{let e=t.getItem(oG);return[JSON.parse(e),e.length]}catch{}return[e,0]});a=o,r=e=>{a.setItem(oG,JSON.stringify(e))},[n,i]=s({}),i>2097152&&(n=((e=oz,t=oH)=>r=>{let n=Object.entries(r).reduce((e,[t,{timestamps:r=[]}])=>(r.forEach(r=>{e.push({key:t,timestamp:r})}),e),[]),i=(e=>{let t=new Date;return t.setDate(t.getDate()-e),t})(e);return(n=n.filter(({timestamp:e})=>e>=i)).sort((e,t)=>e.timestamp-t.timestamp),(n=n.slice(-t)).reduce((e,{key:t,timestamp:r})=>(e[t]||(e[t]={timestamps:[]}),e[t].timestamps.push(r),e),{})})()(n),r(n))};a(e);let s=(e={eventType:null,eventId:null},i=oY)=>{let{eventType:o,eventId:a}=e;if(!o||!a)return;let s=oV(e);if("insertIfNotExists"===i&&n[s])return;n[s]&&Array.isArray(n[s].timestamps)||(n[s]={timestamps:[]});let l=new Date().getTime();return n[s].timestamps.push(l),n[s].timestamps.sort(),t.info("[Event History] Added event for",e,"with hash",s,"and timestamp",l),r(n),n[s]};return{addExperienceEdgeEvent:e=>{let{xdm:t}=e.getContent();if(!(e=>{let{_experience:t}=e||{};return!!t&&"object"==typeof t})(t))return;let{_experience:{decisioning:{propositionEventType:r={},propositionAction:{id:n}={},propositions:i=[]}={}}}=t;Object.keys(r).filter(e=>1===r[e]).forEach(e=>{i.forEach(t=>{t?.scopeDetails?.decisionProvider==="AJO"&&s({eventId:oW(t),eventType:e,action:n})})})},addEvent:s,addEventPayloads:(e=[])=>e.map(({operation:e,event:t})=>s(t,e)),getEvent:(e,t)=>{let r=oV({eventType:e,eventId:t});if(n[r])return n[r]},toJSON:()=>n,setStorage:a}})({storage:(()=>{let e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,r)=>{e[t]=r}}})(),logger:o}),p=(({eventRegistry:e})=>{let t={},r=r=>{let n=oW(r);if(!n)return;let i=((e,t)=>{let r=e=>{let{id:t,type:r,detail:n}=e;return"function"==typeof oZ[r]?oZ[r](t,r,n):n},n=oW(e),i=[];return Array.isArray(e.items)&&e.items.filter(o0).forEach(e=>{let{data:t={},schema:r}=e,n=r===nV?t:t.content;n&&i.push(function(e,t={generateEventHash:()=>{throw Error("No hash function provided")}}){let{rules:r,metadata:n={}}=function(e){let{version:t,rules:r,metadata:n}=e,i=r.map(o$);return{version:t,rules:i,metadata:function(e){if(e)return{provider:e.provider,providerData:Object.assign({},e.providerData)}}(n)}}(e),{provider:i}=n;return"TGT"===i?function(e,t){let{providerData:r}=t;if(!r)throw Error("Provider data is missing in metadata");let{identityTemplate:n,buckets:i}=r;if(!n)throw Error("Identity template is missing in provider data");if(!i)throw Error("Buckets is missing in provider data");let o=e.filter(e=>!e.key),a=function(e){let t={};for(let r=0;r<e.length;r+=1){let n=e[r];n.key&&(t[n.key]||(t[n.key]=[]),t[n.key].push(n))}return t}(e),{buckets:s}=t.providerData;return{provider:"TGT",execute:e=>{let r=function(e){let{xdm:t}=e;if(!t)throw Error("XDM object is missing in the context");let{identityMap:r}=t;if(!r)throw Error("Identity map is missing in the XDM object");let n=r.ECID;if(!n)throw Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(n)||0===n.length)throw Error("ECID identities array is empty or not an array");let i=n[0].id;if(!i)throw Error("ECID identity is missing in the identities array");return i}(e),n=oF(e,o),i=Object.keys(a),l=[];for(let n=0;n<i.length;n+=1){var d;let o=i[n],c=a[o],u=oF((d=function(e,t,r){let{providerData:n}=r,{identityTemplate:i}=n;return i.replace("<key>",t).replace("<identity>",e)}(r,o,t),{allocation:oB(d,s),...e}),c);l.push(...u)}return[...n,...l]}}}(r,n):{provider:"DEFAULT",execute:e=>r.map(r=>r.execute(e,t)).filter(e=>e.length>0)}}("string"==typeof n?JSON.parse(n):n,{generateEventHash:oV}))}),{rank:e?.scopeDetails?.rank||1/0,evaluate:o=>{let a=t.getEvent(nJ,n),s=a?.timestamps[0],l=((e=[])=>Array.isArray(e)?e.flat(1/0):e)(i.map(e=>e.execute(o))).map(r).map(e=>{let r=t.addEvent({eventType:nK.TRIGGER,eventId:n}).timestamps[0];return{...e,data:{...e.data,qualifiedDate:r,displayedDate:s}}});return{...e,items:l}},isEvaluable:i.length>0}})(r,e);i.isEvaluable&&(t[n]=i)};return{addPayload:r,addPayloads:e=>{e.forEach(r)},evaluate:(e={})=>Object.values(t).sort(({rank:e},{rank:t})=>e-t).map(t=>t.evaluate(e)).filter(e=>e.items.length>0)}})({eventRegistry:u}),m=(({eventRegistry:e,window:t,getBrowser:r})=>{let n=new Date().getTime(),i={browser:{name:r()},page:{title:t.title,url:t.url,...o2(t.url)},referringPage:{url:t.referrer,...o2(t.referrer)}};return{getContext:(r={})=>({...oI({...{...i,...(()=>{let e=new Date,t=e.getTime();return{pageLoadTimestamp:n,currentTimestamp:t,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:t-n,"~timestampu":t/1e3,"~timestampz":e.toISOString()}})(),window:(()=>{let e=t.height;return{height:e,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}})(),"~sdkver":t2},...r}),events:e.toJSON()})}})({eventRegistry:u,window,getBrowser:i}),g=(({contextProvider:e,decisionProvider:t})=>({optionsValidator:e=>(({options:e})=>tm({renderDecisions:tl(),personalization:tm({decisionContext:tm({})})}).noUnknownFields()(e))({options:e}),run:({renderDecisions:r,decisionContext:n,applyResponse:i})=>i({renderDecisions:r,propositions:t.evaluate(e.getContext(n))})}))({contextProvider:m,decisionProvider:p}),f=(({collect:e})=>{let t=()=>void 0,r=new Set,n=(t,n=[])=>{if(!(n instanceof Array)||!Object.values(nK).includes(t))return Promise.resolve();let i=[],o=new Set;return n.forEach(e=>{let n=(e=>{let{id:t,scope:r,scopeDetails:n}=e;return{id:t,scope:r,scopeDetails:n}})(e);((e,t,n)=>{let i=[e,t].join("-"),o=!n.has(i)&&([nK.INTERACT,nK.DISMISS].includes(e)||!r.has(i));return n.add(i),r.add(i),o})(t,n.id,o)&&i.push(n)}),i.length>0?e({decisionsMeta:i,eventType:n0[t],documentMayUnload:!0}):Promise.resolve()},i=(()=>{let e=o3,t=o5,r=0,n={};return{add:(e,t)=>{let i;return"function"!=typeof e?()=>void 0:(n[r+=1]={callback:e,params:t},{id:r,unsubscribe:(i=r,()=>{delete n[i]})})},emit:(...r)=>{Object.values(n).forEach(({callback:n,params:i})=>{let o=e(i,...r);t(i,...o)&&n(...o)})},emitOne:(r,...i)=>{if(!r||!n[r])return;let{callback:o,params:a}=n[r],s=e(a,...i);t(a,...s)&&o(...s)},hasSubscriptions:()=>Object.keys(n).length>0,setEmissionPreprocessor:t=>{"function"==typeof t&&(e=t)},setEmissionCondition:e=>{"function"==typeof e&&(t=e)}}})();return i.setEmissionPreprocessor((e,t)=>{let{surfacesFilter:r,schemasFilter:i}=e;return[{propositions:t.filter(e=>!r||r.includes(e.scope)).map(e=>{let{items:t=[]}=e;return{...e,items:t.filter(e=>!i||i.includes(e.schema))}}).filter(e=>e.items.length>0)},n]}),{refresh:e=>{(t=t=>{if(t)return void i.emitOne(t,e);i.emit(e)})()},command:{optionsValidator:e=>(({options:e})=>tm({surfaces:ts(tg()).uniqueItems(),schemas:ts(tg()).uniqueItems(),callback:td().required()}).noUnknownFields()(e))({options:e}),run:({surfaces:e,schemas:r,callback:n})=>{let{id:o,unsubscribe:a}=i.add(n,{surfacesFilter:e instanceof Array?e:void 0,schemasFilter:r instanceof Array?r:void 0});return t(o),Promise.resolve({unsubscribe:a})}}}})({collect:d});return{lifecycle:{onDecision({propositions:e}){f.refresh(e)},onComponentsRegistered(e){a=(({lifecycle:e,eventRegistry:t})=>({renderDecisions:r=!1,propositions:n=[],event:i,personalization:o})=>{if(e){let a=(e=>{let t=[];return e.forEach(e=>{let r=[];e.items.forEach(e=>{"https://ns.adobe.com/personalization/eventHistoryOperation"===e.schema?t.push({operation:e.data.operation,event:{eventId:e.data.content["iam.id"],eventType:e.data.content["iam.eventType"]}}):r.push(e)}),e.items=r}),t})(n);t.addEventPayloads(a),e.onDecision({renderDecisions:r,propositions:n,event:i,personalization:o})}return{propositions:n}})({lifecycle:e.lifecycle,eventRegistry:u}),l&&n.awaitConsent().then(()=>{u.setStorage(c.persistent)}).catch(()=>{c&&oK(c.persistent)})},onBeforeEvent({event:e,renderDecisions:t,personalization:r={},onResponse:n=ek}){let{decisionContext:i={}}=r;n((({renderDecisions:e,decisionProvider:t,applyResponse:r,event:n,personalization:i,decisionContext:o})=>{let a={...oI(n.getContent()),...o};return({response:o})=>(t.addPayloads(o.getPayloadsByType("personalization:decisions")),n.hasQuery())?r({renderDecisions:e,propositions:t.evaluate(a),event:n,personalization:i}):{propositions:[]}})({renderDecisions:t,decisionProvider:p,applyResponse:a,event:e,personalization:r,decisionContext:m.getContext({[oJ.TYPE]:oX.EDGE,[oJ.SOURCE]:oQ.REQUEST,...i})}))},onBeforeRequest({request:e}){let{events:t=[]}=e.getPayload().toJSON();0!==t.length&&t.forEach(e=>u.addExperienceEdgeEvent(e))}},commands:{evaluateRulesets:{run:({renderDecisions:e,personalization:t={}})=>{let{decisionContext:r={}}=t;return g.run({renderDecisions:e,decisionContext:{[oJ.TYPE]:oX.RULES_ENGINE,[oJ.SOURCE]:oQ.REQUEST,...r},applyResponse:a})},optionsValidator:g.optionsValidator},subscribeRulesetItems:f.command}}};o6.namespace="RulesEngine",o6.configValidators=tm({personalizationStorageEnabled:tl().default(!1)});let o4=o6,o9=tm({streamingMedia:tm({channel:tg().nonEmpty().required(),playerName:tg().nonEmpty().required(),appVersion:tg(),mainPingInterval:tu().minimum(10).maximum(50).default(10),adPingInterval:tu().minimum(1).maximum(10).default(10)}).noUnknownFields()}),o7=({config:e,logger:t,eventManager:r,sendEdgeNetworkRequest:n,consent:i})=>{let o=nu({config:e}),a=nd({config:e,eventManager:r,logger:t,consent:i,sendEdgeNetworkRequest:n,setTimestamp:t1(()=>new Date)}),s=np({mediaSessionCacheManager:o,mediaEventManager:a,config:e}),l=nm({config:e,mediaEventManager:a,mediaSessionCacheManager:o}),d=nf({mediaSessionCacheManager:o,config:e,trackMediaEvent:s});return(({config:e,trackMediaEvent:t,trackMediaSession:r,mediaResponseHandler:n})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=ek}){if(!e)return;let{legacy:r,playerId:i,getPlayerDetails:o}=e;r||t(({response:e})=>n({playerId:i,getPlayerDetails:o,response:e}))}},commands:{createMediaSession:{optionsValidator:e=>(({options:e})=>to([tm({playerId:tg().required(),getPlayerDetails:td().required(),xdm:tm({mediaCollection:tm({sessionDetails:tm(ta()).required()})}),edgeConfigOverrides:ty}).required(),tm({xdm:tm({mediaCollection:tm({playhead:tu().required(),sessionDetails:tm(ta()).required()})}),edgeConfigOverrides:ty}).required()],"an object with playerId, getPlayerDetails and xdm.mediaCollection.sessionDetails, or an object with xdm.mediaCollection.playhead and xdm.mediaCollection.sessionDetails")(e))({options:e}),run:r},sendMediaEvent:{optionsValidator:e=>(({options:e})=>to([tm({playerId:tg().required(),xdm:tm({eventType:tf(...Object.values(nl)).required(),mediaCollection:tm(ta())}).required()}).required(),tm({xdm:tm({eventType:tf(...Object.values(nl)).required(),mediaCollection:tm({playhead:tu().integer().required(),sessionID:tg().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e))({options:e}),run:r=>e.streamingMedia?t(r):Promise.reject(Error("Streaming media is not configured."))}}}))({config:e,trackMediaEvent:s,mediaEventManager:a,mediaResponseHandler:d,trackMediaSession:l})};o7.namespace="Streaming media",o7.configValidators=o9;let o8=o7,ae="advertising",at="_les_lsc",ar="lastConversionTime",an="displayClickCookieExpires",ai="rampIdExpires",ao="surferId",aa="rampId",as="id5Id",al=30,ad="advertising.enrichment",ac="Ad conversion submission failed",au="ev_lcc";async function ap({eventManager:e,cookieManager:t,adConversionHandler:r,logger:n,skwcid:i,efid:o}){n.info("Processing ad conversion",{skwcid:i,efid:o});let a=e.createEvent();if(void 0!==i&&void 0!==o&&i.startsWith("AL!")){let e={click_time:Date.now(),...void 0!==i&&{skwcid:i},...void 0!==o&&{efid:o}};t.setValue(at,e)}let s={_experience:{adcloud:{conversionDetails:{...void 0!==i&&{trackingCode:i},...void 0!==o&&{trackingIdentities:o}}}},eventType:"advertising.enrichment_ct",timestamp:new Date().toISOString()};a.setUserXdm(s),t.setValue(ar),t.setValue("lastConversionTimeExpires",Date.now()+78624e5);try{return await r.trackAdConversion({event:a})}catch(e){throw n.error(ac,e),e}}let am="",ag="",af=null,ah=function(e,t,r=!0){if(t&&!ey({getBrowser:t})())return Promise.resolve(null);if(am&&""!==am)return Promise.resolve(am);if(e){let t=e.getValue(ao);if(t)return am=t,Promise.resolve(t)}return r?(af||(af=new Promise((e,t)=>{setTimeout(()=>{var r;let n="https:"===document.location.protocol?"https:":"http:",i=new URLSearchParams({google:"__EFGCK__",gsurfer:"__EFGSURFER__",imsId:"__EFIMSORGID__",is_fb_cookie_synced:"__EFFB__",optout:"__EFOPTOUT__",throttleCookie:"__EFSYNC__",time:"__EFTIME__",ev_lcc:"__LCC__"}),o=new URLSearchParams({ev_gb:"0",url:`${n}//www.everestjs.net/static/pixel_details.html#${i.toString()}`});r=M("iframe",{src:`${n}//pixel.everesttech.net/1/gr?${o.toString()}`},{height:0,width:0,frameBorder:0,style:{display:"none"}},[]),document.body?document.body.appendChild(r):window.addEventListener("load",()=>{document.body.appendChild(r)},!1),window.addEventListener("message",function r(n){if(n.origin.includes("www.everestjs.net"))try{let t,i,o,a=n.data,s=a.indexOf("#");if(-1===s)return void e({surferId:null,displayClickCookie:null});let l=new URLSearchParams(a.substring(s+1)),d=l.get("gsurfer");d&&(t=d);let c=l.get(au);c&&"__LCC__"!==c&&(i=c),o=r,window.removeEventListener("message",o,!1),t?(am=t,ag=i,e({surferId:am,displayClickCookie:ag})):e({surferId:null,displayClickCookie:null})}catch(e){t(e)}finally{af=null}},!1)},5e3)}))).then(t=>(e&&t&&(t.surferId&&e.setValue(ao,t.surferId),t.displayClickCookie&&(e.setValue(au,t.displayClickCookie),e.setValue(an,Date.now()+9e5))),t.surferId)):Promise.resolve(null)},ay={MAX_COUNT:15,MAX_TIME_MS:3e4,DELAY_BASE_MS:500,MAX_DELAY_MS:5e3,SHORT_TIMEOUT_MS:2e3},av={rampIdEnv:void 0,rampIdCallInitiated:!1,inProgressRampIdPromise:null,envelopeRetrievalInProgress:!1},aw=(e,t,r,n)=>{let i;try{i=JSON.parse(e).envelope}catch{i=e}i&&!av.rampIdCallInitiated?(av.rampIdCallInitiated=!0,av.rampIdEnv=i,av.envelopeRetrievalInProgress=!1,av.inProgressRampIdPromise=null,r.setValue(aa,av.rampIdEnv),r.setValue(ai,Date.now()+1728e5),t(av.rampIdEnv)):(n.warn("Invalid RampID envelope received",{envelope:i}),av.envelopeRetrievalInProgress=!1)},ab=(e,t,r,n=!0,i=!1)=>{if(av.rampIdEnv)return Promise.resolve(av.rampIdEnv);if(r){let e=r.getValue(aa),t=r.getValue(ai);if(e&&t&&t>Date.now())return av.rampIdEnv=e,Promise.resolve(e)}return n&&null!=t?((e,t,r,n=!1)=>{if(av.inProgressRampIdPromise)return av.inProgressRampIdPromise;let i=n?ay.SHORT_TIMEOUT_MS:ay.MAX_TIME_MS,o=!1,a=new Promise((n,i)=>{Z(e,{onLoad:()=>{void 0===window.ats||av.envelopeRetrievalInProgress||(av.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(e=>{e?o||aw(e,n,t,r):(av.envelopeRetrievalInProgress=!1,window.addEventListener("lrEnvelopePresent",()=>{av.envelopeRetrievalInProgress||o||(av.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(e=>{o||aw(e,n,t,r)},e=>{o||(r.error("Failed to retrieve envelope after event",e),av.envelopeRetrievalInProgress=!1,i(e),av.inProgressRampIdPromise=null)}))}))}).catch(e=>{o||(r.error("Error retrieving envelope",e),av.envelopeRetrievalInProgress=!1,i(e),av.inProgressRampIdPromise=null)})),((e,t,r,n)=>{let i=ay.MAX_COUNT,o=1,a=0,s=()=>{if(av.rampIdEnv)return;if(a>ay.MAX_TIME_MS){n.error("Maximum retry time exceeded"),av.envelopeRetrievalInProgress=!1,t(Error("Failed to retrieve RampID - timeout")),av.inProgressRampIdPromise=null;return}if(0===i){n.error("Maximum retries exceeded"),av.envelopeRetrievalInProgress=!1,t(Error("Failed to retrieve RampID after maximum retries")),av.inProgressRampIdPromise=null;return}let l=Math.min(ay.DELAY_BASE_MS*o,ay.MAX_DELAY_MS);setTimeout(()=>{a+=l,i-=1,o+=1,void 0===window.ats||null===window.ats||av.rampIdEnv||av.envelopeRetrievalInProgress?s():(av.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(t=>{aw(t,e,r,n),av.rampIdEnv||s()},()=>{n.warn("Failed to retrieve envelope"),av.envelopeRetrievalInProgress=!1,s()}))},l)};s()})(e=>{o||n(e)},e=>{o||i(e)},t,r)},onError:e=>{o||i(e),av.inProgressRampIdPromise=null}})});return av.inProgressRampIdPromise=Promise.race([a,new Promise(e=>{setTimeout(()=>{o=!0,e(null)},i)})]).finally(()=>{av.inProgressRampIdPromise=null}),av.inProgressRampIdPromise})(t,r,e,i):Promise.resolve(null)},aE="",aI=null,aS=function(e,t,r=!0,n=!1){return aE&&""!==aE?Promise.resolve(aE):r?((e,t,r)=>{if(e=Math.floor(Number(e)),aI)return aI;let n=t?2e3:3e4,i=!1;return aI=Promise.race([new Promise((t,n)=>{if(!e){r.error("Missing partner ID"),n(Error("ID5 partner ID is required"));return}let o=()=>{try{if(void 0===window.ID5)return void n(Error("ID5 object not available after script load"));aE=window.ID5.init({partnerId:e}).getUserId();let o=e=>{i||t(e)};aE?o(aE):window.ID5.init({partnerId:e}).onAvailable(function(t){(aE=t.getUserId())?o(aE):window.ID5.init({partnerId:e}).onAvailable(function(e){(aE=e.getUserId())?o(aE):(r.error("Failed to get ID5 ID after all retries"),o(null))})},1e3)}catch(e){r.error("Error during ID5 initialization",e),n(e)}};void 0!==window.ID5?o():Z("https://www.everestjs.net/static/id5-api.js",{onLoad:o,onError:e=>{r.error("Script loading failed",e),n(e)}})}),new Promise(e=>{setTimeout(()=>{i=!0,e(null)},n)})]).finally(()=>{aI=null})})(t,n,e).then(e=>e).catch(t=>{throw e.error("Failed to get ID5 ID",t),t}):Promise.resolve(null)},aC=()=>{let e=eD.parse(window.location.search);return{skwcid:e.s_kwcid,efid:e.ef_id}},ak=e=>e&&Array.isArray(e)?e.filter(e=>e&&!0===e.enabled&&e.advertiserId).map(e=>e.advertiserId).join(", "):"",aT=(e,t,r,n,i=!1)=>{let o=r.getValue(at),a=null,s=r.getValue(an);s&&s>Date.now()&&(a=r.getValue(au));let l={advertising:{...o?.click_time&&{lastSearchClick:o.click_time},...a&&{lastDisplayClick:a},stitchIds:{...e[ao]&&{surferId:e[ao]},...e[as]&&{id5:e[as]},...e[aa]&&{rampIdEnv:e[aa]},ipAddress:"DUMMY_IP_ADDRESS"},advIds:ak(n.advertiserSettings),...i&&{eventType:ad}}};return t.mergeQuery(l),t},aD=(e,t)=>{let r=Date.now(),n=t.getValue(`${e}_last_conversion`);return!!(n&&r-n<18e5)};async function aP({eventManager:e,cookieManager:t,logger:r,componentConfig:n,adConversionHandler:i,getBrowser:o}){let a={},s={},l=async()=>{if(!Object.entries(a).some(([e])=>!s[e]))return null;let o=Object.keys(a);try{let l=aT(a,e.createEvent(),t,n,!0),d={eventType:ad,timestamp:new Date().toISOString()};l.setUserXdm(d);let c=await i.trackAdConversion({event:l}),u=Date.now();return o.forEach(e=>{s[e]=!0,t.setValue(`${e}_last_conversion`,u),r.info("Ad conversion submitted successfully".replace("{0}",e))}),t.setValue(ar,u),c}catch(e){return r.error(ac,e),null}},d=((e,t,r,n)=>{let i={};return aD(ao,r)||(i.surferId=ah(r,n,!0).catch(()=>null)),t.id5PartnerId&&t.dspEnabled&&!aD(as,r)&&(i.id5Id=aS(e,t.id5PartnerId).catch(()=>null)),t.rampIdJSPath&&t.dspEnabled&&!aD(aa,r)&&(i.rampId=ab(e,t.rampIdJSPath,r,!0).catch(()=>null)),i})(r,n,t,o);return 0===Object.keys(d).length?[]:Promise.allSettled(Object.entries(d).map(([e,t])=>t.then(t=>{if(t)return a[e]=t,l()}).catch(t=>(r.error("Unable to obtain ad identity".replace("{0}",e),t),null))))}async function aO({cookieManager:e,logger:t,event:r,componentConfig:n,advertising:i,getBrowser:o}){let{skwcid:a,efid:s}=aC();if(!(![tT,tk].includes(i?.handleAdvertisingData?.toLowerCase())||a&&s||aD(ao,e)&&aD(as,e)&&aD(aa,e)))try{let a=i?.handleAdvertisingData?.toLowerCase()===tk,s=null;o&&o()===eu||(s=ab(t,n.rampIdJSPath,e,a,a));let[l,d,c]=await Promise.allSettled([ah(e,o,a),aS(t,n.id5PartnerId,a,a),s]),u={};if("fulfilled"===l.status&&l.value&&!aD(ao,e)&&(u.surferId=l.value),"fulfilled"===d.status&&d.value&&!aD(as,e)&&(u.id5Id=d.value),"fulfilled"===c.status&&c.value&&!aD(aa,e)&&(u.rampId=c.value),0===Object.keys(u).length&&(aD(ao,e)||aD(as,e)||aD(aa,e)))return;aT(u,r,e,n)}catch(e){t.error("Error in onBeforeSendEvent hook:",e)}}let aA=tm({advertising:tm({id5PartnerId:tg(),rampIdJSPath:tg(),dspEnabled:tl(),advertiserSettings:ts(tm({advertiserId:tg().required(),enabled:tl().required()}).noUnknownFields())}).noUnknownFields()}),aR=({logger:e,config:t,eventManager:r,sendEdgeNetworkRequest:n,consent:i,getBrowser:o})=>{let a=(({orgId:e,logger:t})=>{let r=R({logger:t,cookieJar:T}),n=(t,r=!0)=>r?ed(e,t):t,i=(e,i=!0)=>{try{let t=n(e,i),o=r.get(t);return o?(e=>{try{if(e?.startsWith("%7B")||e?.startsWith("{"))return JSON.parse(decodeURIComponent(e))}catch{}return e})(o):null}catch(r){return t.error(`Error reading cookie: ${e}`,r),null}};return{setValue:(e,o,a={})=>{let s={...i(ae)||{},[e]:o};return((e,i,o={},a=!0)=>{try{let t=n(e,a),s=(e=>"object"==typeof e&&null!==e?encodeURIComponent(JSON.stringify(e)):e)(i);return r.set(t,s,o),!0}catch(r){return t.error(`Error writing cookie: ${e}`,r),!1}})(ae,s,{expires:((e=al)=>new Date(Date.now()+60*e*1e3))(527040),...a})},getValue:e=>(i(ae)||{})[e]}})({orgId:t.orgId,logger:e}),s=(({sendEdgeNetworkRequest:e,consent:t,createDataCollectionRequest:r,createDataCollectionRequestPayload:n,logger:i})=>({trackAdConversion:({event:o})=>{let a=n();a.addEvent(o),o.finalize();let s=r({payload:a});return t.awaitConsent().then(()=>e({request:s}).then(()=>({success:!0})).catch(e=>{throw i.error("Failed to send ad conversion event",e),e}))}}))({eventManager:r,sendEdgeNetworkRequest:n,consent:i,createDataCollectionRequest:tF,createDataCollectionRequestPayload:tz,logger:e});return(({logger:e,config:t,eventManager:r,cookieManager:n,adConversionHandler:i,getBrowser:o})=>{let a=t.advertising,s=(({eventManager:e,cookieManager:t,adConversionHandler:r,logger:n,componentConfig:i,getBrowser:o})=>{let a=i?.advertiserSettings?ak(i.advertiserSettings):"";return async()=>{let{skwcid:s,efid:l}=aC(),d=!!(s||l);try{if(d)return ap({eventManager:e,cookieManager:t,adConversionHandler:r,logger:n,skwcid:s,efid:l});a&&aP({eventManager:e,cookieManager:t,logger:n,componentConfig:i,adConversionHandler:r,getBrowser:o}).catch(e=>n.error("Error in view through:",e))}catch(e){n.error("Error in sendAdConversion:",e)}}})({eventManager:r,cookieManager:n,adConversionHandler:i,logger:e,componentConfig:a,getBrowser:o});return{lifecycle:{onComponentsRegistered:()=>s(),onBeforeEvent:({event:t,advertising:r={}})=>aO({cookieManager:n,logger:e,event:t,componentConfig:a,advertising:r,getBrowser:o})}}})({logger:e,config:t,eventManager:r,cookieManager:a,adConversionHandler:s,getBrowser:o})};aR.namespace="Advertising",aR.configValidators=aA;let aN=aR,a_=async({vapidPublicKey:e,window:t})=>{if(!("serviceWorker"in t.navigator))throw Error("Service workers are not supported in this browser.");if(!("PushManager"in t)||!("Notification"in t))throw Error("Push notifications are not supported in this browser.");if("granted"!==t.Notification.permission)throw Error("The user has not given permission to send push notifications.");let r=await t.navigator.serviceWorker.getRegistration();if(!r)throw Error("No service worker registration was found.");if(!e)throw Error("No VAPID public key was provided.");let n={userVisibleOnly:!0,applicationServerKey:I(e)};try{let e=await r.pushManager.subscribe(n);return{endpoint:e.endpoint,keys:{p256dh:S(new Uint8Array(e.getKey("p256dh")),{urlSafe:!0}),auth:S(new Uint8Array(e.getKey("auth")),{urlSafe:!0})}}}catch(i){let n=await r.pushManager.getSubscription();if(!n||!await n.unsubscribe())throw i;return a_({vapidPublicKey:e,window:t})}},ax=async({ecid:e,eventManager:t,serializedPushSubscriptionDetails:r,window:n})=>{let i=t.createEvent();i.setUserData({pushNotificationDetails:[{appID:n.location.host,token:r,platform:"web",denylisted:!1,identity:{namespace:{code:"ECID"},id:e}}]}),i.finalize();let o=tz();return o.addEvent(i),o},aM="subscriptionDetails",aL=async({config:{vapidPublicKey:e},storage:t,logger:r,sendEdgeNetworkRequest:n,consent:i,eventManager:o,identity:a,window:s})=>{await a.awaitIdentity();let l=a.getEcidFromCookie(),d=JSON.stringify(eO(await a_({vapidPublicKey:e,window:s}))),c=`${l}${d}`;if(c===t.getItem(aM))return void r.info("Subscription details have not changed. Not sending to the server.");t.setItem(aM,c);let u=(({payload:e})=>tB({payload:e,getAction:()=>"interact",getUseSendBeacon:()=>!1}))({payload:await ax({eventManager:o,ecid:l,serializedPushSubscriptionDetails:d,window:s})});await i.awaitConsent(),await n({request:u})},a$=({createNamespacedStorage:e,eventManager:t,config:r,logger:n,consent:i,identity:o,sendEdgeNetworkRequest:a})=>({commands:{sendPushSubscription:{run:async()=>{if(!(({orgId:e,pushNotifications:{vapidPublicKey:t}={vapidPublicKey:void 0}})=>e&&t)(r))throw Error("Push notifications module is not configured. No VAPID public key was provided.");let{orgId:s,pushNotifications:{vapidPublicKey:l}={vapidPublicKey:void 0}}=r||{};return aL({config:{vapidPublicKey:l},storage:e(`${el(s)}.pushNotifications.`).persistent,logger:n,sendEdgeNetworkRequest:a,consent:i,eventManager:t,identity:o,window})},optionsValidator:tm({}).noUnknownFields()}}});a$.namespace="Push Notifications",a$.configValidators=tm({pushNotifications:tm({vapidPublicKey:tg().required()}).noUnknownFields()});let aU=a$,{console:aj}=window,aq=eb(window);function aB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class aF{mergeDefaultConfig(e){return Object.assign({},this.defaultConfig,function(e,t=()=>!0){let r=Object.assign({},e||{});return Object.keys(r).forEach(e=>{t(e,r[e])||delete r[e]}),r}(e||{},(e,t)=>void 0!==t))}async setup(){var e;if(this.setupDone)return await this.lastAlloyPromise;this.alloy=((e={})=>{let{name:t,monitors:r}=tm({name:tg().default("alloy"),monitors:ts(tm({})).default([])}).noUnknownFields()(e);return((e={})=>{let{name:t,monitors:r,components:n}=tm({name:tg().default("alloy"),monitors:ts(tm({})).default([]),components:ts(td())}).noUnknownFields()(e),i=(({console:e,locationSearch:t,createLogger:r,instanceName:n,createNamespacedStorage:i,getMonitors:o})=>{let a,s=eD.parse(t),l=i(`instance.${n}.`),d=l.session.getItem("debug"),c="true"===d,u=null===d,p=()=>c,m=(e,{fromConfig:t})=>{(!t||u)&&(c=e),t||(l.session.setItem("debug",e.toString()),u=!1)};return void 0!==s[tv]&&m("string"==typeof(a=s[tv])&&"true"===a.toLowerCase(),{fromConfig:!1}),{setDebugEnabled:m,logger:r({getDebugEnabled:p,context:{instanceName:n},getMonitors:o,console:e}),createComponentLogger:t=>r({getDebugEnabled:p,context:{instanceName:n,componentName:t},getMonitors:o,console:e})}})({console:aj,locationSearch:window.location.search,createLogger:rx,instanceName:t,createNamespacedStorage:aq,getMonitors:rM.bind(null,r)}),o=(({instanceName:e,logController:{setDebugEnabled:t,logger:r,createComponentLogger:n},components:i})=>{let o=(()=>{let e={},t={},r={};return{register(n,i){let{commands:o,lifecycle:a}=i;((e,r={})=>{let n,i,o=(n=Object.keys(t),i=Object.keys(r),n.filter(e=>i.includes(e)));if(o.length)throw Error(`[ComponentRegistry] Could not register ${e} because it has existing command(s): ${o.join(",")}`);Object.keys(r).forEach(n=>{let i=r[n];i.commandName=n,i.run=tb(i.run,`[${e}] An error occurred while executing the ${n} command.`),t[n]=i})})(n,o),((e,t={})=>{Object.keys(t).forEach(n=>{r[n]=r[n]||[],r[n].push(tb(t[n],`[${e}] An error occurred while executing the ${n} lifecycle hook.`))})})(n,a),e[n]=i},getCommand:e=>t[e],getCommandNames:()=>Object.keys(t),getLifecycleCallbacks:e=>r[e]||[],getComponentNames:()=>Object.keys(e)}})(),a=tw.reduce((e,t)=>{let r;return e[t]=(r=(...e)=>Promise.all(o.getLifecycleCallbacks(t).map(t=>new Promise(r=>{r(t(...e))}))),(...e)=>Promise.resolve().then(()=>r(...e))),e},{}),s=i.concat(Object.values(d)),l=R({logger:r,cookieJar:T}),c=tU({errorPrefix:`[${e}]`,logger:r});return(({logger:e,configureCommand:t,setDebugCommand:r,handleError:n,validateCommandOptions:i})=>{let o;return(a,s={})=>new Promise(n=>{let l=((n,a)=>{let s;if(n===tx){if(o)throw Error("The library has already been configured and may only be configured once.");s=()=>(o=t(a)).then(()=>{})}else{if(!o)throw Error("The library must be configured first. Please do so by executing the configure command.");s=n===tM?()=>{r(i({command:{commandName:tM,optionsValidator:tm({enabled:tl().required()}).noUnknownFields()},options:a}))}:()=>o.then(e=>{let t=e.getCommand(n);if(!t||"function"!=typeof t.run){let t=[tx,tM].concat(e.getCommandNames()).join(", ");throw Error(`The ${n} command does not exist. List of available commands: ${t}.`)}let r=i({command:t,options:a});return t.run(r)},()=>(e.warn(`An error during configuration is preventing the ${n} command from executing.`),new Promise(()=>{})))}return s})(a,s);e.logOnBeforeCommand({commandName:a,options:s}),n(l())}).catch(e=>n(e,`${a} command`)).catch(t=>{throw e.logOnCommandRejected({commandName:a,options:s,error:t}),t}).then(t=>{let r=E(t)?t:{};return e.logOnCommandResolved({commandName:a,options:s,result:r}),r})})({logger:r,configureCommand:i=>{let d=(({options:e,componentCreators:t,coreConfigValidators:r,createConfig:n,logger:i,setDebugEnabled:o})=>{let a=(e=>{let t=[],r={get enabled(){return e.enabled},flush(){t.forEach(({method:t,args:r})=>e[t](...r))}};return Object.keys(e).filter(t=>"function"==typeof e[t]).forEach(e=>{r[e]=(...r)=>{t.push({method:e,args:r})}}),r})(i),s=n((({combinedConfigValidator:e,options:t,logger:r})=>{try{return e.noUnknownFields().required().call({logger:r},t)}catch(e){throw Error(`Resolve these configuration problems:
	 - ${e.message.split(`
`).join(`
	 - `)}
For configuration documentation see: https://adobe.ly/3sHh553`)}})({combinedConfigValidator:t.map(({configValidators:e})=>e).filter(e=>e).reduce((e,t)=>e.concat(t),r),options:e,logger:a}));o(s.debugEnabled,{fromConfig:!0}),a.flush();let l=t.reduce((e,{buildOnInstanceConfiguredExtraParams:t})=>(t&&(e={...e,...t({config:s,logger:i})}),e),{});return i.logOnInstanceConfigured({...l,config:s}),s})({options:i,componentCreators:s,coreConfigValidators:rP,createConfig:t$,logger:r,setDebugEnabled:t}),{orgId:c,targetMigrationEnabled:u}=d,p=(({cookieJar:e,shouldTransferCookie:t,apexDomain:r,dateProvider:n})=>({cookiesToPayload(n,i){let o=""!==r&&i.endsWith(r),a={domain:r,cookiesEnabled:!0};if(!o){let r=e.get(),n=Object.keys(r).filter(t).map(e=>({key:e,value:r[e]}));n.length&&(a.entries=n)}n.mergeState(a)},responseToCookies(t){t.getPayloadsByType("state:store").forEach(t=>{let i={domain:r},o=t.attrs&&t.attrs.SameSite&&t.attrs.SameSite.toLowerCase();void 0!==t.maxAge&&(i.expires=new Date(n().getTime()+1e3*t.maxAge)),void 0!==o&&(i.sameSite=o),"none"===o&&(i.secure=!0),e.set(t.key,t.value,i)})}}))({cookieJar:l,shouldTransferCookie:(({orgId:e,targetMigrationEnabled:t})=>r=>0===r.indexOf(`${es}_${el(e)}_`)||"at_qa_mode"===r||t&&"mbox"===r)({orgId:c,targetMigrationEnabled:u}),apexDomain:rO,dateProvider:()=>new Date}),m="function"==typeof rD.sendBeacon?(({sendBeacon:e,sendFetchRequest:t,logger:r})=>(n,i)=>e(n,new Blob([i],{type:"text/plain; charset=UTF-8"}))?Promise.resolve({statusCode:204,getHeader:()=>null,body:""}):(r.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(n,i)))({sendBeacon:rD.sendBeacon.bind(rD),sendFetchRequest:rA,logger:r}):rA,g=(({logger:e,sendFetchRequest:t,sendBeaconRequest:r,isRequestRetryable:n,getRequestRetryDelay:i})=>({requestId:o,url:a,payload:s,useSendBeacon:l})=>{let d=JSON.stringify(s),c=JSON.parse(d);e.logOnBeforeNetworkRequest({url:a,requestId:o,payload:c});let u=(s=0)=>(l?r:t)(a,d).then(t=>{let r;if(n({response:t,retriesAttempted:s})){let e=i({response:t,retriesAttempted:s});return new Promise(t=>{setTimeout(()=>{t(u(s+1))},e)})}try{r=JSON.parse(t.body)}catch{}return e.logOnNetworkResponse({requestId:o,url:a,payload:c,...t,parsedBody:r,retriesAttempted:s}),{statusCode:t.statusCode,body:t.body,parsedBody:r,getHeader:t.getHeader}});return u().catch(t=>{throw e.logOnNetworkError({requestId:o,url:a,payload:c,error:t}),eN({error:t,message:"Network request failed."})})})({logger:r,sendFetchRequest:rA,sendBeaconRequest:m,isRequestRetryable:tZ,getRequestRetryDelay:t0}),f=(({logger:e})=>t=>{let{statusCode:r,body:n,parsedBody:i}=t;if(r<200||r>=300||!i&&204!==r||i&&!Array.isArray(i.handle)){let e=i?JSON.stringify(i,null,2):n,t=e?`response body:
${e}`:"no response body.";throw Error(`${tW} status code ${r} and ${t}`)}if(i){let{warnings:t=[],errors:r=[]}=i;t.forEach(t=>{e.warn(`${tW} warning:`,t)}),r.forEach(t=>{e.error(`${tW} non-fatal error:`,t)})}})({logger:r}),h=(({extractEdgeInfo:e})=>({content:t={},getHeader:r})=>{let{handle:n=[],errors:i=[],warnings:o=[]}=t;return{getPayloadsByType:e=>n.filter(t=>t.type===e).flatMap(e=>e.payload),getErrors:()=>i,getWarnings:()=>o,getEdge:()=>e(r("x-adobe-edge")),toJSON:()=>t}})({extractEdgeInfo:(({logger:e})=>t=>{if(t){let r=t.split(";");if(r.length>=2&&r[1].length>0)try{let e=parseInt(r[1],10);if(!Number.isNaN(e))return{regionId:e}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}})({logger:r})}),y=(({config:e,lifecycle:t,cookieTransfer:r,sendNetworkRequest:n,createResponse:i,processWarningsAndErrors:o,getLocationHint:a,getAssuranceValidationTokenParams:s})=>{let{edgeDomain:l,edgeBasePath:d,datastreamId:c}=e,u=!1,p=(e,t)=>{let r=a(),n=r?`${d}/${r}${t.getEdgeSubPath()}`:`${d}${t.getEdgeSubPath()}`,i=t.getDatastreamIdOverride()||c;return i!==c&&t.getPayload().mergeMeta({sdkConfig:{datastream:{original:c}}}),`https://${e}/${n}/v1/${t.getAction()}?configId=${i}&requestId=${t.getId()}${s()}`};return({request:e,runOnResponseCallbacks:a=ek,runOnRequestFailureCallbacks:s=ek})=>{let d=A();d.add(t.onResponse),d.add(a);let c=A();return c.add(t.onRequestFailure),c.add(s),t.onBeforeRequest({request:e,onResponse:d.add,onRequestFailure:c.add}).then(()=>{let t=u||!e.getUseIdThirdPartyDomain()?l:"adobedc.demdex.net",i=p(t,e),o=e.getPayload();return r.cookiesToPayload(o,t),n({requestId:e.getId(),url:i,payload:o,useSendBeacon:e.getUseSendBeacon()})}).then(e=>(o(e),e)).catch(t=>{let i;if(e.getUseIdThirdPartyDomain()&&("TypeError"===(i=t).name||"NetworkError"===i.name||0===i.status)){u=!0,e.setUseIdThirdPartyDomain(!1);let t=p(l,e),i=e.getPayload();return r.cookiesToPayload(i,l),n({requestId:e.getId(),url:t,payload:i,useSendBeacon:e.getUseSendBeacon()})}return tY(c)(t)}).then(({parsedBody:e,getHeader:t})=>{let n=i({content:e,getHeader:t});return r.responseToCookies(n),d.call({response:n}).then(tQ)})}})({config:d,lifecycle:a,cookieTransfer:p,sendNetworkRequest:g,createResponse:h,processWarningsAndErrors:f,getLocationHint:(({orgId:e,cookieJar:t})=>{let r=ed(e,"cluster");return()=>t.get(r)||(()=>{let e=t.get("mboxEdgeCluster");if(e)return`t${e}`})()})({orgId:c,cookieJar:T}),getAssuranceValidationTokenParams:rN}),v=(({cookieTransfer:e,lifecycle:t,createResponse:r,processWarningsAndErrors:n})=>({request:i,responseHeaders:o,responseBody:a,runOnResponseCallbacks:s=ek,runOnRequestFailureCallbacks:l=ek})=>{let d=A();d.add(t.onResponse),d.add(s);let c=A();c.add(t.onRequestFailure),c.add(l);let u=e=>o[e];return t.onBeforeRequest({request:i,onResponse:d.add,onRequestFailure:c.add}).then(()=>n({statusCode:200,getHeader:u,body:JSON.stringify(a),parsedBody:a})).catch(tY(c)).then(()=>{let t=r({content:a,getHeader:u});return e.responseToCookies(t),d.call({response:t}).then(tQ)})})({lifecycle:a,cookieTransfer:p,createResponse:h,processWarningsAndErrors:f}),w=(({generalConsentState:e,logger:t})=>{let r=(r,n)=>{switch(r[tD]){case"in":e.in(n);break;case"out":e.out(n);break;case tS:e.pending(n);break;default:t.warn(`Unknown consent value: ${r[tD]}`)}};return{initializeConsent(e,t){t[tD]?r(t,tA):r(e,tO)},setConsent(e){r(e,"new")},suspend(){e.pending()},awaitConsent:()=>e.awaitConsent(),withConsent:()=>e.withConsent(),current:()=>e.current()}})({generalConsentState:(({logger:e})=>{let t=[],r=()=>Promise.resolve(),n=()=>Promise.resolve(),i=()=>Promise.reject(tR("No consent preferences have been set.")),o=()=>Promise.reject(tR("The user declined consent.")),a=e=>{if(e)return Promise.reject(Error("Consent is pending."));let r=N();return t.push(r),r.promise};return{in(i){if(i===tO)this.awaitConsent=r;else{for(i===tA?e.info("Loaded user consent preferences. The user previously consented."):"new"===i&&this.awaitConsent!==n&&e.info("User consented.");t.length;)t.shift().resolve();this.awaitConsent=n}},out(r){if(r===tO)e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=i;else{for(r===tA?e.warn("Loaded user consent preferences. The user previously declined consent."):"new"===r&&this.awaitConsent!==o&&e.warn("User declined consent.");t.length;)t.shift().reject(tR("The user declined consent."));this.awaitConsent=o}},pending(t){t===tO&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=a},awaitConsent:()=>Promise.resolve(),withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case r:return{state:"in",wasSet:!1};case n:return{state:"in",wasSet:!0};case i:return{state:"out",wasSet:!1};case o:return{state:"out",wasSet:!0};case a:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}})({logger:r}),logger:r}),b=(({logger:e,loggingCookieJar:t,config:r})=>{let n=null,i=new Promise(e=>{n=e}),o=(({orgId:e,cookieJar:t,logger:r})=>{let n=ed(e,"identity");return()=>{let e=t.get(n);if(!e)return null;try{let t=decodeURIComponent(e).replace(/_/g,"/").replace(/-/g,"+"),r=I(t);return(e=>{let t=0,r=null;for(;t<e.length&&!r;){let{value:n,length:i}=tE(e,t);t+=i;let o=7&n;if(n>>3==1){if(o===tI.LEN){let n=tE(e,t);return t+=n.length,r=new TextDecoder().decode(e.slice(t,t+n.value)),t+=n.value,r}}else switch(o){case tI.VARINT:t+=tE(e,t).length;break;case tI.I64:t+=8;break;case tI.LEN:{let r=tE(e,t);t+=r.length+r.value;break}case tI.SGROUP:case tI.EGROUP:break;case tI.I32:t+=4;break;default:throw Error(`Malformed kndctr cookie. Unknown wire type: ${o}`)}}throw Error("No ECID found in cookie.")})(r)}catch(e){return r.warn(`Unable to decode ECID from ${n} cookie`,e),null}}})({orgId:r.orgId,cookieJar:t,logger:e});return{initialize(){o()&&this.setIdentityAcquired()},setIdentityAcquired(){n()},awaitIdentity:()=>i,getEcidFromCookie:()=>o()}})({config:d,logger:r,loggingCookieJar:l});b.initialize();let E=(({config:e,logger:t,lifecycle:r,consent:n,createEvent:i,createDataCollectionRequestPayload:o,createDataCollectionRequest:a,sendEdgeNetworkRequest:s,applyResponse:l})=>{let{onBeforeEventSend:d,edgeConfigOverrides:c}=e;return{createEvent:i,sendEvent(e,i={}){let{edgeConfigOverrides:l,...u}=i,p=tG({payload:o(),localConfigOverrides:l,globalConfigOverrides:c}),m=a(p),g=A(),f=A();return r.onBeforeEvent({...u,event:e,onResponse:g.add,onRequestFailure:f.add}).then(()=>(p.payload.addEvent(e),n.awaitConsent())).then(()=>{try{e.finalize(d)}catch(t){let e=()=>{throw t};return f.add(r.onRequestFailure),f.call({error:t}).then(e,e)}if(!e.shouldSend()){f.add(r.onRequestFailure),t.info(tX);let e=Error(tX);return f.call({error:e}).then(()=>{})}return s({request:m,runOnResponseCallbacks:g.call,runOnRequestFailureCallbacks:f.call})})},applyResponse(e,t={}){let{renderDecisions:n=!1,decisionContext:i={},responseHeaders:s={},responseBody:d={handle:[]},personalization:c}=t,u=o(),p=a({payload:u}),m=A();return r.onBeforeEvent({event:e,renderDecisions:n,decisionContext:i,decisionScopes:[tj],personalization:c,onResponse:m.add,onRequestFailure:ek}).then(()=>(u.addEvent(e),l({request:p,responseHeaders:s,responseBody:d,runOnResponseCallbacks:m.call})))}}})({config:d,logger:r,lifecycle:a,consent:w,createEvent:t_,createDataCollectionRequestPayload:tz,createDataCollectionRequest:tF,sendEdgeNetworkRequest:y,applyResponse:v});return(({componentCreators:e,lifecycle:t,componentRegistry:r,getImmediatelyAvailableTools:n})=>(e.forEach(e=>{let t,{namespace:i}=e,o=n(i);try{t=e(o)}catch(e){throw eN({error:e,message:`[${i}] An error occurred during component creation.`})}r.register(i,t)}),t.onComponentsRegistered({lifecycle:t}).then(()=>r)))({componentCreators:s,lifecycle:a,componentRegistry:o,getImmediatelyAvailableTools(t){let r=n(t);return{config:d,componentRegistry:o,consent:w,identity:b,eventManager:E,fireReferrerHideableImage:rR,logger:r,lifecycle:a,sendEdgeNetworkRequest:y,handleError:tU({errorPrefix:`[${e}] [${t}]`,logger:r}),createNamespacedStorage:rC,apexDomain:rO,getBrowser:r_}}})},setDebugCommand:e=>{t(e.enabled,{fromConfig:!1})},handleError:c,validateCommandOptions:tL})})({instanceName:t,logController:i,components:n});return i.logger.logOnInstanceCreated({instance:o}),o})({name:t,monitors:r,components:Object.values(c)})})({name:this.config.alloyNamespace}),Object.assign(window,{[this.config.alloyNamespace]:this.alloy});let t={clickCollectionEnabled:null!=(e=this.config.clickCollectionEnabled)&&e};return this.config.onBeforeLinkClickSend&&(t.onBeforeLinkClickSend=this.config.onBeforeLinkClickSend),void 0!==this.config.downloadLinkQualifier&&(t.downloadLinkQualifier=this.config.downloadLinkQualifier),t.onBeforeEventSend=this.config.onBeforeEventSend,this.lastAlloyPromise=this.alloy("configure",{debugEnabled:this.config.analyticsEnvironment.isDev,datastreamId:this.config.edgeConfigId,edgeDomain:this.config.edgeDomain,idMigrationEnabled:!0,targetMigrationEnabled:!0,context:["web","device","environment","placeContext","highEntropyUserAgentHints"],orgId:this.config.orgId,thirdPartyCookiesEnabled:this.config.thirdPartyCookiesEnabled||!1,...t}).then(()=>{}),this.setupDone=!0,await this.lastAlloyPromise}constructor(e){aB(this,"alloy",void 0),aB(this,"setupDone",!1),aB(this,"lastAlloyPromise",void 0),aB(this,"config",void 0),aB(this,"defaultConfig",{alloyNamespace:aF.DEFAULT_ALLOY_NAMESPACE,edgeConfigId:aF.DEFAULT_DEV_STREAM_ID,edgeDomain:aF.DEFAULT_EDGE_DOMAIN,orgId:aF.DEFAULT_ORG_ID}),this.config=this.mergeDefaultConfig(e),this.lastAlloyPromise=this.setup()}}aB(aF,"trackers",new Map),aB(aF,"DEFAULT_DEV_STREAM_ID","ffffffff-0000-ffff-0000-ffffffffffff"),aB(aF,"DEFAULT_EDGE_DOMAIN","replace.me"),aB(aF,"DEFAULT_ORG_ID","REPLACEME@AdobeOrg"),aB(aF,"DEFAULT_ALLOY_NAMESPACE","alloy"),aB(aF,"PAGE_VIEW_EVENT_LABEL","page-view");class aV{constructor(e){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"reporter",void 0),this.reporter=e}}if(!(function(e,t){let r="_already_loaded_"+t,n=!0===e[r];return n||(e[r]=!0),n}(window,"analytics_prod_js")||function(){let e=new URLSearchParams(window.location.search);return"notags"===e.get("testmeasure")||"tagless"===e.get("testmeasure")}())){!function(e,t=e.console){let r=-1!==e.location.search.indexOf("&teste2e=")||"true"===e.localStorage.getItem("teste2e");r&&e.localStorage.setItem("teste2e","true"),(g(e)||r)&&(e.__alloyMonitors=e.__alloyMonitors||[],e.__alloyMonitors.push({onNetworkResponse(t){let{url:r,payload:n}=t;-1!==r.indexOf("smetrics.hpe.com")&&(e.ADOBE_DATA_CALLS=e.ADOBE_DATA_CALLS||[],e.ADOBE_DATA_CALLS.push(n))}}))}(window);let e=new h(window);e.currentState.is_blacklist||function(e,t){var r;/arubainstanton.com/i.test(e.location.hostname)?v(e,y,()=>{}):w(e)?!function(e){if(w(e)&&!/h22174.www2.hpe.com/i.test(e.location.hostname)&&1)v(e,g(e)?"https://d3brryyoc4rul6.cloudfront.net/metrics/bootstrap/prod_b2b_dev.js":"//www.hpe.com/global/metrics/bootstrap/prod_b2b.js",()=>{},!0,!0)}(e):function(e){let t=e.location.hostname;return/investors.hpe.com/i.test(t)}(e)?v(e,"https://www.hpe.com/global/metrics/bootstrap/prod_legacy.js",()=>{}):function(e){let t=e.location.hostname,r=/uatc.buy.hpe.com/.test(t),n=/buy.hpe.com|occ-ext.wip.it.hpe.com/.test(t);return r||n}(e)?(e.aa_loaded_via_prodwsdk=!0,r=e.location.hostname,/uat.?\.buy.hpe.com/i.test(r))?v(e,"https://d3brryyoc4rul6.cloudfront.net/metrics/bootstrap/prod_wsdk_buy_dev.js",()=>{}):v(e,"https://www.hpe.com/global/metrics/bootstrap/prod_wsdk_buy.js",()=>{}):(!function(e){let t=e.location.hostname;return(e.partnerNameProID||/(prp-dxp[^.]*\.it|partner[^.]*.itcs|partner)\.hpe\.com/.test(t))&&!/findapartner\.hpe\.com/.test(t)}(e)?1:(e.document.write('<script type="text/javascript" src="//www.hpe.com/global/metrics/legacy/prod_partner_bootstrap.js"><\/script>'),0))&&(/(arubanetworks|arubainstanton).com$/i.test(e.location.hostname)?v(e,"https://www.hpe.com/global/metrics/bootstrap/prod_aruba.js",()=>{}):t.currentState.is_dev||t.currentState.is_testing?v(e,y,()=>{}):v(e,"https://www.hpe.com/global/metrics/bootstrap/prod_wsdk.js",()=>{}))}(window,e),b(window)&&function(e,t){if(!b(e))return;let r=e.document;try{if(e.location.href.indexOf("feLoaderDisable=1")>0||e.location.href.indexOf("mboxDisable=1")>0)return;if(e.location.hostname.includes("b2b.hpe.com")){let t=r.getElementsByTagName("head")[0],n=r.createElement("script"),i=e.location.href.indexOf("QA_test=DACL")>0?"dev.js":"prod.js";e.location.href.includes("//b2b.hpe.com/")||(i="dev.js"),n.src="https://fe-hpe-script.s3.us-east-2.amazonaws.com/b2b/fe_"+i+"?t="+function(e){let t=new Uint8Array(50);return window.crypto.getRandomValues(t),Array.from(t,e=>e.toString(10)).join("").substring(0,30)}(30),void 0!==t&&t.appendChild(n)}else e.location.href.indexOf("feLoaderDisable=1")>0||e.location.href.indexOf("mboxDisable=1")>0||/local.buy.hpe.com/i.test(location.hostname)||v(e,"https://fe-hpe-script.s3.us-east-2.amazonaws.com/fe_altloader.js",()=>{},!0,!0)}catch(e){}}(window,new class extends aV{info(){}log(){}debug(){}warn(){}error(){}success(){}}(window.console))}})();