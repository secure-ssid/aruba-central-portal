(()=>{"use strict";let e,t,n,r,i,a;var o={117:e=>{var t=function(e){var t={};if(!e||"string"!=typeof e)return t;var n=new URLSearchParams(e.trim().replace(/^[?#&]/,"")),r=n.keys();do{var i=r.next(),a=i.value;if(a){var o=n.getAll(a);1===o.length?t[a]=o[0]:t[a]=o}}while(!1===i.done)return t},n=function(e){var t="{{space}}",n=new URLSearchParams;return Object.keys(e).forEach(function(r){var i=e[r];"string"==typeof e[r]?i=i.replace(/ /g,t):["object","undefined"].includes(typeof i)&&!Array.isArray(i)&&(i=""),Array.isArray(i)?i.forEach(function(e){n.append(r,e)}):n.append(r,i)}),n.toString().replace(RegExp(encodeURIComponent(t),"g"),"%20")};e.exports={parse:function(e){return t(e)},stringify:function(e){return n(e)}}}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return o[e](n,n.exports,l),n.exports}l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};l.r(d),l.d(d,{context:()=>t3,dataCollector:()=>t6,identity:()=>nu,libraryInfo:()=>np});var c={};l.r(c),l.d(c,{activityCollector:()=>nG,advertising:()=>oS,audiences:()=>nX,consent:()=>n3,eventMerge:()=>n9,mediaAnalyticsBridge:()=>rE,personalization:()=>ad,pushNotifications:()=>oO,rulesEngine:()=>aX,streamingMedia:()=>aZ});let u=e=>null!=e&&!Array.isArray(e)&&"object"==typeof e,m=e=>{let t="=".repeat((4-e.length%4)%4),n=atob((e+t).replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(n,e=>e.codePointAt(0))},p=(e,t={})=>{let{urlSafe:n=!1}=t||{},r=btoa(String.fromCharCode(...e));return n?r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):r};function h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var g=function e(t,n){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=h({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in i)i[o]&&(a+="; "+o,!0!==i[o]&&(a+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var a=n[i].split("="),o=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=t.read(o,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",h({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,h({},this.attributes,t))},withConverter:function(t){return e(h({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let f={get:g.get.bind(g),set:g.set.bind(g),remove:g.remove.bind(g),withConverter:g.withConverter.bind(g)},v=(e,t)=>{Object.keys(t).forEach(n=>{if(u(e[n])&&u(t[n]))return void v(e[n],t[n]);e[n]=t[n]})},y=(e,...t)=>{if(null==e)throw TypeError('deepAssign "target" cannot be null or undefined');let n=Object(e);return t.forEach(e=>v(n,Object(e))),n},w=(e,t)=>n=>{y(t.split(".").reduce((e,t)=>(e[t]=e[t]||{},e[t]),e),n)},E=()=>{let e=[];return{add(t){e.push(t)},call:(...t)=>Promise.all(e.map(e=>e(...t)))}},b=({logger:e,cookieJar:t})=>({...t,set:(n,r,i)=>(e.info("Setting cookie",{name:n,value:r,...i}),t.set(n,r,i))}),S=()=>{let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e},I=(e,t)=>e===t,C=(e,t)=>e.appendChild(t),k=(e,t={},n={},r=[],i=document)=>{let a=i.createElement(e);return Object.keys(t).forEach(e=>{a.setAttribute(e,t[e])}),((e,t)=>{Object.keys(t).forEach(n=>{if("style"===n&&u(t[n])){let r=t[n];Object.keys(r).forEach(t=>{e.style[t]=r[t]})}else e[n]=t[n]})})(a,n),r.forEach(e=>C(a,e)),a},D="STYLE",T="SCRIPT",A=({src:e,currentDocument:t=document})=>new Promise((n,r)=>{k("IMG",{src:e},{onload:n,onerror:r,onabort:r},[],t)}),N=e=>Array.isArray(e)&&e.length>0,_=e=>Array.isArray(e)?e:null==e?[]:[].slice.call(e),P=/^\s*>/,O=(e,t)=>P.test(t)?_(e.querySelectorAll(`:scope ${t}`)):_(e.querySelectorAll(t)),R=":shadow",L=(e,t)=>{if(!t.startsWith(">"))return t;let n=e instanceof Element||e instanceof Document?":scope":":host";return`${n} ${t}`},x=(e,t=document)=>-1===e.indexOf(R)?O(t,e):((e,t)=>{let n=t.split(R);if(n.length<2)return O(e,t);let r=e;for(let e=0;e<n.length;e+=1){let t=n[e].trim();if(""===t&&r.shadowRoot){r=r.shadowRoot;continue}let i=L(r,t),a=O(r,i);if(0===a.length||!a[0]||!a[0].shadowRoot)return a;r=a[0].shadowRoot}})(t,e),M="MutationObserver",$={childList:!0,subtree:!0},j=5e3,U=e=>Error(`Could not find: ${e}`),q=e=>new Promise(e),V=(e,t=x,n=j,r=window,i=document)=>{let a=t(e);if(N(a))return Promise.resolve(a);return"function"==typeof r[M]?((e,t,n,r,i)=>q((a,o)=>{let s,l=new e[M](()=>{let e=i(n);N(e)&&(l.disconnect(),s&&clearTimeout(s),a(e))});s=setTimeout(()=>{l.disconnect(),o(U(n))},r),l.observe(t,$)}))(r,i,e,n,t):"visible"===i.visibilityState?((e,t,n,r)=>q((i,a)=>{let o=()=>{let n=r(t);if(N(n))return void i(n);e.requestAnimationFrame(o)};o(),setTimeout(()=>{a(U(t))},n)}))(r,e,n,t):((e,t,n)=>q((r,i)=>{let a=()=>{let t=n(e);if(N(t))return void r(t);setTimeout(a,100)};a(),setTimeout(()=>{i(U(e))},t)}))(e,n,t)},B=(t=document)=>{if(void 0===e){let n=t.querySelector("[nonce]");e=n&&(n.nonce||n.getAttribute("nonce"))}return e},F=(e,t={})=>document.querySelector(`script[src="${e}"]`)?(t.onLoad&&t.onLoad(),Promise.resolve()):new Promise((n,r)=>{let{attributes:i={},onLoad:a,onError:o}=t,s=k("script",{type:"text/javascript",src:e,async:!0,...B()&&{nonce:B()},...i},{onload:()=>{a&&a(),n()},onerror:()=>{let t=Error(`Failed to load script: ${e}`);o&&o(t),r(t)}}),l=()=>{let e=document.head||document.body;if(e)C(e,s);else{let e=Error("Neither <head> nor <body> available for script insertion.");o&&o(e),r(e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()}),z=e=>{let t=e.parentNode;return t?t.removeChild(e):null},H={name:"Adobe Alloy"},J={style:{display:"none",width:0,height:0}},Y=e=>(e=>{let t=0x811c9dc5,n=new TextEncoder().encode(e);for(let e=0;e<n.length;e+=1)t^=n[e],t=Math.imul(t,0x1000193);return t>>>0})(e).toString(16).padStart(8,"0"),G="com.adobe.alloy.",Q=(e,t)=>e.slice(-t),X=`${G}getTld`,W="kndctr",K=e=>e.replace("@","_"),Z=(e,t)=>`${W}_${K(e)}_${t}`,ee=(e,t)=>{let n={};return e.forEach(e=>{let r=t(e);n[r]||(n[r]=[]),n[r].push(e)}),n},et="Chrome",en="Edge",er="EdgeChromium",ei="Unknown",ea=e=>{let t,n=!1;return()=>(n||(n=!0,t=e()),t)},eo=[et,en,er,"IE",ei],es=({getBrowser:e})=>ea(()=>eo.includes(e())),el=({orgId:e})=>{let t=Z(e,"identity");return()=>!!f.get(t)},ed=(e,t,n)=>({getItem(r){try{return e[t].getItem(n+r)}catch{return null}},setItem(r,i){try{return e[t].setItem(n+r,i),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach(r=>{r.startsWith(n)&&e[t].removeItem(r)}),!0}catch{return!1}}}),ec=e=>t=>{let n=G+t;return{session:ed(e,"sessionStorage",n),persistent:ed(e,"localStorage",n)}},eu=e=>u(e)&&0===Object.keys(e).length,em=e=>"number"==typeof e&&!Number.isNaN(e),ep=e=>{let t=parseInt(e,10);return em(t)&&e===t},eh=e=>"string"==typeof e&&e.length>0,eg=()=>{},ef=(e,t)=>null!=e&&u(e)?Object.keys(e).reduce((n,r)=>{let i=e[r];if(u(i)){let e=ef(i,t);return eu(e)?n:{...n,[r]:e}}return t(i)?{...n,[r]:i}:n},{}):e;var ev=l(117);let ey=e=>Array.isArray(e)?e.map(e=>ey(e)):"object"==typeof e&&null!==e?Object.keys(e).sort().reduce((t,n)=>(t[n]=ey(e[n]),t),{}):e,ew=e=>ey(e),eE=e=>e instanceof Error?e:Error(e),eb=({error:e,message:t})=>{try{e.message=t}catch{}},eS=({error:e,message:t})=>{let n=eE(e),r=`${t}
Caused by: ${n.message}`;return eb({error:n,message:r}),n},eI=(e,t)=>{if(em(e)||"string"==typeof e){let t=Math.round(Number(e));if(!Number.isNaN(t))return t}return t},eC=(e,t,n)=>`${e}`.padStart(t,n),ek={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},eD=new Uint8Array(16),eT=[];for(let e=0;e<256;++e)eT.push((e+256).toString(16).slice(1));let eA=function(e,n,r){if(ek.randomUUID&&!n&&!e)return ek.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(eD)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,n){if((r=r||0)<0||r+16>n.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)n[r+e]=i[e];return n}return function(e,t=0){return(eT[e[t+0]]+eT[e[t+1]]+eT[e[t+2]]+eT[e[t+3]]+"-"+eT[e[t+4]]+eT[e[t+5]]+"-"+eT[e[t+6]]+eT[e[t+7]]+"-"+eT[e[t+8]]+eT[e[t+9]]+"-"+eT[e[t+10]]+eT[e[t+11]]+eT[e[t+12]]+eT[e[t+13]]+eT[e[t+14]]+eT[e[t+15]]).toLowerCase()}(i)},eN=e=>function(t,n){return null==t?t:e.call(this,t,n)},e_=(e,t)=>function(n,r){return t.call(this,e.call(this,n,r),r)},eP=(e,t,n)=>Object.assign(e_(e,t),e,n),eO=(e,t,n)=>Object.assign(e_(e,eN(t)),e,n),eR=(e,t,n,r)=>{if(!e)throw Error(`'${n}': Expected ${r}, but got ${JSON.stringify(t)}.`)},eL=(e,t)=>(eR("boolean"==typeof e,e,t,"true or false"),e),ex=(e,t)=>(eR("function"==typeof e,e,t,"a function"),e),eM=(e,t)=>(n,r)=>(eR(n>=t,n,r,`${e} greater than or equal to ${t}`),n),e$=e=>(t,n)=>(u(t)?eR(!eu(t),t,n,e):eR(t.length>0,t,n,e),t),ej=/^[a-z0-9.-]{1,}$/i,eU=(e,t)=>(eR(ej.test(e),e,t,"a valid domain"),e),eq=(e,t)=>(eR(ep(e),e,t,"an integer"),e),eV=(e,t)=>(eR(em(e),e,t,"a number"),e),eB=(e,t)=>(eR((e=>{try{return null!==RegExp(e)}catch{return!1}})(e),e,t,"a regular expression"),e),eF=(e,t)=>{if(null==e)throw Error(`'${t}' is a required option`);return e},ez=(e,t)=>(eR("string"==typeof e,e,t,"a string"),e),eH=e=>e;eH.default=function(e){return eP(this,t=>null==t?e:t)},eH.required=function(){return eP(this,eF)},eH.deprecated=function(e){return eP(this,((e="This field has been deprecated")=>function(t,n){let r=e;return void 0!==t&&(n&&(r=`'${n}': ${r}`),this&&this.logger&&this.logger.warn(r)),t})(e))};let eJ=function(){return eO(this,eU)},eY=function(e){return eO(this,eM("an integer",e))},eG=function(e){return eO(this,eM("a number",e))},eQ=function(e){return eO(this,(t,n)=>(eR(t<=e,t,n,`a number less than or equal to ${e}`),t))},eX=function(){return eO(this,eq,{minimum:eY})},eW=function(){return eO(this,e$("a non-empty string"))},eK=function(){return eO(this,e$("a non-empty array"))},eZ=function(){return eO(this,e$("a non-empty object"))},e0=function(){return eO(this,eB)},e1=function(e){return eO(this,(t,n)=>(eR(e.test(t),t,n,`does not match the ${e.toString()}`),t))},e2=function(){return eO(this,(()=>{let e=[];return(t,n)=>(eR(-1===e.indexOf(t),t,n,"a unique value across instances"),e.push(t),t)})())},e5=function(){return eO(this,(e,t)=>(eR((e=>{let t=Object.create(null);for(let n=0;n<e.length;n+=1){let r=e[n];if(r in t)return!1;t[r]=!0}return!0})(e),e,t,"array values to be unique"),e))},e3=e=>({noUnknownFields:function(){return eO(this,(t,n)=>{let r=[];if(Object.keys(t).forEach(t=>{if(!e[t]){let e=n?`${n}.${t}`:t;r.push(`'${e}': Unknown field.`)}}),r.length)throw Error(r.join(`
`));return t})},nonEmpty:eZ,concat:function(t){let n={...e,...t.schema};return eO(this,t,e3(n))},renamed:function(e,t,n){var r;let i,a;return Object.assign((i=eN(function(r,i){eR(u(r),r,i,"an object");let{[e]:a,[n]:o,...s}=r,l=t(a,i);if(void 0!==l){let t=`The field '${e}' is deprecated. Use '${n}' instead.`;if(i&&(t=`'${i}': ${t}`),void 0!==o&&o!==l)throw Error(t);this&&this.logger&&this.logger.warn(t)}return{[n]:o||l,...s}}),a=this,function(e,t){let n=[],r=[i,a].reduce((e,r)=>{try{return r.call(this,e,t)}catch(t){return n.push(t),e}},e);if(n.length)throw Error(n.join(`
`));return r}),this,r)},schema:e}),e4=(function(e,t){return eP(this,function(n,r){let i;return eR(e.find(e=>{try{return i=e.call(this,n,r),!0}catch{return!1}}),n,r,t),i})}).bind(eH),e6=(function(){return this}).bind(eH),e9=(function(e){return eO(this,function(t,n){eR(Array.isArray(t),t,n,"an array");let r=[],i=t.map((i,a)=>{try{return e.call(this,i,`${n}[${a}]`,t)}catch(e){r.push(e.message);return}});if(r.length)throw Error(r.join(`
`));return i},{nonEmpty:eK,uniqueItems:e5})}).bind(eH),e7=(function(){return eO(this,eL)}).bind(eH),e8=(function(){return eO(this,ex)}).bind(eH),te=(function(e){return eO(this,(t,n)=>(eR(t===e,t,n,`${e}`),t))}).bind(eH),tt=(function(){return eO(this,eV,{minimum:eG,maximum:eQ,integer:eX,unique:e2})}).bind(eH),tn=(function(e){return eO(this,function(t,n){eR(u(t),t,n,"an object");let r=[],i={};if(Object.keys(t).forEach(a=>{let o=t[a],s=n?`${n}.${a}`:a;try{let t=e.call(this,o,s);void 0!==t&&(i[a]=t)}catch(e){r.push(e.message)}}),r.length)throw Error(r.join(`
`));return i},{nonEmpty:eZ})}).bind(eH),tr=(function(e){return eO(this,function(t,n){eR(u(t),t,n,"an object");let r=[],i={};if(Object.keys(e).forEach(a=>{let o=t[a],s=e[a],l=n?`${n}.${a}`:a;try{let e=s.call(this,o,l);void 0!==e&&(i[a]=e)}catch(e){r.push(e.message)}}),Object.keys(t).forEach(e=>{Object.prototype.hasOwnProperty.call(i,e)||(i[e]=t[e])}),r.length)throw Error(r.join(`
`));return i},e3(e))}).bind(eH),ti=(function(){return eO(this,ez,{regexp:e0,domain:eJ,nonEmpty:eW,unique:e2,matches:e1})}).bind(eH),ta=function(...e){return e4(e.map(te),`one of these values: ${JSON.stringify(e)}`)},to=tn(e9(tr({authenticatedState:ta("ambiguous","authenticated","loggedOut"),id:ti(),namespace:tr({code:ti()}).noUnknownFields(),primary:e7(),xid:ti()}).noUnknownFields()).required()),ts=tr({}),tl="alloy_debug",td=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],tc=(e,t)=>(...n)=>{let r;try{r=e(...n)}catch(e){throw eS({error:e,message:t})}return r instanceof Promise&&(r=r.catch(e=>{throw eS({error:e,message:t})})),r},tu=(e,t)=>{let n,r=0,i=0;do{if(t<0||t+i>=e.length)throw Error("Invalid varint: buffer ended unexpectedly");if(r|=(127&(n=e[t+i]))<<7*i,(i+=1)>10)throw Error("Invalid varint: too long")}while(128&n)return{value:r,length:i}},tm=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),tp="pending",th="disabled",tg="wait",tf="auto",tv="general",ty="declinedConsent",tw="default",tE="initial",tb=e=>{let t=Error(e);return t.code=ty,t.message=e,t},tS=e=>e&&e._experience&&e._experience.decisioning&&N(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[],tI=()=>{let e,t,n={},r=!1,i=!1,a=!0,o=e=>{if(i)throw Error(`${e} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){let r=JSON.parse(JSON.stringify(n));return e&&y(r,{xdm:e}),t&&y(r,{data:t}),r},setUserXdm(t){o("setUserXdm"),e=t},setUserData(e){o("setUserData"),t=e},mergeXdm(e){o("mergeXdm"),e&&y(n,{xdm:e})},mergeData(e){o("mergeData"),e&&y(n,{data:e})},mergeMeta(e){o("mergeMeta"),e&&y(n,{meta:e})},mergeQuery(e){o("mergeQuery"),e&&y(n,{query:e})},documentMayUnload(){r=!0},finalize(r){if(i)return;let o=((e,t=I)=>e.filter((n,r)=>((e,t,n)=>{for(let r=0;r<e.length;r+=1)if(n(e[r],t))return r;return -1})(e,n,t)===r))([...tS(e),...tS(n.xdm)],(e,t)=>e===t||e.id&&t.id&&e.id===t.id&&e.scope&&t.scope&&e.scope===t.scope);if(e&&this.mergeXdm(e),o.length>0&&(n.xdm._experience.decisioning.propositions=o),t&&s.mergeData(t),i=!0,r){a=!1;let e={xdm:n.xdm||{},data:n.data||{}};a=!1!==r(e),n.xdm=e.xdm||{},n.data=e.data||{},eu(n.xdm)&&delete n.xdm,eu(n.data)&&delete n.data}},getDocumentMayUnload:()=>r,isEmpty:()=>eu(n)&&(!e||eu(e))&&(!t||eu(t)),shouldSend:()=>a,getViewName(){if(e&&e.web&&e.web.webPageDetails)return e.web.webPageDetails.viewName},toJSON(){if(!i)throw Error("toJSON called before finalize");return n}};return s},tC="configure",tk="setDebug",tD=({command:e,options:t})=>{let{commandName:n,documentationUri:r="https://adobe.ly/3sHgQHb",optionsValidator:i}=e,a=t;if(i)try{a=i(t)}catch(e){throw Error(`Invalid ${n} command options:
	 - ${e} For command documentation see: ${r}`)}return a},tT=e=>({...e}),tA=({errorPrefix:e,logger:t})=>(n,r)=>{let i=eE(n);if(i.code===ty)return t.warn(`The ${r} could not fully complete. ${i.message}`),{};throw eb({error:i,message:`${e} ${i.message}`}),i},tN="__view__",t_=e=>(t,n)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(n)},tP=e=>{let{payload:t,getAction:n,getUseSendBeacon:r,datastreamIdOverride:i,edgeSubPath:a}=e,o=eA(),s=!1,l=!1;return{getId:()=>o,getPayload:()=>t,getAction:()=>n({isIdentityEstablished:l}),getDatastreamIdOverride:()=>i,getUseSendBeacon:()=>r({isIdentityEstablished:l}),getEdgeSubPath:()=>a||"",getUseIdThirdPartyDomain:()=>s,setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){l=!0}}},tO=({payload:e,datastreamIdOverride:t})=>{let n=({isIdentityEstablished:t})=>e.getDocumentMayUnload()&&t;return tP({payload:e,getAction:({isIdentityEstablished:e})=>n({isIdentityEstablished:e})?"collect":"interact",getUseSendBeacon:n,datastreamIdOverride:t})},tR=e=>{let{content:t,addIdentity:n,hasIdentity:r}=e,i=e=>{Object.assign("meta.configOverrides".split(".").reduce((e,t)=>(e[t]=e[t]||{},e[t]),t),e)};return{mergeMeta:w(t,"meta"),mergeState:w(t,"meta.state"),mergeQuery:w(t,"query"),mergeConfigOverride:e=>i((e=>{if(null==e||"object"!=typeof e)return null;let t=ef(e,e=>null!=e&&!!("boolean"==typeof e||em(e)||eh(e)||N(e)));return eu(t)?null:t})(e)),addIdentity:n,hasIdentity:r,toJSON:()=>t}},tL=e=>t=>(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t])!==void 0,tx=()=>{let e={};return{...tR({content:e,addIdentity:t_(e),hasIdentity:tL(e)}),addEvent:t=>{e.events=e.events||[],e.events.push(t)},getDocumentMayUnload:()=>(e.events||[]).some(e=>e.getDocumentMayUnload())}},tM=({localConfigOverrides:e,globalConfigOverrides:t,payload:n})=>{let r={payload:n},{datastreamId:i,...a}=e||{};return i&&(r.datastreamIdOverride=i),t&&!eu(t)&&n.mergeConfigOverride(t),a&&!eu(a)&&n.mergeConfigOverride(a),r},t$="clientId",tj="Event was canceled because the onBeforeEventSend callback returned false.",tU=e=>{let t=e.shift()||[];return((...e)=>e.length<2?Object.assign(...e):e.reduce((e,t)=>(u(t)&&Object.keys(t).forEach(n=>{Array.isArray(t[n])?Array.isArray(e[n])?e[n].push(...t[n]):e[n]=[...t[n]]:e[n]=t[n]}),e)))({},...t,...e.shift()||[],...e)},tq=e=>t=>{let n=()=>{throw t};return e.call({error:t}).then(n,n)},tV="The server responded with a",tB=[429,503,502,504],tF=({response:e,retriesAttempted:t})=>t<3&&tB.includes(e.statusCode),tz=({response:e,retriesAttempted:t})=>{let n=(e=>{let t,n=e.getHeader("Retry-After");if(n){let e=parseInt(n,10);t=ep(e)?1e3*e:Math.max(0,new Date(n).getTime()-new Date().getTime())}return t})(e);return void 0===n&&(n=(e=>{let t=1e3+1e3*e,n=.3*t,r=t-n;return Math.round(r+Math.random()*(t+n-r))})(t)),n},tH=e=>t=>{y(t,{timestamp:e().toISOString()})},tJ="2.30.0",tY=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]],tG=(e=>t=>{y(t,{web:{webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}}})})(window),tQ=(e=>t=>{let{screen:{width:n,height:r}}=e,i={},a=eI(r);a>=0&&(i.screenHeight=a);let o=eI(n);o>=0&&(i.screenWidth=o);let s=(e=>{let{screen:{orientation:t}}=e;if(null==t||null==t.type)return null;let n=t.type.split("-");return 0===n.length||"portrait"!==n[0]&&"landscape"!==n[0]?null:n[0]})(e)||(e=>{if("function"==typeof e.matchMedia){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null})(e);s&&(i.screenOrientation=s),Object.keys(i).length>0&&y(t,{device:i})})(window),tX=(i=window,e=>{let{document:{documentElement:{clientWidth:t,clientHeight:n}={}}}=i,r={type:"browser"},a=eI(t);a>=0&&(r.browserDetails={viewportWidth:a});let o=eI(n);o>=0&&(r.browserDetails=r.browserDetails||{},r.browserDetails.viewportHeight=o),y(e,{environment:r})}),tW=(a=()=>new Date,e=>{let t=a(),n={},r=eI(t.getTimezoneOffset());void 0!==r&&(n.localTimezoneOffset=r),(void 0===r||6e3>Math.abs(r))&&(n.localTime=(e=>{let t=e.getFullYear(),n=eC(e.getMonth()+1,2,"0"),r=eC(e.getDate(),2,"0"),i=eC(e.getHours(),2,"0"),a=eC(e.getMinutes(),2,"0"),o=eC(e.getSeconds(),2,"0"),s=eC(e.getMilliseconds(),3,"0"),l=eI(e.getTimezoneOffset(),0),d=eC(Math.floor(Math.abs(l)/60),2,"0"),c=eC(Math.abs(l)%60,2,"0");return`${t}-${n}-${r}T${i}:${a}:${o}.${s}${l>0?"-":"+"}${d}:${c}`})(t)),y(e,{placeContext:n})}),tK=tH(()=>new Date),tZ=(e=>"userAgentData"in e?(t,n)=>{try{return e.userAgentData.getHighEntropyValues(tY.map(e=>e[0])).then(e=>{let n={};tY.forEach(([t,r])=>{Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===r&&(n[t]=e[t])}),y(t,{environment:{browserDetails:{userAgentClientHints:n}}})})}catch(e){return n.warn(`Unable to collect user-agent client hints. ${e.message}`),eg}}:eg)(navigator),t0={web:tG,device:tQ,environment:tX,placeContext:tW},t1={...t0,highEntropyUserAgentHints:tZ},t2=[tK,e=>{y(e,{implementationDetails:{name:"https://ns.adobe.com/experience/alloy",version:tJ,environment:"browser"}})}],t5=({config:e,logger:t})=>((e,t,n,r)=>{let i=e.context.flatMap((e,r)=>n[e]?[n[e]]:(t.warn(`Invalid context[${r}]: '${e}' is not available.`),[])).concat(r);return{namespace:"Context",lifecycle:{onBeforeEvent({event:e}){let n={};return Promise.all(i.map(e=>Promise.resolve(e(n,t)))).then(()=>e.mergeXdm(n))}}}})(e,t,t1,t2);t5.namespace="Context",t5.configValidators=tr({context:e9(ti()).default(Object.keys(t0))});let t3=t5,t4=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:e=>(({options:e})=>tr({type:ti(),xdm:tr({eventType:ti(),identityMap:to}),data:tr({}),documentUnloading:e7(),renderDecisions:e7(),decisionScopes:e9(ti()).uniqueItems(),personalization:tr({decisionScopes:e9(ti()).uniqueItems(),surfaces:e9(ti()).uniqueItems(),sendDisplayEvent:e7().default(!0),includeRenderedPropositions:e7().default(!1),defaultPersonalizationEnabled:e7(),decisionContext:tr({})}).default({sendDisplayEvent:!0}),datasetId:ti(),mergeId:ti(),edgeConfigOverrides:ts,advertising:tr({handleAdvertisingData:ta(th,tg,tf).default(th)})}).required().noUnknownFields()(e))({options:e}),run:n=>{let{xdm:r,data:i,documentUnloading:a,type:o,mergeId:s,datasetId:l,edgeConfigOverrides:d,...c}=n,u=e.createEvent();return a&&u.documentMayUnload(),u.setUserXdm(r),u.setUserData(i),o&&u.mergeXdm({eventType:o}),s&&u.mergeXdm({eventMergeId:s}),d&&(c.edgeConfigOverrides=d),l&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),c.edgeConfigOverrides=d||{},y(c.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:l}}}})),e.sendEvent(u,c)}},applyResponse:{documentationUri:"",optionsValidator:e=>(({options:e})=>tr({renderDecisions:e7(),responseHeaders:tn(ti().required()),responseBody:tr({handle:e9(tr({type:ti().required(),payload:e6().required()})).required()}).required(),personalization:tr({sendDisplayEvent:e7().default(!0),decisionContext:tr({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e))({options:e}),run:t=>{let{renderDecisions:n=!1,decisionContext:r={},responseHeaders:i={},responseBody:a={handle:[]},personalization:o}=t,s=e.createEvent();return e.applyResponse(s,{renderDecisions:n,decisionContext:r,responseHeaders:i,responseBody:a,personalization:o})}}}});t4.namespace="DataCollector";let t6=t4,t9=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`,t7=tr({thirdPartyCookiesEnabled:e7().default(!0),idMigrationEnabled:e7().default(!0)}),t8=tr({url:ti().required().nonEmpty(),edgeConfigOverrides:ts}).required().noUnknownFields(),ne="ECID",nt=({logger:e})=>new Promise((t,n)=>{if(u(window.adobe)&&u(window.adobe.optIn)){let r=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),r.fetchPermissions(()=>{r.isApproved([r.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):n(Error("Legacy opt-in was declined."))},!0)}else t()}),nn="CORE",nr=e=>{try{return decodeURIComponent(e)}catch{return""}},ni=(e,t)=>{e.addIdentity(ne,{id:t})},na=e=>e.getPayloadsByType("identity:result").reduce((e,t)=>(t.namespace&&t.namespace.code&&(e[t.namespace.code]=t.id),e),{}),no=({payload:e,datastreamIdOverride:t})=>tP({payload:e,datastreamIdOverride:t,getAction:()=>"identity/acquire",getUseSendBeacon:()=>!1}),ns=e=>{let t={query:{identity:{fetch:e}}};return tR({content:t,addIdentity:t_(t),hasIdentity:tL(t)})},nl=/^([^?#]*)(\??[^#]*)(#?.*)$/,nd=tr({namespaces:e9(ta(ne,nn)).nonEmpty().uniqueItems().default([ne]),edgeConfigOverrides:ts}).noUnknownFields().default({namespaces:[ne]}),nc=({config:e,logger:t,consent:n,fireReferrerHideableImage:r,sendEdgeNetworkRequest:i,apexDomain:a,getBrowser:o,identity:s})=>{let{orgId:l,thirdPartyCookiesEnabled:d,edgeConfigOverrides:c}=e,u=(({config:e,getEcidFromVisitor:t,apexDomain:n,isPageSsl:r,cookieJar:i})=>{let{idMigrationEnabled:a,orgId:o}=e,s=`AMCV_${o}`,l=()=>{let e=null,t=i.get("s_ecid")||i.get(s);if(t){let n=t.match(/(^|\|)MCMID\|(\d+)($|\|)/);n&&(e=n[2])}return e};return{getEcid(){if(a){let e=l();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid(e){a&&l()!==e&&i.set(s,`MCMID|${e}`,{domain:n,expires:390,...r?{sameSite:"none",secure:!0}:{}})}}})({config:e,getEcidFromVisitor:(({logger:e,orgId:t,awaitVisitorOptIn:n})=>()=>{let r=(e=>{let t=e.Visitor;return"function"==typeof t&&"function"==typeof t.getInstance&&t})(window);return r?n({logger:e}).then(()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise(n=>{r.getInstance(t,{}).getMarketingCloudVisitorID(t=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),n(t)},!0)}))).catch(t=>{t?e.info(`${t.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")}):Promise.resolve()})({logger:t,orgId:l,awaitVisitorOptIn:nt}),apexDomain:a,cookieJar:b({logger:t,cookieJar:f}),isPageSsl:"https:"===window.location.protocol}),m=el({orgId:l}),p=(({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:n,globalConfigOverrides:r})=>({namespaces:i,edgeConfigOverrides:a}={})=>e({request:n(tM({payload:t(i),globalConfigOverrides:r,localConfigOverrides:a}))}))({sendEdgeNetworkRequest:i,createIdentityRequestPayload:ns,createIdentityRequest:no,globalConfigOverrides:c}),h=es({getBrowser:o}),g=(({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>n=>{e&&t()&&n.setUseIdThirdPartyDomain()})({thirdPartyCookiesEnabled:d,areThirdPartyCookiesSupportedByDefault:h}),v=(({getLegacyEcid:e,addEcidToPayload:t})=>n=>n.hasIdentity(ne)?Promise.resolve():e().then(e=>{e&&t(n,e)}))({getLegacyEcid:u.getEcid,addEcidToPayload:ni}),y=(({locationSearch:e,dateProvider:t,orgId:n,logger:r})=>i=>{if(i.hasIdentity(ne))return;let a=ev.parse(e).adobe_mc;if(void 0===a)return;Array.isArray(a)&&(r.warn("Found multiple adobe_mc query string paramters, only using the last one."),a=a[a.length-1]);let o=a.split("|").reduce((e,t)=>{let[n,r]=t.split("=");return e[n]=nr(r),e[n]=e[n].replace(/[^a-zA-Z0-9@.]/g,""),e},{}),s=parseInt(o.TS,10),l=o.MCMID,d=nr(o.MCORGID);t().getTime()/1e3<=s+300&&d===n&&l?(r.info(`Found valid ECID identity ${l} from the adobe_mc query string parameter.`),i.addIdentity(ne,{id:l})):r.info("Detected invalid or expired adobe_mc query string parameter.")})({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:l,logger:t}),w=(({doesIdentityCookieExist:e,orgId:t,logger:n})=>({onResponse:r,onRequestFailure:i})=>new Promise((a,o)=>{r(()=>{e()?a():(n.warn(`Identity cookie not found. This could be caused by any of the following issues:
	* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.
	* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.
	* The request was canceled by the browser and not fully processed.`),o(Error("Identity cookie not found.")))}),i(()=>{e()?a():o(Error("Identity cookie not found."))})}))({doesIdentityCookieExist:m,orgId:l,logger:t}),E=(({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:n,awaitIdentityCookie:r,logger:i})=>{let a,o=e=>(t(e),n(e.getPayload()));return({request:t,onResponse:n,onRequestFailure:s})=>{if(e())return t.setIsIdentityEstablished(),Promise.resolve();if(a){i.info("Delaying request while retrieving ECID from server.");let e=a;return(a=e.catch(()=>r({onResponse:n,onRequestFailure:s}))).catch(()=>{}),e.then(()=>{i.info("Resuming previously delayed request."),t.setIsIdentityEstablished()}).catch(()=>o(t))}return(a=r({onResponse:n,onRequestFailure:s})).catch(()=>{}),o(t)}})({doesIdentityCookieExist:m,setDomainForInitialIdentityPayload:g,addLegacyEcidToPayload:v,awaitIdentityCookie:w,logger:t}),S=(({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange")))({processIdSyncs:(({fireReferrerHideableImage:e,logger:t})=>n=>{let r=n.filter(e=>"url"===e.type);return r.length?Promise.all(r.map(n=>e(n.spec).then(()=>{t.info(t9(n,!0))}).catch(()=>{t.error(t9(n,!1))}))).then(eg):Promise.resolve()})({fireReferrerHideableImage:r,logger:t})}),I=(({dateProvider:e,orgId:t})=>(n,r)=>{let i=Math.round(e().getTime()/1e3),a=encodeURIComponent(`TS=${i}|MCMID=${n}|MCORGID=${encodeURIComponent(t)}`),[,o,s,l]=r.match(nl),d=(e=>""===e?"?":"?"===e?"":"&")(s);return`${o}${s}${d}adobe_mc=${a}${l}`})({dateProvider:()=>new Date,orgId:l,globalConfigOverrides:c}),C=(({thirdPartyCookiesEnabled:e})=>t=>{let n=nd(t);if(!e&&n.namespaces.includes(nn))throw Error(`namespaces: The ${nn} namespace cannot be requested when third-party cookies are disabled.`);return n})({thirdPartyCookiesEnabled:d});return(({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:n,setLegacyEcid:r,handleResponseForIdSyncs:i,getNamespacesFromResponse:a,getIdentity:o,consent:s,appendIdentityToUrl:l,logger:d,identity:c,getIdentityOptionsValidator:u})=>{let m,p={};return{lifecycle:{onBeforeRequest:({request:r,onResponse:i,onRequestFailure:a})=>(e(r.getPayload()),t(r.getPayload()),n({request:r,onResponse:i,onRequestFailure:a})),onResponse({response:e}){let t=a(e);return(!m||!m[ne])&&t&&t[ne]&&r(t[ne]),t&&Object.keys(t).length>0&&(m={...m,...t}),p={...p,...e.getEdge()},c.setIdentityAcquired(),i(e)}},commands:{getIdentity:{optionsValidator:u,run:e=>{let{namespaces:t}=e;return s.awaitConsent().then(()=>{if(m)return;let n=c.getEcidFromCookie();if(!(n&&t.includes(ne))||(m||(m={}),m[ne]=n,1!==t.length))return o(e)}).then(()=>({identity:t.reduce((e,t)=>(e[t]=m[t]||null,e),{}),edge:p}))}},appendIdentityToUrl:{optionsValidator:t8,run:e=>s.withConsent().then(()=>{if(m)return;let t=c.getEcidFromCookie();if(t){m||(m={}),m[ne]=t;return}return o(e)}).then(()=>({url:l(m[ne],e.url)})).catch(t=>(d.warn(`Unable to append identity to url. ${t.message}`),e))}}}})({addEcidQueryToPayload:(({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{let n={identity:{fetch:[ne]}};return e&&t()&&n.identity.fetch.push(nn),e=>{e.mergeQuery(n)}})({thirdPartyCookiesEnabled:d,areThirdPartyCookiesSupportedByDefault:h}),addQueryStringIdentityToPayload:y,ensureSingleIdentity:E,setLegacyEcid:u.setEcid,handleResponseForIdSyncs:S,getNamespacesFromResponse:na,getIdentity:p,consent:n,identity:s,appendIdentityToUrl:I,logger:t,config:e,getIdentityOptionsValidator:C})};nc.namespace="Identity",nc.configValidators=t7;let nu=nc,nm=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:(({config:e,componentRegistry:t})=>{let n=[...t.getCommandNames(),tC,tk].sort(),r={...e};return Object.keys(e).forEach(t=>{let n=e[t];"function"==typeof n&&(r[t]=n.toString())}),{version:tJ,configs:r,commands:n,components:t.getComponentNames()}})({config:e,componentRegistry:t})})}}});nm.namespace="LibraryInfo";let np=nm,nh=ec(window),{console:ng,fetch:nf,navigator:nv}=window,ny=tr({debugEnabled:e7().default(!1),datastreamId:ti().unique().required(),edgeDomain:ti().domain().default("edge.adobedc.net"),edgeBasePath:ti().nonEmpty().default("ee"),orgId:ti().unique().required(),onBeforeEventSend:e8().default(eg),edgeConfigOverrides:ts}).renamed("edgeConfigId",ti().unique(),"datastreamId"),nw=((e,t)=>{let n="",r=e.location.hostname.toLowerCase().split("."),i=1;for(;i<r.length&&!t.get(X);)i+=1,n=Q(r,i).join("."),t.set(X,X,{domain:n});return t.remove(X,{domain:n}),n})(window,f),nE=(({fetch:e})=>(t,n)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:n}).then(e=>e.text().then(t=>({statusCode:e.status,getHeader:t=>e.headers.get(t),body:t}))))({fetch:nf}),nb=(({appendNode:e=C,awaitSelector:t=V,createNode:n=k,fireImage:r=A}={})=>{let i;return a=>{let{hideReferrer:o,url:s}=a;return o?(({src:a})=>t("BODY").then(([t])=>i||e(t,i=n("IFRAME",H,J))).then(e=>r({src:a,currentDocument:e.contentWindow.document})))({src:s}):r({src:s})}})(),nS=(({window:e,createNamespacedStorage:t})=>{let n=t("validation.");return()=>{let t=ev.parse(e.location.search).adb_validation_sessionid;if(!t)return"";let r=(e=>{let t=e.persistent.getItem(t$);return t||(t=eA(),e.persistent.setItem(t$,t)),t})(n),i=`${t}|${r}`;return`&${ev.stringify({adobeAepValidationToken:i})}`}})({window,createNamespacedStorage:nh}),nI=(({userAgent:e})=>ea(()=>((e,t)=>{let n=Object.keys(e);for(let r=0;r<n.length;r+=1){let i=n[r];if(e[i].test(t))return i}return ei})({[en]:/Edge\/([0-9\._]+)/,[er]:/Edg\/([0-9\.]+)/,[et]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,Firefox:/Firefox\/([0-9\.]+)(?:\s|$)/,IE:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,Safari:/Version\/([0-9\._]+).*Safari/},e)))({userAgent:window.navigator.userAgent}),nC=({getDebugEnabled:e,console:t,getMonitors:n,context:r})=>{let i=`[${r.instanceName}]`;r.componentName&&(i+=` [${r.componentName}]`);let a=(e,t)=>{let i=n();if(i.length>0){let n={...r,...t};i.forEach(t=>{t[e]&&t[e](n)})}},o=(n,...r)=>{a("onBeforeLog",{level:n,arguments:r}),e()&&t[n](i,...r)};return{get enabled(){return n().length>0||e()},logOnInstanceCreated(e){a("onInstanceCreated",e),o("info","Instance initialized.")},logOnInstanceConfigured(e){a("onInstanceConfigured",e),o("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand(e){a("onBeforeCommand",e),o("info",`Executing ${e.commandName} command. Options:`,e.options)},logOnCommandResolved(e){a("onCommandResolved",e),o("info",`${e.commandName} command resolved. Result:`,e.result)},logOnCommandRejected(e){a("onCommandRejected",e),o("error",`${e.commandName} command was rejected. Error:`,e.error)},logOnBeforeNetworkRequest(e){a("onBeforeNetworkRequest",e),o("info",`Request ${e.requestId}: Sending request.`,e.payload)},logOnNetworkResponse(e){a("onNetworkResponse",e);let t=e.parsedBody||e.body?"response body:":"no response body.";o("info",`Request ${e.requestId}: Received response with status code ${e.statusCode} and ${t}`,e.parsedBody||e.body)},logOnNetworkError(e){a("onNetworkError",e),o("error",`Request ${e.requestId}: Network request failed.`,e.error)},logOnContentHiding(e){a("onContentHiding",{status:e.status}),o(e.logLevel,e.message)},logOnContentRendering(e){a("onContentRendering",{status:e.status,payload:e.detail}),o(e.logLevel,e.message)},info:o.bind(null,"info"),warn:o.bind(null,"warn"),error:o.bind(null,"error")}},nk=e=>{let t=window.__alloyMonitors||[];return e&&(t=t.concat(e)),t},nD="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",nT=ti().regexp().default(nD),nA=tr({clickCollectionEnabled:e7().default(!0),clickCollection:tr({internalLinkEnabled:e7().default(!0),externalLinkEnabled:e7().default(!0),downloadLinkEnabled:e7().default(!0),sessionStorageEnabled:e7().default(!1),eventGroupingEnabled:e7().default(!1),filterClickProperties:e8()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:nT,onBeforeLinkClickSend:e8().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),nN=(e=document)=>null!==e.getElementById("cppXYctnr"),n_=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname},nP=({properties:e,logger:t}={})=>{let n=e||{};return{get pageName(){return n.pageName},set pageName(value){n.pageName=value},get linkName(){return n.linkName},set linkName(value){n.linkName=value},get linkRegion(){return n.linkRegion},set linkRegion(value){n.linkRegion=value},get linkType(){return n.linkType},set linkType(value){n.linkType=value},get linkUrl(){return n.linkUrl},set linkUrl(value){n.linkUrl=value},get pageIDType(){return n.pageIDType},set pageIDType(value){n.pageIDType=value},get clickedElement(){return n.clickedElement},set clickedElement(value){n.clickedElement=value},get properties(){return{pageName:n.pageName,linkName:n.linkName,linkRegion:n.linkRegion,linkType:n.linkType,linkUrl:n.linkUrl,pageIDType:n.pageIDType}},isValidLink:()=>!!n.linkUrl&&!!n.linkType&&!!n.linkName&&!!n.linkRegion,isInternalLink(){return this.isValidLink()&&"other"===n.linkType},isValidActivityMapData:()=>!!n.pageName&&!!n.linkName&&!!n.linkRegion&&void 0!==n.pageIDType,get xdm(){if(n.filteredXdm)return n.filteredXdm;return(e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}))(this)},get data(){if(n.filteredData)return n.filteredData;return(e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}))(this)},applyPropertyFilter(e){e&&!1===e(n)&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),n={})},applyOptionsFilter(e){let r=this.options;if(r&&r.clickedElement&&(r.xdm||r.data)){if(e&&!1===e(r)){t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),this.options=void 0;return}this.options=r,n.filteredXdm=r.xdm,n.filteredData=r.data}},get options(){let e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),!e.xdm&&!e.data)return;return e},set options(value){n={},value&&((e,t)=>{let{xdm:n,data:r,clickedElement:i}=e;if(t.clickedElement=i,n&&n.web&&n.web.webInteraction){let{name:e,region:r,type:i,URL:a}=n.web.webInteraction;t.linkName=e,t.linkRegion=r,t.linkType=i,t.linkUrl=a}if(r&&r.__adobe&&r.__adobe.analytics){let{contextData:e}=r.__adobe.analytics;if(e&&e.a&&e.a.activitymap){let{page:n,link:r,region:i,pageIDType:a}=e.a.activitymap;t.pageName=n||t.pageName,t.linkName=r||t.linkName,t.linkRegion=i||t.linkRegion,void 0!==a&&(t.pageIDType=a)}}})(value,n)}}},nO="clickData",nR=e=>e&&e.replace(/\s+/g," ").trim(),nL=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,nx=e=>{let t=[],n=!1;return(e=>!(e&&e.nodeName&&e.nodeName.match(nL)))(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach(e=>{let r=nx(e);t=t.concat(r.supportedNodes),n=n||r.includesUnsupportedNodes})):n=!0,{supportedNodes:t,includesUnsupportedNodes:n}},nM=(e,t,n)=>{let r;return n&&n!==e.nodeName.toUpperCase()||(r=e.getAttribute(t)),r},n$=/^(HEADER|MAIN|FOOTER|NAV)$/i,nj=e=>{let t;return"region"===e.role&&eh(e["aria-label"])&&(t=e["aria-label"]),t},nU=e=>{let t;return e&&e.nodeName&&e.nodeName.match(n$)&&(t=e.nodeName),t},nq=e=>!!(e.href&&("A"===e.tagName||"AREA"===e.tagName)&&(!e.onclick||!e.protocol||0>e.protocol.toLowerCase().indexOf("javascript"))),nV=e=>!!e&&!!e.onclick,nB=e=>{if("INPUT"===e.tagName){let t=e.getAttribute("type");if("submit"===t||"image"===t&&e.src)return!0}return!1},nF=e=>"BUTTON"===e.tagName&&"submit"===e.type,nz=e=>{let t=e.indexOf("?"),n=e.indexOf("#");return t>=0&&(t<n||n<0)?e.substring(0,t):n>=0?e.substring(0,n):e},nH=(({window:e,getLinkName:t,getLinkRegion:n,getAbsoluteUrlFromAnchorElement:r,findClickableElement:i,determineLinkType:a})=>({clickedElement:o,config:s,logger:l,clickActivityStorage:d})=>{let{onBeforeLinkClickSend:c,clickCollection:u}=s,{filterClickDetails:m}=u,p=nP({logger:l});if(o){let l=i(o);if(l){p.clickedElement=o,p.linkUrl=r(e,l),p.linkType=a(e,s,p.linkUrl,l),p.linkRegion=n(l),p.linkName=t(l),p.pageIDType=0,p.pageName=e.location.href;let i=d.load();i&&i.pageName&&(p.pageName=i.pageName,p.pageIDType=1),m?p.applyPropertyFilter(m):c&&p.applyOptionsFilter(c)}}return p})({window,getLinkName:e=>{let t=nR(e.innerText||e.textContent),n=nx(e);if(!t||n.includesUnsupportedNodes){let e=(e=>{let t={texts:[]};return e.supportedNodes.forEach(e=>{e.getAttribute&&(t.alt||(t.alt=nR(e.getAttribute("alt"))),t.title||(t.title=nR(e.getAttribute("title"))),t.inputValue||(t.inputValue=nR(nM(e,"value","INPUT"))),t.imgSrc||(t.imgSrc=nR(nM(e,"src","IMG")))),e.nodeValue&&t.texts.push(e.nodeValue)}),t})(n);(t=nR(e.texts.join("")))||(t=e.alt||e.title||e.inputValue||e.imgSrc)}return t||""},getLinkRegion:e=>{let t,n=e.parentNode;for(;n;){if(t=nR(n.id||nj(n)||nU(n)))return t;n=n.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:(e,t)=>{let n=e.location.href,r=t.href||"";"string"!=typeof r&&(r="");try{return new URL(r,n).href}catch{return n}},findClickableElement:e=>{let t=e;for(;t&&(!t.nodeName||"BODY"!==t.nodeName);){if(nq(t)||nV(t)||nB(t)||nF(t))return t;t=t.parentNode}return null},determineLinkType:(e,t,n,r)=>{let i="other";return eh(n)&&(((e,t,n)=>{let r=!1;if(t){if(n&&n.download)r=!0;else if(e){let n=new RegExp(e),i=nz(t).toLowerCase();r=n.test(i)}}return r})(t.downloadLinkQualifier,n,r)?i="download":((e,t)=>{let n=!1;if(t&&e.location.hostname){let r=e.location.hostname.toLowerCase();n=0>nz(t).toLowerCase().indexOf(r)}return n})(e,n)&&(i="exit")),i}}),nJ=e=>{if(!n){let t=ec(window)(e.orgId||""),r=(()=>{let e={};return{getItem:t=>e[t],setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}})();n=(({storage:e})=>({save:t=>{let n=JSON.stringify(t);e.setItem(nO,n)},load:()=>{let t=null,n=e.getItem(nO);return n&&(t=JSON.parse(n)),t},remove:()=>{e.removeItem(nO)}}))({storage:e.clickCollection.sessionStorageEnabled?t.session:r})}},nY=({config:e,eventManager:t,handleError:r,logger:i})=>{((e,t)=>{let{clickCollectionEnabled:n,onBeforeLinkClickSend:r,downloadLinkQualifier:i}=e;!1===n&&(r&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),i&&i!==nD&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))})(e,i);let a=e.clickCollection;n||nJ(e);let o=(({config:e,logger:t,getClickedElementProperties:n,clickActivityStorage:r})=>{let{clickCollectionEnabled:i,clickCollection:a}=e;return i?({event:i,clickedElement:o})=>{var s,l;let d=n({clickActivityStorage:r,clickedElement:o,config:e,logger:t}),c=d.linkType;!nN()&&(d.isValidLink()&&((e,t)=>t&&("download"===t&&!e.downloadLinkEnabled||"exit"===t&&!e.externalLinkEnabled||"other"===t&&!e.internalLinkEnabled))(a,c)?t.info(`Cancelling link click event due to clickCollection.${c}LinkEnabled = false.`):d.isInternalLink()&&a.eventGroupingEnabled&&(!e.onBeforeLinkClickSend||a.filterClickDetails)&&(s=window.location.hostname,l=d.linkUrl,n_(s)===n_(l))?r.save(d.properties):d.isValidLink()?(i.mergeXdm(d.xdm),i.mergeData(d.data),r.save({pageName:d.pageName,pageIDType:d.pageIDType})):d.isValidActivityMapData()&&r.save(d.properties))}:()=>void 0})({config:e,logger:i,clickActivityStorage:n,getClickedElementProperties:nH}),s=(({clickActivityStorage:e})=>t=>{if(nN())return;let n=nP({properties:e.load()});if(n.isValidLink()||n.isValidActivityMapData()){if(n.isValidLink()){let e=n.xdm;delete e.eventType,t.mergeXdm(e)}n.isValidActivityMapData()&&t.mergeData(n.data),e.save({pageName:n.pageName,pageIDType:n.pageIDType})}})({clickActivityStorage:n}),l=(({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})})({clickActivityStorage:n});return{lifecycle:{onComponentsRegistered(e){let{lifecycle:n}=e;(({eventManager:e,lifecycle:t,handleError:n})=>{let r=(({eventManager:e,lifecycle:t,handleError:n})=>r=>{if(r.s_fe)return Promise.resolve();let i="composedPath"in r&&r.composedPath().length>0?r.composedPath()[0]:r.target,a=e.createEvent();return a.documentMayUnload(),t.onClick({event:a,clickedElement:i}).then(()=>a.isEmpty()?Promise.resolve():e.sendEvent(a)).then(eg).catch(e=>{n(e,"click collection")})})({eventManager:e,lifecycle:t,handleError:n});document.addEventListener("click",r,!0)})({eventManager:t,lifecycle:n,handleError:r})},onClick({event:e,clickedElement:t}){o({event:e,clickedElement:t})},onBeforeEvent({event:e}){(e=>{let t=e.getContent();return void 0!==t.xdm&&void 0!==t.xdm.web&&void 0!==t.xdm.web.webPageDetails&&void 0!==t.xdm.web.webPageDetails.name})(e)&&(a.eventGroupingEnabled&&s(e),l(e,i,n))}}}};nY.namespace="ActivityCollector",nY.configValidators=nA,nY.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(n||nJ(e),{getLinkDetails:r=>nH({clickActivityStorage:n,clickedElement:r,config:e,logger:t}).properties});let nG=nY,nQ=({logger:e,fireReferrerHideableImage:t})=>{let n=b({logger:e,cookieJar:f.withConverter({write:e=>encodeURIComponent(e)})});return{lifecycle:{onResponse:(({processDestinations:e})=>({response:t})=>(({response:t})=>e(t.getPayloadsByType("activation:push")))({response:t}).then(()=>(({response:e})=>({destinations:e.getPayloadsByType("activation:pull")}))({response:t})))({processDestinations:(({fireReferrerHideableImage:e,logger:t,cookieJar:n,isPageSsl:r})=>{let i=r?{sameSite:"none",secure:!0}:{};return r=>(r.filter(e=>"cookie"===e.type).forEach(e=>{let{name:t,value:r,domain:a,ttlDays:o}=e.spec;n.set(t,r||"",{domain:a||"",expires:o||10,...i})}),Promise.all(r.filter(e=>"url"===e.type).map(n=>e(n.spec).then(()=>{t.info(`URL destination succeeded: ${n.spec.url}`)}).catch(()=>{}))).then(eg))})({fireReferrerHideableImage:t,logger:e,cookieJar:n,isPageSsl:"https:"===window.location.protocol})})},commands:{}}};nQ.namespace="Audiences";let nX=nQ,nW=({standard:e,version:t})=>`${e}.${t}`,nK=()=>{let e={};return{...tR({content:e,addIdentity:(t,n)=>{e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(n)},hasIdentity:t=>(e.identityMap&&e.identityMap[t])!==void 0}),setConsent:t=>{e.consent=t}}},nZ=({payload:e,datastreamIdOverride:t})=>tP({payload:e,datastreamIdOverride:t,getAction:()=>"privacy/set-consent",getUseSendBeacon:()=>!1}),n0=e=>e.split(";").reduce((e,t)=>{let[n,r]=t.split("=");return e[n]=r,e},{}),n1=tr({consent:e9(e6()).required().nonEmpty(),identityMap:to,edgeConfigOverrides:ts}).noUnknownFields().required(),n2=tr({defaultConsent:ta("in","out",tp).default("in")}),n5=({config:e,consent:t,sendEdgeNetworkRequest:n,createNamespacedStorage:r})=>{let{orgId:i,defaultConsent:a}=e,o=(({parseConsentCookie:e,orgId:t,cookieJar:n})=>{let r=Z(t,"consent");return{read(){let t=n.get(r);return t?e(t):{}},clear(){n.remove(r)}}})({parseConsentCookie:n0,orgId:i,cookieJar:f}),s=(()=>{let e=0,t=Promise.resolve();return{addTask(n){e+=1;let r=()=>n().finally(()=>{e-=1});return t=t.then(r,r)},get length(){return e}}})(),l=(({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:n,edgeConfigOverrides:r})=>({consentOptions:i,identityMap:a,edgeConfigOverrides:o})=>{let s=tM({payload:e(),globalConfigOverrides:r,localConfigOverrides:o});return s.payload.setConsent(i),u(a)&&Object.keys(a).forEach(e=>{a[e].forEach(t=>{s.payload.addIdentity(e,t)})}),n({request:t(s)}).then(()=>{})})({createConsentRequestPayload:nK,createConsentRequest:nZ,sendEdgeNetworkRequest:n,edgeConfigOverrides:e.edgeConfigOverrides});return(({storedConsent:e,taskQueue:t,defaultConsent:n,consent:r,sendSetConsentRequest:i,validateSetConsentOptions:a,consentHashStore:o,doesIdentityCookieExist:s})=>{let l=e.read(),d=s(),c=void 0!==l[tv];d&&c||o.clear(),d||(e.clear(),l={}),r.initializeConsent({[tv]:n},l);let u=()=>{if(0===t.length){let t=e.read();void 0!==t[tv]&&r.setConsent(t)}};return{commands:{setConsent:{optionsValidator:a,run:({consent:e,identityMap:n,edgeConfigOverrides:a})=>{r.suspend();let s=o.lookup(e);return t.addTask(()=>s.isNew()?i({consentOptions:e,identityMap:n,edgeConfigOverrides:a}):Promise.resolve()).then(()=>s.save()).finally(u)}}},lifecycle:{onResponse:u,onRequestFailure:u}}})({storedConsent:o,taskQueue:s,defaultConsent:a,consent:t,sendSetConsentRequest:l,validateSetConsentOptions:n1,consentHashStore:(({storage:e})=>({clear(){e.clear()},lookup(t){let n={},r=e=>{let t=nW(e),{standard:r,version:i,...a}=e;return n[t]||(n[t]=Y(JSON.stringify(ew(a))).toString()),n[t]};return{isNew:()=>t.some(t=>{let n=nW(t),i=e.getItem(n);return null===i||i!==r(t)}),save(){t.forEach(t=>{let n=nW(t);e.setItem(n,r(t))})}}}}))({storage:r(`${K(i)}.consentHashes.`).persistent}),doesIdentityCookieExist:el({orgId:i})})};n5.namespace="Consent",n5.configValidators=n2;let n3=n5,n4=()=>({eventMergeId:eA()}),n6=()=>(({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}}))({createEventMergeId:n4});n6.namespace="EventMerge";let n9=n6,n7={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},n8=({config:e,eventManager:t,consent:n,sendEdgeNetworkRequest:r,setTimestamp:i})=>({createMediaEvent({options:n}){let r=t.createEvent(),{xdm:a}=n;if(i(a),r.setUserXdm(a),a.eventType===n7.AD_START){let{advertisingDetails:t}=n.xdm.mediaCollection;r.mergeXdm({mediaCollection:{advertisingDetails:{playerName:t.playerName||e.streamingMedia.playerName}}})}return r},createMediaSession(n){let{playerName:r,channel:i,appVersion:a}=e.streamingMedia,o=t.createEvent(),{sessionDetails:s}=n.xdm.mediaCollection;return o.setUserXdm(n.xdm),o.mergeXdm({eventType:n7.SESSION_START,mediaCollection:{sessionDetails:{playerName:s.playerName||r,channel:s.channel||i,appVersion:s.appVersion||a}}}),o},augmentMediaEvent({event:e,playerId:t,getPlayerDetails:n,sessionID:r}){if(!t||!n)return e;let{playhead:i,qoeDataDetails:a}=n({playerId:t});return e.mergeXdm({mediaCollection:{playhead:eI(i),qoeDataDetails:a,sessionID:r}}),e},trackMediaSession:({event:e,mediaOptions:n,edgeConfigOverrides:r})=>t.sendEvent(e,{mediaOptions:n,edgeConfigOverrides:r}),trackMediaEvent({event:e,action:t}){let i=tx(),a=(({mediaRequestPayload:e,action:t})=>tP({payload:e,edgeSubPath:"/va",getAction:()=>t,getUseSendBeacon:()=>!1}))({mediaRequestPayload:i,action:t});return i.addEvent(e),e.finalize(),n.awaitConsent().then(()=>r({request:a}).then(()=>({})))}}),re={MAIN:"main",COMPLETED:"completed"},rt=()=>{let e;return{getSession:t=>e[t]||{},storeSession:({playerId:t,sessionDetails:n})=>{void 0===e&&(e={}),e[t]=n},stopPing:({playerId:t})=>{let n=e[t];n&&(clearTimeout(n.pingId),n.pingId=null,n.playbackState=re.COMPLETED)},savePing:({playerId:t,pingId:n,playbackState:r})=>{e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=n,e[t].playbackState=r)}}},rn=({mediaEventManager:e,mediaSessionCacheManager:t,config:n})=>{let r=i=>{let a=e.createMediaEvent({options:i}),{playerId:o,xdm:s}=i,{eventType:l}=s,d=l.split(".")[1],{getPlayerDetails:c,sessionPromise:u,playbackState:m}=t.getSession(o);return u.then(i=>i.sessionId?(e.augmentMediaEvent({event:a,eventType:l,playerId:o,getPlayerDetails:c,sessionID:i.sessionId}),e.trackMediaEvent({event:a,action:d}).then(()=>{if(o)if(l===n7.SESSION_COMPLETE||l===n7.SESSION_END)t.stopPing({playerId:o});else{let e=((e,t)=>e===n7.AD_START||e===n7.Ad_BREAK_START||e===n7.AD_SKIP||e===n7.AD_COMPLETE?"ad":e===n7.AD_BREAK_COMPLETE||e===n7.CHAPTER_COMPLETE||e===n7.CHAPTER_START||e===n7.CHAPTER_SKIP||e===n7.SESSION_START?"main":e===n7.SESSION_END||e===n7.SESSION_COMPLETE?"completed":t)(l,m);if("completed"===e)return;let i=setTimeout(()=>{r({playerId:o,xdm:{eventType:n7.PING}})},1e3*("ad"===e?n.streamingMedia.adPingInterval:n.streamingMedia.mainPingInterval));t.savePing({playerId:o,pingId:i,playbackState:e})}})):Promise.reject(Error(`Failed to trigger media event: ${l}. Session ID is not available for playerId: ${o}.`)))};return e=>r(e)},rr=({config:e,mediaEventManager:t,mediaSessionCacheManager:n,legacy:r=!1})=>i=>{if(!e.streamingMedia)return Promise.reject(Error("Streaming media is not configured."));let{playerId:a,getPlayerDetails:o,edgeConfigOverrides:s}=i,l=t.createMediaSession(i);t.augmentMediaEvent({event:l,playerId:a,getPlayerDetails:o});let d=t.trackMediaSession({event:l,mediaOptions:{playerId:a,getPlayerDetails:o,legacy:r},edgeConfigOverrides:s});return n.storeSession({playerId:a,sessionDetails:{sessionPromise:d,getPlayerDetails:o,playbackState:re.MAIN}}),d},ri=e=>"string"!=typeof e||!e.trim(),ra=({mediaSessionCacheManager:e,config:t,trackMediaEvent:n})=>({response:r,playerId:i,getPlayerDetails:a})=>{let o=r.getPayloadsByType("media-analytics:new-session");if(N(o)){let{sessionId:r}=o[0];if(ri(r))return{};if(!i||!a)return{sessionId:r};let s=setTimeout(()=>{n({playerId:i,xdm:{eventType:n7.PING}})},1e3*t.streamingMedia.mainPingInterval);return e.savePing({playerId:i,pingId:s,playbackState:re.MAIN}),{sessionId:r}}return{}},ro={Video:"video",Audio:"audio"},rs={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},rl={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},rd={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},rc={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},ru={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},rm={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},rp={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},rh={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"},rg=({logger:e})=>({createMediaObject:(t,n,r,i,a)=>{let o=tr({friendlyName:ti().nonEmpty(),name:ti().nonEmpty(),length:tt().required(),streamType:ti().nonEmpty(),contentType:ti().nonEmpty()});try{let e=o({friendlyName:t,name:n,length:r,streamType:a,contentType:i});return{sessionDetails:{name:e.name,friendlyName:e.friendlyName,length:Math.round(e.length),streamType:e.streamType,contentType:e.contentType}}}catch(t){return e.warn("An error occurred while creating the Media Object.",t),{}}},createAdBreakObject:(t,n,r)=>{let i=tr({friendlyName:ti().nonEmpty(),offset:tt(),index:tt()});try{let e=i({friendlyName:t,offset:n,index:r});return{advertisingPodDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index}}}catch(t){return e.warn("An error occurred while creating the Ad Break Object.",t),{}}},createAdObject:(t,n,r,i)=>{let a=tr({friendlyName:ti().nonEmpty(),name:ti().nonEmpty(),podPosition:tt(),length:tt()});try{let e=a({friendlyName:t,name:n,podPosition:r,length:i});return{advertisingDetails:{friendlyName:e.friendlyName,name:e.name,podPosition:e.podPosition,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Advertising Object.",t),{}}},createChapterObject:(t,n,r,i)=>{let a=tr({friendlyName:ti().nonEmpty(),offset:tt(),length:tt(),index:tt()});try{let e=a({friendlyName:t,offset:n,length:r,index:i});return{chapterDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Chapter Object.",t),{}}},createStateObject:t=>{let n=ti().matches(/^[a-zA-Z0-9_]{1,64}$/,"This is not a valid state name.");try{return{name:n(t)}}catch(t){return e.warn("An error occurred while creating the State Object.",t),{}}},createQoEObject:(t,n,r,i)=>{let a=tr({bitrate:tt(),droppedFrames:tt(),fps:tt(),startupTime:tt()});try{let e=a({bitrate:t,droppedFrames:n,fps:r,startupTime:i});return{bitrate:e.bitrate,droppedFrames:e.droppedFrames,framesPerSecond:e.fps,timeToStart:e.startupTime}}catch(t){return e.warn("An error occurred while creating the QOE Object.",t),{}}}}),rf={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},rv={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"},ry=({logger:e,trackMediaSession:t,trackMediaEvent:n,uuid:r})=>{let i=null,a=({eventType:e,mediaDetails:t={},contextData:n=[]})=>{let r=(({eventType:e})=>e===rd.BufferComplete||e===rd.SeekComplete?rc.Play:e===rd.StateStart||e===rd.StateEnd?rc.StateUpdate:e===rd.SeekStart?rc.Pause:e)({eventType:e});if(e===rd.StateStart)return{eventType:`media.${r}`,mediaCollection:{statesStart:[t]}};if(e===rd.StateEnd)return{eventType:`media.${r}`,mediaCollection:{statesEnd:[t]}};let i={eventType:`media.${r}`,mediaCollection:{...t}},a=[];return Object.keys(n).forEach(e=>{rf[e]?i.mediaCollection.sessionDetails[rf[e]]=n[e]:rv[e]?i.mediaCollection.advertisingDetails[rv[e]]=n[e]:a.push({name:e,value:n[e]})}),N(a)&&(i.mediaCollection.customMetadata=a),i};return{trackSessionStart:(n,o={})=>{if(null==n||eu(n))return e.warn("Invalid media object"),{};null===i&&(e.warn("The Media Session was completed. Restarting a new session."),i={qoe:null,lastPlayhead:0,playerId:r()});let s=a({eventType:rc.SessionStart,mediaDetails:n,contextData:o});return t({playerId:i.playerId,getPlayerDetails:()=>({playhead:i.lastPlayhead,qoeDataDetails:i.qoe}),xdm:s})},trackPlay:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=a({eventType:rc.Play});return n({playerId:i.playerId,xdm:t})},trackPause:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=a({eventType:rc.Pause});return n({playerId:i.playerId,xdm:t})},trackSessionEnd:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=a({eventType:rc.SessionEnd});return n({playerId:i.playerId,xdm:t})},trackComplete:()=>{if(null===i)return e.warn("The Media Session was completed."),{};let t=a({eventType:rc.SessionComplete});return n({playerId:i.playerId,xdm:t})},trackError:t=>{if(e.warn(`trackError(${t})`),null===i)return e.warn("The Media Session was completed."),{};let r=a({eventType:rc.Error,mediaDetails:{errorDetails:{name:t,source:"player"}}});return n({playerId:i.playerId,xdm:r})},trackEvent:(t,r,o)=>{if(eu(r))return e.warn("Invalid media object."),{};if(null===i)return e.warn("The Media Session was completed."),{};if(!Object.values(rd).includes(t))return e.warn("Invalid event type"),{};let s=a({eventType:t,mediaDetails:r,contextData:o});return n({playerId:i.playerId,xdm:s})},updatePlayhead:t=>{if(null===i)return void e.warn("The Media Session was completed.");em(t)&&(i.lastPlayhead=parseInt(t,10))},updateQoEObject:t=>{if(null===i)return void e.warn("The Media Session was completed.");t&&(i.qoe=t)},destroy:()=>{e.warn("Destroy called, destroying the tracker."),i=null}}},rw=({eventManager:e,sendEdgeNetworkRequest:t,config:n,logger:r,consent:i})=>{let a=rt({config:n}),o=n8({sendEdgeNetworkRequest:t,config:n,consent:i,eventManager:e,setTimestamp:tH(()=>new Date)}),s=rn({mediaSessionCacheManager:a,mediaEventManager:o,config:n}),l=rr({config:n,mediaEventManager:o,mediaSessionCacheManager:a,legacy:!0});return(({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:n,logger:r,createMediaHelper:i,createGetInstance:a,config:o})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=eg}){if(!e)return;let{legacy:r,playerId:i,getPlayerDetails:a}=e;r&&t(({response:e})=>n({playerId:i,getPlayerDetails:a,response:e}))}},commands:{getMediaAnalyticsTracker:{run:()=>o.streamingMedia?(r.info("Streaming media is configured in legacy mode."),Promise.resolve({getInstance:()=>a({logger:r,trackMediaEvent:e,trackMediaSession:t,uuid:eA}),Event:rd,MediaType:ro,PlayerState:rl,StreamType:rs,MediaObjectKey:ru,VideoMetadataKeys:rm,AudioMetadataKeys:rp,AdMetadataKeys:rh,...i({logger:r})})):Promise.reject(Error("Streaming media is not configured."))}}}))({mediaResponseHandler:ra({mediaSessionCacheManager:a,config:n,trackMediaEvent:s}),trackMediaSession:l,trackMediaEvent:s,createMediaHelper:rg,createGetInstance:ry,logger:r,config:n})};rw.namespace="Legacy Media Analytics";let rE=rw,rb=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,rS=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,rI=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,rC=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,rk=(e="/")=>{let t=e.length;for(;t>0&&-1!=="/".indexOf(e.charAt(t-1));)t-=1;return e.substring(0,t)||"/"},rD=e=>`${e.surfaceType}://${e.authority}${e.path||""}${e.fragment||""}`,rT=e=>{let t=e();return"web://"+t.host.toLowerCase()+rk(t.pathname)},rA=e=>!!e&&0===e.indexOf("web://")&&-1===e.indexOf("#"),rN="https://ns.adobe.com/personalization/default-content-item",r_="https://ns.adobe.com/personalization/dom-action",rP="https://ns.adobe.com/personalization/html-content-item",rO="https://ns.adobe.com/personalization/json-content-item",rR="https://ns.adobe.com/personalization/ruleset-item",rL="https://ns.adobe.com/personalization/redirect-item",rx="https://ns.adobe.com/personalization/message/in-app",rM=e=>e.filter((t,n)=>e.indexOf(t)===n),r$="decisioning.propositionDisplay",rj="decisioning.propositionInteract",rU="decisioning.propositionTrigger",rq="decisioning.propositionDismiss",rV="decisioning.propositionSuppressDisplay",rB={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},rF={[r$]:rB.DISPLAY,[rj]:rB.INTERACT,[rU]:rB.TRIGGER,[rq]:rB.DISMISS,[rV]:rB.SUPPRESS},rz={[rB.DISPLAY]:r$,[rB.INTERACT]:rj,[rB.TRIGGER]:rU,[rB.DISMISS]:rq,[rB.SUPPRESS]:rV},rH=e=>rF[e],rJ={propositions:[]},rY=(e="undefined")=>k("DIV",{},{innerHTML:e}),rG=/:eq\((\d+)\)/g,rQ=e=>-1===e.indexOf(":eq("),rX=/(#|\.)(-?\w+)/g,rW=(e,t,n)=>`${t}${CSS.escape(n)}`,rK=e=>{let t=document;if(rQ(e))return x(e,t);let n=(e=>{let t=[],n=e.trim().replace(rX,rW).split(rG).filter(eh),{length:r}=n,i=0;for(;i<r;){let e=n[i],r=n[i+1];r?t.push({sel:e,eq:Number(r)}):t.push({sel:e}),i+=2}return t})(e),{length:r}=n,i=[],a=t,o=0;for(;o<r;){let{sel:e,eq:t}=n[o],s=x(e,a),{length:l}=s;if(0===l||null!=t&&t>l-1)break;o<r-1&&(null==t?[a]=s:a=s[t]),o===r-1&&(i=null==t?s:[s[t]]),o+=1}return i},rZ=(e,t=document)=>t.getElementById(e),r0=(e,t,n)=>{e.setAttribute(t,n)},r1=(e,t)=>e.getAttribute(t),r2=(e,t,n,r)=>{let i;i=r?`${t}:${n} !${r};`:`${t}:${n};`,e.style.cssText+=`;${i}`},r5=(e,t)=>{if(!e)return;let n=e.parentNode;n&&n.insertBefore(t,e.nextElementSibling)},r3=(e,t)=>{if(!e)return;let n=e.parentNode;n&&n.insertBefore(t,e)},r4=e=>{let{childNodes:t}=e;return t?_(t):[]},r6=e=>e.firstElementChild,r9=(e=document)=>{if(void 0===r){let t=e.querySelector("[nonce]");r=t&&(t.nonce||t.getAttribute("nonce"))}return r},r7=e=>k("IMG",{src:e}),r8=e=>{x("IMG",e).forEach(e=>{let t=r1(e,"src");t&&r7(t)})},ie=e=>e.tagName===D&&!r1(e,"src"),it=e=>{let t=x(D,e),{length:n}=t,r=r9();if(r)for(let e=0;e<n;e+=1){let n=t[e];ie(n)&&(n.nonce=r)}},ir=e=>{let t=document.createElement("script");t.src=e,t.async=!0;let n=((e,t)=>new Promise((n,r)=>{t.onload=()=>{n(t)},t.onerror=()=>{r(Error(`Failed to load script: ${e}`))}}))(e,t);return document.head.appendChild(t),n},ii=(e,t)=>!!e&&e.tagName===t,ia=e=>ii(e,T)&&!r1(e,"src"),io=e=>ii(e,T)&&r1(e,"src"),is=e=>{let t=x(T,e),n=[],{length:r}=t,i=r9(),a={...i&&{nonce:i}};for(let e=0;e<r;e+=1){let r=t[e];if(!ia(r))continue;let{textContent:i}=r;i&&n.push(k(T,a,{textContent:i}))}return n},il=e=>{let t=x(T,e),n=[],{length:r}=t;for(let e=0;e<r;e+=1){let r=t[e];if(!io(r))continue;let i=r1(r,"src");i&&n.push(i)}return n},id=(e,t)=>{t.forEach(t=>{e.appendChild(t),e.removeChild(t)})},ic=e=>Promise.all(e.map(ir)),iu=(e,t,n)=>{let r=rY(t);it(r);let i=r4(r),a=is(r),o=il(r);return r8(r),i.forEach(t=>{C(e,t)}),n(e),id(e,a),ic(o)},im=(e,t,n)=>(r4(e).forEach(z),iu(e,t,n)),ip=(e,t,n)=>{let r=rY(t);it(r);let i=r4(r),a=is(r),o=il(r),{length:s}=i,l=s-1;for(r8(r);l>=0;){let t=i[l];n(t);let r=r6(e);r?r3(r,t):C(e,t),l-=1}return id(e,a),ic(o)},ih="alloy-prehiding",ig={},iv=e=>{if(ig[e])return;let t=r9(),n=k(D,{...t&&{nonce:t}},{textContent:`${e} { visibility: hidden }`});C(document.head,n),ig[e]=n},iy=e=>{let t=ig[e];t&&(z(t),delete ig[e])},iw=(e,t,n)=>{let r=rY(t);it(r);let i=r4(r),a=is(r),o=il(r);return r8(r),i.forEach(t=>{n(t),r3(e,t)}),id(e,a),ic(o)},iE=(e,t,n)=>iw(e,t,n).then(()=>{z(e)}),ib=(e,t,n)=>{let r=rY(t);it(r);let i=r4(r),a=is(r),o=il(r);r8(r);let s=e;return i.forEach(e=>{n(e),r5(s,e),s=e}),id(e,a),ic(o)},iS=(e,t,n)=>{let{priority:r,...i}=t;Object.keys(i).forEach(t=>{r2(e,t,i[t],r)}),n(e)},iI=(e,t,n)=>{Object.keys(t).forEach(n=>{r0(e,n,t[n])}),n(e)},iC=(e,t,n)=>{"IMG"===e.tagName&&(r7(t),n(e),e.removeAttribute("src"),r0(e,"src",t))},ik=(e,{from:t,to:n},r)=>{let i=(e=>{let{children:t}=e;return t?_(t):[]})(e),a=i[t],o=i[n];a&&o&&(t<n?r5(o,a):r3(o,a),r(o),r(a))},iD=(e,t=!1)=>async(n,r,i)=>{let{selector:a,prehidingSelector:o,content:s}=n;iv(o);try{let n=await V(a,rK);(({containers:e,content:t,decorateProposition:n,renderFunc:r,renderStatusHandler:i,alwaysRender:a})=>Promise.all(e.filter(e=>a||i.shouldRender(e)).map(async e=>{await r(e,t,n),i.markAsRendered(e)})))({containers:n,content:s,decorateProposition:r,renderFunc:e,renderStatusHandler:i,alwaysRender:t})}finally{iy(o)}},iT=(e,t,n)=>{n(e),e.textContent=t},iA=e=>`${e}`.endsWith("px")?e:`${e}px`,iN=(e,t,n)=>{let{priority:r,...i}=t;Object.keys(i).forEach(t=>{let n=i[t];("left"===t||"top"===t)&&(n=iA(n)),r2(e,t,n,r)}),n(e)},i_=(e,t,n)=>{n(e)},iP=(e,t,n)=>{let{priority:r,...i}=t;Object.keys(i).forEach(t=>{let n=i[t];("width"===t||"height"===t)&&(n=iA(n)),r2(e,t,n,r)}),n(e)},iO="customCode",iR="appendHtml",iL="click",ix="collectInteractions",iM=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:n=[],propositionAction:r,documentMayUnload:i=!1,eventType:a=r$,propositionEventTypes:o=[rH(a)],viewName:s})=>{let l=e.createEvent(),d={eventType:a};return s&&(d.web={webPageDetails:{viewName:s}}),N(n)&&t(l,n,o,r),l.mergeXdm(d),i&&l.documentMayUnload(),e.sendEvent(l)},i$=(e,t)=>{if(rQ(e))return((e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e))(e,t);let n=rK(e),r=!1;for(let e=0;e<n.length;e+=1)if(n[e]===t){r=!0;break}return r},ij="view",iU=e=>e.map(e=>{let{trackingLabel:t,scopeType:n,...r}=e;return r}),iq=(e,t,n)=>{let{documentElement:r}=document,i=e,a=0;for(;i&&i!==r;){if(i$(t,i)){let e=n(t),r={metas:e},i=e.find(e=>e.trackingLabel);i&&(r.label=i.trackingLabel,r.weight=a);let o=e.find(e=>e.scopeType===ij);return o&&(r.viewName=o.scope,r.weight=a),r}i=i.parentNode,a+=1}return{metas:null}},iV=(e,t,n)=>{let r,i=[],a="",o=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(let l=0;l<t.length;l+=1){let{metas:d,label:c,weight:u,viewName:m}=iq(e,t[l],n);d&&(c&&u<=o&&(a=c,o=u),m&&u<=s&&(r=m,s=u),i.push(...iU(d)))}return{decisionsMeta:(e=>e.filter((t,n)=>{let r=JSON.stringify(t);return n===e.findIndex(e=>JSON.stringify(e)===r)}))(i),propositionActionLabel:a,propositionActionToken:void 0,viewName:r}},iB=(e=document)=>-1!==e.location.href.indexOf("adobe_authoring_enabled"),iF=(e,t,n,r)=>{if(0===t.length)return;let i={};n.forEach(e=>{i[e]=1});let a={_experience:{decisioning:{propositions:t,propositionEventType:i}}};r&&(a._experience.decisioning.propositionAction=r),e.mergeXdm(a)},iz=(e,t)=>{e.mergeQuery({personalization:{...t}})},iH=(e,t)=>e===rO&&t===ix,iJ={[r_]:()=>!0,[rP]:()=>!0,[rO]:iH,[rx]:()=>!0,[rN]:()=>!0},iY=e=>{let{selector:t,type:n}=e;return n!==iO||"BODY > *:eq(0)"!==t?e:{...e,selector:"BODY"}},iG=e=>{let t={...e},{content:n,selector:r}=t;return ri(n)||null==r||!ii(rK(r)[0],"HEAD")?t:(t.type=iR,t.content=x("SCRIPT,LINK,STYLE",rY(n)).map(e=>e.outerHTML).join(""),t)},iQ=()=>({render:eg,setRenderAttempted:!0,includeInNotification:!0}),iX="always",iW="never",iK="decoratedElementsOnly",iZ=[iX,iW,iK],i0="data-aep-interact-id",i1="data-aep-click-label",i2=0,i5=(e,t,n,r,i,a,o,s)=>{let{scopeDetails:l={}}=o,{decisionProvider:d}=l;return((e,t)=>!!e&&!!e[t]&&[iX,iK].includes(e[t]))(e,d)||t===iL?e=>{if(!e.tagName)return;let t=((e,t)=>t?parseInt(t,10):++i2)(0,r1(e,i0));s(n,r,a,o,t),r0(e,i0,t),i&&!r1(e,i1)&&r0(e,i1,i)}:eg},i3=(e,t)=>e!==ij?{shouldRender:()=>!0,markAsRendered:()=>{}}:{shouldRender:e=>!e||!(e.dataset.adobePropositionIds??"").split(",").includes(t),markAsRendered:e=>{let n=(e.dataset.adobePropositionIds??"").split(",");n.includes(t)||n.push(t),e.dataset.adobePropositionIds=n.sort().join(",")}},i4="BODY",i6="text/html",i9=["content","contentType"],i7=["mobileParameters","webParameters","html"],i8=e=>{let t=x(`#${e}`,document);t&&t.length>0&&z(t[0])},ae=e=>(t,n=!1)=>(n?e.location.href=t:e.location.replace(t),new Promise(()=>{})),at="alloy-messaging-container",an="alloy-overlay-container",ar="alloy-content-iframe",ai=()=>[at,an].forEach(i8),aa=["enabled","parentElement","insertionMethod"],ao=(e,t,n)=>{let{interactIds:r,clickLabel:i="",clickToken:a}=(e=>{let t,n,{documentElement:r}=document,i=e,a=new Set;for(;i&&i!==r&&!(i instanceof ShadowRoot);){let e=r1(i,i0);e&&a.add(e),t=t||r1(i,i1),n=n||r1(i,"data-aep-click-token"),i=i.parentNode}return{interactIds:[...a],clickLabel:t,clickToken:n}})(e),o=((e,t,n)=>r=>{let{scopeDetails:i={}}=r,{decisionProvider:a}=i;return e[a]===iX||e[a]===iK&&(t||n)})(n,i,a);if(0===r.length)return{};let s=t(r).filter(o);return{decisionsMeta:iU(s),propositionActionLabel:i,propositionActionToken:a,viewName:(e=>{let t=e.find(e=>e.scopeType===ij);return t?t.scope:void 0})(s)}},as=({config:e,logger:t,eventManager:n,consent:r})=>{let i,{targetMigrationEnabled:a,prehidingStyle:o,autoCollectPropositionInteractions:s}=e,l=iM({eventManager:n,mergeDecisionsMeta:iF}),d=()=>{let e=rZ(ih);e&&(t.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),z(e))},c=e=>{if(!e||rZ(ih))return;let n=r9(),r=k(D,{id:ih,...n&&{nonce:n}},{textContent:e});t.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),C(document.head,r)},{storeInteractionMeta:u,getInteractionMetas:m}=(()=>{let e={},t={};return{storeInteractionMeta:(n,r,i,a,o)=>{e[o=parseInt(o,10)]||(e[o]={},t[o]={}),t[o][n]||(t[o][n]=new Set),t[o][n].add(r),e[o][n]={...a,scopeType:i}},getInteractionMetas:n=>Array.isArray(n)&&0!==n.length?Object.values(n.map(e=>parseInt(e,10)).reduce((n,r)=>(Object.keys(e[r]||{}).forEach(i=>{n[i]||(n[i]={proposition:e[r][i],items:new Set}),n[i].items=new Set([...n[i].items,...t[r][i]])}),n),{})).map(({proposition:e,items:t})=>({...e,items:Array.from(t).map(e=>({id:e}))})):[]}})(),{storeClickMeta:p,getClickSelectors:h,getClickMetas:g}=(()=>{let e={};return{storeClickMeta:({selector:t,meta:{id:n,scope:r,scopeDetails:i,trackingLabel:a,scopeType:o}})=>{e[t]||(e[t]={}),e[t][n]={scope:r,scopeDetails:i,trackingLabel:a,scopeType:o}},getClickSelectors:()=>Object.keys(e),getClickMetas:t=>e[t]?(e=>Object.keys(e).map(t=>({id:t,...e[t]})))(e[t]):{}}})(),f=(({window:e})=>()=>e.location)({window}),v={setHtml:iD(im,!0),[iO]:iD(ip),setText:iD(iT,!0),setAttribute:iD(iI,!0),setImageSource:iD(iC,!0),setStyle:iD(iS,!0),move:iD(iN,!0),resize:iD(iP,!0),rearrange:iD(ik),remove:iD(z,!0),insertAfter:iD(ib),insertBefore:iD(iw),replaceHtml:iD(iE,!0),prependHtml:iD(ip),[iR]:iD(iu),[ix]:iD(i_,!0)},y=(({preprocess:e,isPageWideSurface:t})=>(n,r=!0,i=!1)=>{let{id:a,scope:o,scopeDetails:s,items:l=[]}=n,{characteristics:{scopeType:d}={}}=s||{};return{getScope:()=>o,getScopeType:()=>o===tN||t(o)?"page":d===ij?ij:"proposition",getItems(){return l.map(t=>((t,n)=>{let{id:r,schema:i,data:a,characteristics:{trackingLabel:o}={}}=t,s=a?a.type:void 0,l=e(a);return{getId:()=>r,getSchema:()=>i,getSchemaType:()=>s,getData:()=>l,getProposition:()=>n,getTrackingLabel:()=>o,getOriginalItem:()=>t,toString:()=>JSON.stringify(t),toJSON:()=>t}})(t,this))},getNotification:()=>({id:a,scope:o,scopeDetails:s}),getId:()=>a,toJSON:()=>n,shouldSuppressDisplay:()=>i,addToReturnValues(e,t,i,a){r&&(e.push({...n,items:i.map(e=>e.getOriginalItem()),renderAttempted:a}),a||t.push({...n,items:i.map(e=>e.getOriginalItem())}))}}})({preprocess:(i=[iG,iY],e=>e?i.reduce((e,t)=>({...e,...t(e)}),e):e),isPageWideSurface:rA}),w=(({createProposition:e})=>{let t=!1,n=Promise.resolve({}),r=(t,n)=>{let r=t[n.toLowerCase()];return r&&r.length>0?r:[e({scope:n,scopeDetails:{characteristics:{scopeType:ij}},items:[{schema:rN}]},!1)]};return{createCacheUpdate:e=>{let i=S();return t=!0,n=n.then(e=>i.promise.then(t=>({...e,...t})).catch(()=>e)),{update(t){let n=ee(t.filter(e=>e.getScope()),e=>e.getScope().toLowerCase());return(i.resolve(n),e)?r(n,e):[]},cancel(){i.reject()}}},getView:e=>n.then(t=>r(t,e)),isInitialized:()=>t}})({createProposition:y}),E=ae(window),b=(({schemaProcessors:e,logger:t})=>{let n=(e,n)=>()=>Promise.resolve().then(e).then(()=>(t.enabled&&t.info(`Action ${n.toString()} executed.`),n.toJSON())).catch(e=>{let{message:r,stack:i}=e,a=`Failed to execute action ${n.toString()}. ${r} ${i}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:n.getProposition().getNotification(),item:n.toJSON()},error:e,message:a,logLevel:"warn"})}),r=async(e,t)=>{let n=(await Promise.allSettled(e.map(e=>e()))).filter(e=>"fulfilled"===e.status).map(e=>e.value);if(t&&N(n))return{...t,items:n}},i=t=>{let n=e[t.getSchema()];return n?n(t):{}},a=({renderers:e,returnedPropositions:t,returnedDecisions:a,items:o,proposition:s})=>{let l,d,c,u,m=[...e],p=[...t],h=[...a],g=[],f=[],v=[],y=!1,w=!1,E=0;for(;o.length>E;){if(u=o[E],{render:l,setRenderAttempted:d,includeInNotification:c,onlyRenderThis:w}=i(u),w){p=[],h=[],d?(g=[u],f=[]):(g=[],f=[u]),m=[],v=[l],y=c;break}l&&v.push(n(l,u)),c&&(y=!0),d?g.push(u):f.push(u),E+=1}if(v.length>0){let e=y?s.getNotification():void 0;m.push(()=>r(v,e))}else y&&m.push(()=>Promise.resolve(s.getNotification()));return g.length>0&&s.addToReturnValues(p,h,g,!0),f.length>0&&s.addToReturnValues(p,h,f,!1),{renderers:m,returnedPropositions:p,returnedDecisions:h,onlyRenderThis:w}};return(e,n=[])=>{let r,i,o,s=[],l=[],d=[],c=0;for(;e.length>c&&(o=(i=e[c]).getItems(),{renderers:s,returnedPropositions:l,returnedDecisions:d,onlyRenderThis:r}=a({renderers:s,returnedPropositions:l,returnedDecisions:d,items:o,proposition:i}),!r);)c+=1;return r&&e.forEach((e,t)=>{t!==c&&e.addToReturnValues(l,d,e.getItems(),!1)}),n.forEach(e=>{e.addToReturnValues(l,d,e.getItems(),!1)}),{returnedPropositions:l,returnedDecisions:d,render:()=>Promise.all(s.map(e=>e())).then(e=>{let n=e.filter(e=>e),r=n.map(e=>{let{id:t,scope:n,scopeDetails:r}=e;return{id:t,scope:n,scopeDetails:r}});if(N(n)){let e=ee(n,e=>e.scope);t.logOnContentRendering({status:"rendering-succeeded",detail:{...e},message:`Scopes: ${JSON.stringify(e)} successfully executed.`,logLevel:"info"})}return r})}}})({schemaProcessors:{[rN]:iQ,[r_]:(({modules:e,logger:t,storeInteractionMeta:n,storeClickMeta:r,autoCollectPropositionInteractions:i})=>a=>{let{type:o,selector:s}=a.getData()||{};if(!o)return t.warn("Invalid DOM action data: missing type.",a.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(o===iL)return s?(r({selector:s,meta:{...a.getProposition().getNotification(),trackingLabel:a.getTrackingLabel(),scopeType:a.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",a.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[o])return t.warn("Invalid DOM action data: unknown type.",a.getData()),{setRenderAttempted:!1,includeInNotification:!1};let l=i3(a.getProposition().getScopeType(),a.getId()),d=i5(i,o,a.getProposition().getId(),a.getId(),a.getTrackingLabel(),a.getProposition().getScopeType(),a.getProposition().getNotification(),n);return{render:()=>e[o](a.getData(),d,l),setRenderAttempted:!0,includeInNotification:!0}})({modules:v,logger:t,storeInteractionMeta:u,storeClickMeta:p,autoCollectPropositionInteractions:s}),[rP]:(({modules:e,logger:t,storeInteractionMeta:n,autoCollectPropositionInteractions:r})=>i=>{let{type:a,selector:o}=i.getData()||{};if(!o||!a)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[a])return t.warn("Invalid HTML content data",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};let s=i5(r,a,i.getProposition().getId(),i.getId(),i.getTrackingLabel(),i.getProposition().getScopeType(),i.getProposition().getNotification(),n),l=i3(i.getProposition().getScopeType(),i.getId());return{render:()=>e[a](i.getData(),s,l),setRenderAttempted:!0,includeInNotification:!0}})({modules:v,logger:t,storeInteractionMeta:u,autoCollectPropositionInteractions:s}),[rL]:(({logger:e,executeRedirect:t,collect:n})=>r=>{let{content:i}=r.getData()||{};return i?{render:()=>(iv(i4),n({decisionsMeta:[r.getProposition().getNotification()],documentMayUnload:!0}).then(()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:r.getProposition().getNotification(),redirect:i},message:`Redirect action ${r.toString()} executed.`,logLevel:"info"}),t(i))).catch(e=>{throw iy(i4),e})),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",r.getData()),{})})({logger:t,executeRedirect:E,collect:l}),[rx]:(({modules:e,logger:t})=>n=>{let r=n.getData(),i=n.getProposition(),a={...i.getNotification()},o=i.shouldSuppressDisplay();if(!r)return t.warn("Invalid in-app message data: undefined.",r),{};let{type:s="defaultContent"}=r;return e[s]?((e,t)=>{for(let n=0;n<i9.length;n+=1){let r=i9[n];if(!Object.prototype.hasOwnProperty.call(e,r))return t.warn(`Invalid in-app message data: missing property '${r}'.`,e),!1}let{content:n,contentType:r}=e;if("application/json"===r)for(let r=0;r<i7.length;r+=1){let i=i7[r];if(!Object.prototype.hasOwnProperty.call(n,i))return t.warn(`Invalid in-app message data.content: missing property '${i}'.`,e),!1}return!0})(r,t)?a?{render:()=>o?null:e[s]({...r,meta:a}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",a),{}):{}:(t.warn("Invalid in-app message data: unknown type.",r),{})})({modules:{defaultContent:e=>((e,t)=>new Promise(n=>{let{meta:r}=e;((e={},t)=>{ai();let{content:n,contentType:r,mobileParameters:i}=e,{webParameters:a}=e;if(r!==i6)return;let o=k("div",{id:at}),s=((e,t)=>{let n=new DOMParser().parseFromString(e,i6),r=n.querySelector("script");r&&r.setAttribute("nonce",r9());let i=k("iframe",{src:URL.createObjectURL(new Blob([n.documentElement.outerHTML],{type:"text/html"})),id:ar});return i.addEventListener("load",()=>{let{addEventListener:e}=i.contentDocument||i.contentWindow.document;e("click",t)}),i})(n,((e,t=ae(window))=>n=>{n.preventDefault(),n.stopImmediatePropagation();let{target:r}=n,i="a"===r.tagName.toLowerCase()?r:r.closest("a");if(!i)return;let{action:a,interaction:o,link:s,label:l,uuid:d}=(e=>{let t,n,r={};if(!e||"a"!==e.tagName.toLowerCase())return r;let{href:i}=e;if(!i||!i.startsWith("adbinapp://"))return r;let a=i.split("?"),o=a[0].split("://")[1],s=e.innerText,l=e.getAttribute("data-uuid")||"";if(N(a)){let e=ev.parse(a[1]);t=e.interaction||"",n=nr(e.link||"")}return{action:o,interaction:t,link:n,label:s,uuid:l}})(i);e(a,{label:l,id:o,uuid:d,link:s}),"dismiss"===a&&ai(),eh(s)&&s.length>0&&t(s,!0)})(t)),l=k("div",{id:an});if((e=>{if(!e)return!1;let t=Object.keys(e);if(!t.includes(at)||!t.includes(an))return!1;let n=Object.values(e);for(let e=0;e<n.length;e+=1){if(!tr(n[e],"style")||!tr(n[e],"params"))return!1;for(let t=0;t<aa.length;t+=1)if(!tr(n[e].params,aa[t]))return!1}return!0})(a)||(a=(e=>{if(!e)return;let{uiTakeover:t=!1}=e;return{[ar]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[at]:{style:(e=>{let{verticalAlign:t,width:n,horizontalAlign:r,backdropColor:i,height:a,cornerRadius:o,horizontalInset:s,verticalInset:l,uiTakeover:d=!1}=e,c={width:n?`${n}%`:"100%",backgroundColor:i||"rgba(0, 0, 0, 0.5)",borderRadius:o?`${o}px`:"0px",border:"none",position:d?"fixed":"relative",overflow:"hidden"};return"left"===r?c.left=s?`${s}%`:"0":"right"===r?c.right=s?`${s}%`:"0":"center"===r&&(c.left="50%",c.transform="translateX(-50%)"),"top"===t?c.top=l?`${l}%`:"0":"bottom"===t?(c.position="fixed",c.bottom=l?`${l}%`:"0"):"center"===t&&(c.top="50%",c.transform=`${"center"===r?`${c.transform} `:""}translateY(-50%)`,c.display="flex",c.alignItems="center",c.justifyContent="center"),a?c.height=`${a}vh`:c.height="100%",c})(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[an]:{style:(e=>{let{backdropOpacity:t,backdropColor:n}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:n||"#FFFFFF"}})(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}}}})(i)),a){var d;d=a,[{id:an,element:l},{id:at,element:o},{id:ar,element:s}].forEach(({id:e,element:t})=>{let{style:n={},params:r={}}=d[e];Object.assign(t.style,n);let{parentElement:i="body",insertionMethod:a="appendChild",enabled:o=!0}=r,s=document.querySelector(i);o&&s&&"function"==typeof s[a]&&s[a](t)})}})(e,(e,n)=>{let i={};i[rB.INTERACT]=1,-1!==Object.values(rB).indexOf(e)&&(i[e]=1),t({decisionsMeta:[r],propositionAction:n,eventType:rj,propositionEventTypes:Object.keys(i)})}),n({meta:r})}))(e,l)},logger:t})},logger:t}),I=(()=>{let e=Promise.resolve([]);return{concat(t){e=e.then(e=>t.then(t=>e.concat(t)).catch(()=>e))},clear(){let t=e;return e=Promise.resolve([]),t}}})(),T=((e,t)=>(n,r,i)=>{if(!n)return()=>void 0;if(!r){let e=S();return t.concat(e.promise),e.resolve}return(t=[],n=[])=>{N(t)&&e({decisionsMeta:t,viewName:i}),N(n)&&e({decisionsMeta:n,eventType:rV,propositionAction:{reason:"Conflict"},viewName:i})}})(l,I),A=(({logger:e,prehidingStyle:t,showContainers:n,hideContainers:r,mergeQuery:i,processPropositions:a,createProposition:o,notificationHandler:s,consent:l})=>({cacheUpdate:d,personalizationDetails:c,event:u,onResponse:m})=>{let{state:p,wasSet:h}=l.current();"out"===p&&h||(c.isRenderDecisions()?r(t):n()),i(u,c.createQueryDetails());let g=s(c.isRenderDecisions(),c.isSendDisplayEvent(),c.getViewName());m(({response:t})=>{let r,i,s,l=t.getPayloadsByType("personalization:decisions");N(l)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:c.createQueryDetails()}});let{page:u=[],view:m=[],proposition:p=[]}=ee(l.map(e=>o(e)),e=>e.getScopeType()),h=d.update(m);return c.isRenderDecisions()?({render:r,returnedPropositions:i,returnedDecisions:s}=a([...u,...h],p),N(u)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:tN,propositions:u.map(e=>e.toJSON())}}),N(h)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${c.getViewName()}.`,logLevel:"info",detail:{scope:c.getViewName(),propositions:h.map(e=>e.toJSON())}}),r().then(g),n()):{returnedPropositions:i,returnedDecisions:s}=a([],[...u,...h,...p]),{propositions:i,decisions:s}})})({prehidingStyle:o,showContainers:d,hideContainers:c,mergeQuery:iz,processPropositions:b,createProposition:y,notificationHandler:T,consent:r,logger:t}),_=(({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:n,getInteractionMetas:r,getClickMetas:i,getClickSelectors:a,autoCollectPropositionInteractions:o})=>({event:s,clickedElement:l})=>{let d,c,u,m=[];if([t(l,r,o),n(l,a(),i)].forEach(({decisionsMeta:e,propositionActionLabel:t,propositionActionToken:n,viewName:r})=>{Array.prototype.push.apply(m,e),!d&&t&&(d=t),!c&&n&&(c=n),!u&&r&&(u=r)}),N(m)){let t={eventType:rj};u&&(t.web={webPageDetails:{viewName:u}}),s.mergeXdm(t),e(s,m,[rB.INTERACT],((e,t)=>{if(!t&&!e)return;let n={};return e&&(n.label=e),t&&(n.tokens=[t]),n})(d,c))}})({mergeDecisionsMeta:iF,collectInteractions:ao,collectClicks:iV,getInteractionMetas:m,getClickMetas:g,getClickSelectors:h,autoCollectPropositionInteractions:s}),P=(({processPropositions:e,viewCache:t,logger:n})=>({personalizationDetails:r,onResponse:i})=>{let a,o,s=r.getViewName();return i(()=>({propositions:a,decisions:o})),t.getView(s).then(t=>{let i;return r.isRenderDecisions()?({render:i,returnedPropositions:a,returnedDecisions:o}=e(t),n.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:t.map(e=>e.toJSON())}}),i()):({returnedPropositions:a,returnedDecisions:o}=e([],t),[])})})({processPropositions:b,viewCache:w,logger:t}),O=(({processPropositions:e,createProposition:t,renderedPropositions:n,viewCache:r})=>{let i=e=>!(e.scope===tN&&e.renderAttempted);return({propositions:a=[],metadata:o={},viewName:s})=>{let l=S();n.concat(l.promise);let d=(({propositions:e,metadata:t})=>e.filter(i).map(e=>{if(N(e.items)){let{id:n,scope:r,scopeDetails:i}=e;return{id:n,scope:r,scopeDetails:i,items:(({items:e,metadataForScope:t={}})=>{let{actionType:n,selector:r}=t;return e.filter(e=>((e,t)=>"function"==typeof iJ[e]&&iJ[e](e,t))(e.schema,n)).map(e=>{let{schema:i}=e;return i===rP||iH(i,n)?eu(t)?void 0:{...e,schema:iH(i,n)?r_:i,data:{...e.data,selector:r,type:n}}:{...e}}).filter(e=>e)})({items:e.items,metadataForScope:t[e.scope]})}}return e}).filter(e=>N(e.items)))({propositions:a,metadata:o}).map(e=>t(e));return Promise.resolve().then(()=>s?r.getView(s):[]).then(t=>{let{render:n,returnedPropositions:r}=e([...d,...t]);return n().then(l.resolve),{propositions:r}})}})({processPropositions:b,createProposition:y,renderedPropositions:I,viewCache:w}),R=(({targetMigrationEnabled:e})=>e?e=>{e.getPayload().mergeMeta({target:{migration:!0}})}:eg)({targetMigrationEnabled:a}),L=(({processPropositions:e,createProposition:t,notificationHandler:n})=>({renderDecisions:r,propositions:i,event:a,personalization:o={}})=>{if(!r)return Promise.resolve();let{sendDisplayEvent:s=!0}=o,l=a?a.getViewName():void 0,d=(()=>{let e=0;return t=>{let{items:n=[]}=t;return!!n.some(e=>e.schema===rx)&&(e+=1)>1}})(),c=i.map(e=>t(e,!0,d(e))),{render:u,returnedPropositions:m}=e(c),p=n(r,s,l),h=c.reduce((e,t)=>(e[t.getId()]=t,e),{});return u().then(e=>{p(e.filter(e=>!h[e.id].shouldSuppressDisplay()),e.filter(e=>h[e.id].shouldSuppressDisplay()))}),Promise.resolve({propositions:m})})({processPropositions:b,createProposition:y,notificationHandler:T}),x=(({showContainers:e,consent:t})=>()=>{let{state:n,wasSet:r}=t.current();"out"===n&&r?e():t.awaitConsent().catch(e)})({showContainers:d,consent:r});return(({getPageLocation:e,logger:t,fetchDataHandler:n,viewChangeHandler:r,onClickHandler:i,isAuthoringModeEnabled:a,mergeQuery:o,viewCache:s,showContainers:l,applyPropositions:d,setTargetMigration:c,mergeDecisionsMeta:u,renderedPropositions:m,onDecisionHandler:p,handleConsentFlicker:h})=>({lifecycle:{onComponentsRegistered(){h()},onDecision:p,onBeforeRequest:({request:e})=>(c(e),Promise.resolve()),onBeforeEvent({event:i,renderDecisions:d,decisionScopes:c=[],personalization:p={},onResponse:h=eg,onRequestFailure:g=eg}){if(h(()=>({propositions:[]})),g(()=>l()),a())return t.warn("Rendering is disabled for authoring mode."),o(i,{enabled:!1}),Promise.resolve();let f=(({getPageLocation:e,renderDecisions:t,decisionScopes:n,personalization:r,event:i,isCacheInitialized:a,logger:o})=>{let s=i.getViewName();return{isRenderDecisions:()=>t,isSendDisplayEvent:()=>!!r.sendDisplayEvent,shouldIncludeRenderedPropositions:()=>!!r.includeRenderedPropositions,getViewName:()=>s,hasScopes:()=>n.length>0||N(r.decisionScopes),hasSurfaces:()=>N(r.surfaces),hasViewName:()=>eh(s),createQueryDetails(){let t=[...n];N(r.decisionScopes)&&t.push(...r.decisionScopes);let i=((e=[],t,n)=>e.map(e=>((e,t,n)=>{let r,i,a=e=>(n.warn(e),null);if(!eh(e))return a(`Invalid surface: ${e}`);let o=(e=>{let t,n,r,i=e.match(rb);return i?{surfaceType:eh(t=i[1])?t.toLowerCase():"",authority:eh(n=i[2])?n.toLowerCase():"",path:eh(r=i[3])?rk(r):"/",fragment:i[4]}:null})((r=e,i=t,r.startsWith("#")?rT(i)+r:r));return null===o?a(`Invalid surface: ${e}`):["web","webapp"].includes(o.surfaceType)?o.authority&&rS.test(o.authority)?o.path&&!rI.test(o.path)?a(`Invalid path ${o.path} in surface: ${e}`):o.fragment&&!rC.test(o.fragment)?a(`Invalid fragment ${o.fragment} in surface: ${e}`):o:a(`Invalid authority ${o.authority} in surface: ${e}`):a(`Unsupported surface type ${o.surfaceType} in surface: ${e}`)})(e,t,n)).filter(e=>null!=e).map(rD))(r.surfaces,e,o);if(this.shouldRequestDefaultPersonalization()){t.includes(tN)||t.push(tN);let n=rT(e);i.includes(n)||i.push(n)}let a=[rN,rP,rO,rL,rR,rx,"https://ns.adobe.com/personalization/message/content-card"];return t.includes(tN)&&a.push(r_),{schemas:a,decisionScopes:rM(t),surfaces:rM(i)}},isCacheInitialized:()=>a,shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return r.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==r.defaultPersonalizationEnabled}}})({getPageLocation:e,renderDecisions:d,decisionScopes:c,personalization:p,event:i,isCacheInitialized:s.isInitialized(),logger:t}),v=[];if(f.shouldIncludeRenderedPropositions()&&v.push(m.clear()),f.shouldFetchData()){let e=s.createCacheUpdate(f.getViewName());g(()=>e.cancel()),n({cacheUpdate:e,personalizationDetails:f,event:i,onResponse:h})}else f.shouldUseCachedData()&&v.push(r({personalizationDetails:f,event:i,onResponse:h,onRequestFailure:g}));return Promise.all(v).then(e=>{let t=e.flatMap(e=>e);N(t)&&u(i,t,[rB.DISPLAY])})},onClick({event:e,clickedElement:t}){i({event:e,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:e=>(({logger:e,options:t})=>{let n=tr({propositions:e9(tr({id:ti().required(),scope:ti().required(),scopeDetails:tr({decisionProvider:ti().required()}).required(),items:e9(tr({id:ti().required(),schema:ti().required(),data:tr(e6())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:tr(e6()),viewName:ti()}).required();try{return n(t)}catch(t){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",t),rJ}})({logger:t,options:e}),run:d}}}))({getPageLocation:f,logger:t,fetchDataHandler:A,viewChangeHandler:P,onClickHandler:_,isAuthoringModeEnabled:iB,mergeQuery:iz,viewCache:w,showContainers:d,applyPropositions:O,setTargetMigration:R,mergeDecisionsMeta:iF,renderedPropositions:I,onDecisionHandler:L,handleConsentFlicker:x})};as.namespace="Personalization";let al=iZ.map(e=>te(e));as.configValidators=tr({prehidingStyle:ti().nonEmpty(),targetMigrationEnabled:e7().default(!1),autoCollectPropositionInteractions:tr({AJO:e4(al).default(iX),TGT:e4(al).default(iW)}).default({AJO:iX,TGT:iW}).noUnknownFields()});let ad=as,ac=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,au=(e,t={},n=[])=>(Object.keys(e).forEach(r=>{ac(e[r])||Array.isArray(e[r])?au(e[r],t,[...n,r]):t[[...n,r].join(".")]=e[r]}),t),am=e=>ac(e)?au(e):e,ap={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},ah={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},ag={AND:"and",OR:"or"},af={ORDERED:"ordered",MOST_RECENT:"mostRecent"};function av(e){return"object"==typeof e||void 0===e}function ay(e){return"number"==typeof e}let aw={[ah.EQUALS]:{matches:(e,t,n=[])=>{if(av(e[t]))return!1;let r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!av(n[e])&&r===String(n[e]).toLowerCase())return!0;return!1}},[ah.NOT_EQUALS]:{matches:(e,t,n=[])=>{if(av(e[t]))return!1;let r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!av(n[e])&&r===String(n[e]).toLowerCase())return!1;return!0}},[ah.EXISTS]:{matches:(e,t)=>void 0!==e[t]&&null!==e[t]},[ah.NOT_EXISTS]:{matches:(e,t)=>void 0===e[t]||null===e[t]},[ah.GREATER_THAN]:{matches:(e,t,n=[])=>{let r=e[t];if(!ay(r))return!1;for(let e=0;e<n.length;e+=1)if(ay(n[e])&&r>n[e])return!0;return!1}},[ah.GREATER_THAN_OR_EQUAL_TO]:{matches:(e,t,n=[])=>{let r=e[t];if(!ay(r))return!1;for(let e=0;e<n.length;e+=1)if(ay(n[e])&&r>=n[e])return!0;return!1}},[ah.LESS_THAN]:{matches:(e,t,n=[])=>{let r=e[t];if(!ay(r))return!1;for(let e=0;e<n.length;e+=1)if(ay(n[e])&&r<n[e])return!0;return!1}},[ah.LESS_THAN_OR_EQUAL_TO]:{matches:(e,t,n=[])=>{let r=e[t];if(!ay(r))return!1;for(let e=0;e<n.length;e+=1)if(ay(n[e])&&r<=n[e])return!0;return!1}},[ah.CONTAINS]:{matches:(e,t,n=[])=>{if(av(e[t]))return!1;let r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!av(n[e])&&-1!==r.indexOf(String(n[e]).toLowerCase()))return!0;return!1}},[ah.NOT_CONTAINS]:{matches:(e,t,n=[])=>{if(av(e[t]))return!1;let r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!av(n[e])&&-1!==r.indexOf(String(n[e]).toLowerCase()))return!1;return!0}},[ah.STARTS_WITH]:{matches:(e,t,n=[])=>{if(av(e[t]))return!1;let r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!av(n[e])&&r.startsWith(String(n[e]).toLowerCase()))return!0;return!1}},[ah.ENDS_WITH]:{matches:(e,t,n=[])=>{if(av(e[t]))return!1;let r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!av(n[e])&&r.endsWith(n[e].toLowerCase()))return!0;return!1}}},aE="eventType",ab=["iam.eventType",aE,"type"],aS=["iam.id","id"],aI=(e,t)=>{for(let n=0;n<t.length;n+=1)if(void 0!==e[t[n]])return t[n];throw Error("The event does not match the expected schema.")},aC=e=>{let t=structuredClone(e);return[[aI(t,ab),aE],[aI(t,aS),"eventId"]].forEach(([e,n])=>{e!==n&&(t[n]=t[e],delete t[e])}),t};function ak(e,t){return{evaluate:(e,n)=>t.evaluate(e,n),toString:()=>`Condition{type=${e}, definition=${t}}`}}function aD(e){let{id:t,type:n,detail:r}=e;return{id:t,type:n,detail:r}}function aT(e){let{condition:t,consequences:n,key:r}=e,i=function e(t){let{type:n,definition:r}=t;if(ap.MATCHER===n)return ak(n,function(e){let{key:t,matcher:n,values:r}=e;return{evaluate:e=>{let i=aw[n];return!!i&&i.matches(e,t,r)}}}(r));if(ap.GROUP===n)return ak(n,function(t){var n;let{logic:r,conditions:i}=t;return n=i.map(e),{evaluate:(e,t)=>{if(ag.AND===r){let r=!0;for(let i=0;i<n.length;i+=1)r=r&&n[i].evaluate(e,t);return r}if(ag.OR===r){let r=!1;for(let i=0;i<n.length;i+=1)if(r=r||n[i].evaluate(e,t))return!0}return!1}}}(r));if(ap.HISTORICAL===n)return ak(n,function(e){let{events:t,from:n,to:r,matcher:i,value:a,searchType:o}=e;return{evaluate:(e,s)=>{var l=af.MOST_RECENT===o?function(e,t,n,r=0,i=1/0){try{return e.reduce((e,a,o)=>{let s=n.generateEventHash(aC(a)),l=t.events[s];if(!l)return e;let d=l.timestamps.filter(e=>e>=r&&e<=i).pop();return d&&d>e.timestamp?{index:o,timestamp:d}:e},{index:-1,timestamp:0}).index}catch{return -1}}(t,e,s,n,r):af.ORDERED===o?function(e,t,n,r=0,i=1/0){try{let a=r,o=e.every(e=>{let r=n.generateEventHash(aC(e)),o=t.events[r];if(!o)return!1;let s=o.timestamps[0],l=s>=a&&s<=i;return a=s,l});return Number(o)}catch{return 0}}(t,e,s,n,r):function(e,t,n,r=0,i=1/0){return e.reduce((e,a)=>{try{let o=n.generateEventHash(aC(a)),s=t.events[o];if(!s)return e;let{timestamps:l=[]}=s;return e+l.filter(e=>e>=r&&e<=i).length}catch{return e}},0)}(t,e,s,n,r);switch(i){case ah.GREATER_THAN:return l>a;case ah.GREATER_THAN_OR_EQUAL_TO:return l>=a;case ah.LESS_THAN:return l<a;case ah.LESS_THAN_OR_EQUAL_TO:return l<=a;case ah.EQUALS:return l===a;case ah.NOT_EQUALS:return l!==a;default:return!1}}}}(r));throw Error("Can not parse condition")}(t),a=n.map(aD);return{key:r,execute:(e,t)=>i.evaluate(e,t)?a:[],toString:()=>`Rule{condition=${i}, consequences=${a}}`}}function aA(e,t=e=>e[0]){let n={};return function(...r){let i=t(r);return void 0===n[i]&&(n[i]=e(...r)),n[i]}}function aN(e,t){let n=65535&t;return((t-n)*e|0)+(n*e|0)|0}let a_=aA(function(e,t=0){let n,r=e.length,i=t,a=-2&r;for(let t=0;t<a;t+=2)n=(131071&(n=aN(n=e.charCodeAt(t)|e.charCodeAt(t+1)<<16,0xcc9e2d51)))<<15|n>>>17,i^=n=aN(n,0x1b873593),i=5*(i=(524287&i)<<13|i>>>19)+0xe6546b64|0;return r%2==1&&(n=(131071&(n=aN(n=e.charCodeAt(a),0xcc9e2d51)))<<15|n>>>17,i^=n=aN(n,0x1b873593)),i^=r<<1,i^=i>>>16,i=aN(i,0x85ebca6b),i^=i>>>13,i=aN(i,0xc2b2ae35),i^=i>>>16},e=>e.join("-")),aP=aA(function(e,t){return Math.round(Math.abs(a_(e))%t/t*1e4)/100});function aO(e,t){return t.map(t=>t.execute(e)).filter(e=>e.length>0)}let aR=e=>{let t=structuredClone(e);return Y(Object.keys(t).sort().reduce((e,n)=>{let r=t[n];return void 0==r||""===r?e:e+=`${n}:${r}`},""))},aL=1e3,ax=30,aM="events",a$={TYPE:"~type",SOURCE:"~source"},aj={EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},aU={REQUEST:"com.adobe.eventSource.requestContent"},aq="insert",aV=e=>e?.scopeDetails?.activity?.id,aB=e=>{e.clear()},aF={cjmiam:(e,t,n)=>{let{html:r,mobileParameters:i}=n;return{schema:rx,data:{mobileParameters:i,webParameters:{},content:r,contentType:i6},id:e}},schema:(e,t,n)=>{let{schema:r,data:i,id:a}=n;return{schema:r,data:i,id:a||e}}},az=e=>{let{schema:t,data:n}=e;if(t===rR)return!0;if(t!==rO)return!1;try{let e="string"==typeof n.content?JSON.parse(n.content):n.content;return e&&Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"rules")}catch{return!1}},aH=e=>{let t={},n=e.split(".");switch(n.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=n[1];break;case 3:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=n[2];break;case 4:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=`${n[2]}.${n[3]}`}return t},aJ=(e,t=aH)=>{"string"!=typeof e&&(e="");let{host:n,path:r,query:i,anchor:a}=(e=>{try{let t=new URL(e),n=t.pathname;return e.endsWith("/")||"/"!==n||(n=""),{host:t.hostname,path:n,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{host:"",path:"",query:"",anchor:""}}})(e);return{path:r,query:i,fragment:a,...t(n)}},aY=(e,...t)=>t,aG=(e,...t)=>!0,aQ=({config:e,eventManager:t,createNamespacedStorage:n,consent:r,getBrowser:i,logger:a})=>{let o,{orgId:s,personalizationStorageEnabled:l}=e,d=iM({eventManager:t,mergeDecisionsMeta:iF}),c=n(`${K(s)}.decisioning.`);l||aB(c.persistent);let u=(({storage:e,logger:t})=>{let n,r,i,a=e,o=e=>{let t,o,s=(t=a=e,e=>{try{let e=t.getItem(aM);return[JSON.parse(e),e.length]}catch{}return[e,0]});o=a,n=e=>{o.setItem(aM,JSON.stringify(e))},[r,i]=s({}),i>2097152&&(r=((e=ax,t=aL)=>n=>{let r=Object.entries(n).reduce((e,[t,{timestamps:n=[]}])=>(n.forEach(n=>{e.push({key:t,timestamp:n})}),e),[]),i=(e=>{let t=new Date;return t.setDate(t.getDate()-e),t})(e);return(r=r.filter(({timestamp:e})=>e>=i)).sort((e,t)=>e.timestamp-t.timestamp),(r=r.slice(-t)).reduce((e,{key:t,timestamp:n})=>(e[t]||(e[t]={timestamps:[]}),e[t].timestamps.push(n),e),{})})()(r),n(r))};o(e);let s=(e={eventType:null,eventId:null},i=aq)=>{let{eventType:a,eventId:o}=e;if(!a||!o)return;let s=aR(e);if("insertIfNotExists"===i&&r[s])return;r[s]&&Array.isArray(r[s].timestamps)||(r[s]={timestamps:[]});let l=new Date().getTime();return r[s].timestamps.push(l),r[s].timestamps.sort(),t.info("[Event History] Added event for",e,"with hash",s,"and timestamp",l),n(r),r[s]};return{addExperienceEdgeEvent:e=>{let{xdm:t}=e.getContent();if(!(e=>{let{_experience:t}=e||{};return!!t&&"object"==typeof t})(t))return;let{_experience:{decisioning:{propositionEventType:n={},propositionAction:{id:r}={},propositions:i=[]}={}}}=t;Object.keys(n).filter(e=>1===n[e]).forEach(e=>{i.forEach(t=>{t?.scopeDetails?.decisionProvider==="AJO"&&s({eventId:aV(t),eventType:e,action:r})})})},addEvent:s,addEventPayloads:(e=[])=>e.map(({operation:e,event:t})=>s(t,e)),getEvent:(e,t)=>{let n=aR({eventType:e,eventId:t});if(r[n])return r[n]},toJSON:()=>r,setStorage:o}})({storage:(()=>{let e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,n)=>{e[t]=n}}})(),logger:a}),m=(({eventRegistry:e})=>{let t={},n=n=>{let r=aV(n);if(!r)return;let i=((e,t)=>{let n=e=>{let{id:t,type:n,detail:r}=e;return"function"==typeof aF[n]?aF[n](t,n,r):r},r=aV(e),i=[];return Array.isArray(e.items)&&e.items.filter(az).forEach(e=>{let{data:t={},schema:n}=e,r=n===rR?t:t.content;r&&i.push(function(e,t={generateEventHash:()=>{throw Error("No hash function provided")}}){let{rules:n,metadata:r={}}=function(e){let{version:t,rules:n,metadata:r}=e,i=n.map(aT);return{version:t,rules:i,metadata:function(e){if(e)return{provider:e.provider,providerData:Object.assign({},e.providerData)}}(r)}}(e),{provider:i}=r;return"TGT"===i?function(e,t){let{providerData:n}=t;if(!n)throw Error("Provider data is missing in metadata");let{identityTemplate:r,buckets:i}=n;if(!r)throw Error("Identity template is missing in provider data");if(!i)throw Error("Buckets is missing in provider data");let a=e.filter(e=>!e.key),o=function(e){let t={};for(let n=0;n<e.length;n+=1){let r=e[n];r.key&&(t[r.key]||(t[r.key]=[]),t[r.key].push(r))}return t}(e),{buckets:s}=t.providerData;return{provider:"TGT",execute:e=>{let n=function(e){let{xdm:t}=e;if(!t)throw Error("XDM object is missing in the context");let{identityMap:n}=t;if(!n)throw Error("Identity map is missing in the XDM object");let r=n.ECID;if(!r)throw Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(r)||0===r.length)throw Error("ECID identities array is empty or not an array");let i=r[0].id;if(!i)throw Error("ECID identity is missing in the identities array");return i}(e),r=aO(e,a),i=Object.keys(o),l=[];for(let r=0;r<i.length;r+=1){var d;let a=i[r],c=o[a],u=aO((d=function(e,t,n){let{providerData:r}=n,{identityTemplate:i}=r;return i.replace("<key>",t).replace("<identity>",e)}(n,a,t),{allocation:aP(d,s),...e}),c);l.push(...u)}return[...r,...l]}}}(n,r):{provider:"DEFAULT",execute:e=>n.map(n=>n.execute(e,t)).filter(e=>e.length>0)}}("string"==typeof r?JSON.parse(r):r,{generateEventHash:aR}))}),{rank:e?.scopeDetails?.rank||1/0,evaluate:a=>{let o=t.getEvent(r$,r),s=o?.timestamps[0],l=((e=[])=>Array.isArray(e)?e.flat(1/0):e)(i.map(e=>e.execute(a))).map(n).map(e=>{let n=t.addEvent({eventType:rB.TRIGGER,eventId:r}).timestamps[0];return{...e,data:{...e.data,qualifiedDate:n,displayedDate:s}}});return{...e,items:l}},isEvaluable:i.length>0}})(n,e);i.isEvaluable&&(t[r]=i)};return{addPayload:n,addPayloads:e=>{e.forEach(n)},evaluate:(e={})=>Object.values(t).sort(({rank:e},{rank:t})=>e-t).map(t=>t.evaluate(e)).filter(e=>e.items.length>0)}})({eventRegistry:u}),p=(({eventRegistry:e,window:t,getBrowser:n})=>{let r=new Date().getTime(),i={browser:{name:n()},page:{title:t.title,url:t.url,...aJ(t.url)},referringPage:{url:t.referrer,...aJ(t.referrer)}};return{getContext:(n={})=>({...am({...{...i,...(()=>{let e=new Date,t=e.getTime();return{pageLoadTimestamp:r,currentTimestamp:t,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:t-r,"~timestampu":t/1e3,"~timestampz":e.toISOString()}})(),window:(()=>{let e=t.height;return{height:e,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}})(),"~sdkver":tJ},...n}),events:e.toJSON()})}})({eventRegistry:u,window,getBrowser:i}),h=(({contextProvider:e,decisionProvider:t})=>({optionsValidator:e=>(({options:e})=>tr({renderDecisions:e7(),personalization:tr({decisionContext:tr({})})}).noUnknownFields()(e))({options:e}),run:({renderDecisions:n,decisionContext:r,applyResponse:i})=>i({renderDecisions:n,propositions:t.evaluate(e.getContext(r))})}))({contextProvider:p,decisionProvider:m}),g=(({collect:e})=>{let t=()=>void 0,n=new Set,r=(t,r=[])=>{if(!(r instanceof Array)||!Object.values(rB).includes(t))return Promise.resolve();let i=[],a=new Set;return r.forEach(e=>{let r=(e=>{let{id:t,scope:n,scopeDetails:r}=e;return{id:t,scope:n,scopeDetails:r}})(e);((e,t,r)=>{let i=[e,t].join("-"),a=!r.has(i)&&([rB.INTERACT,rB.DISMISS].includes(e)||!n.has(i));return r.add(i),n.add(i),a})(t,r.id,a)&&i.push(r)}),i.length>0?e({decisionsMeta:i,eventType:rz[t],documentMayUnload:!0}):Promise.resolve()},i=(()=>{let e=aY,t=aG,n=0,r={};return{add:(e,t)=>{let i;return"function"!=typeof e?()=>void 0:(r[n+=1]={callback:e,params:t},{id:n,unsubscribe:(i=n,()=>{delete r[i]})})},emit:(...n)=>{Object.values(r).forEach(({callback:r,params:i})=>{let a=e(i,...n);t(i,...a)&&r(...a)})},emitOne:(n,...i)=>{if(!n||!r[n])return;let{callback:a,params:o}=r[n],s=e(o,...i);t(o,...s)&&a(...s)},hasSubscriptions:()=>Object.keys(r).length>0,setEmissionPreprocessor:t=>{"function"==typeof t&&(e=t)},setEmissionCondition:e=>{"function"==typeof e&&(t=e)}}})();return i.setEmissionPreprocessor((e,t)=>{let{surfacesFilter:n,schemasFilter:i}=e;return[{propositions:t.filter(e=>!n||n.includes(e.scope)).map(e=>{let{items:t=[]}=e;return{...e,items:t.filter(e=>!i||i.includes(e.schema))}}).filter(e=>e.items.length>0)},r]}),{refresh:e=>{(t=t=>{if(t)return void i.emitOne(t,e);i.emit(e)})()},command:{optionsValidator:e=>(({options:e})=>tr({surfaces:e9(ti()).uniqueItems(),schemas:e9(ti()).uniqueItems(),callback:e8().required()}).noUnknownFields()(e))({options:e}),run:({surfaces:e,schemas:n,callback:r})=>{let{id:a,unsubscribe:o}=i.add(r,{surfacesFilter:e instanceof Array?e:void 0,schemasFilter:n instanceof Array?n:void 0});return t(a),Promise.resolve({unsubscribe:o})}}}})({collect:d});return{lifecycle:{onDecision({propositions:e}){g.refresh(e)},onComponentsRegistered(e){o=(({lifecycle:e,eventRegistry:t})=>({renderDecisions:n=!1,propositions:r=[],event:i,personalization:a})=>{if(e){let o=(e=>{let t=[];return e.forEach(e=>{let n=[];e.items.forEach(e=>{"https://ns.adobe.com/personalization/eventHistoryOperation"===e.schema?t.push({operation:e.data.operation,event:{eventId:e.data.content["iam.id"],eventType:e.data.content["iam.eventType"]}}):n.push(e)}),e.items=n}),t})(r);t.addEventPayloads(o),e.onDecision({renderDecisions:n,propositions:r,event:i,personalization:a})}return{propositions:r}})({lifecycle:e.lifecycle,eventRegistry:u}),l&&r.awaitConsent().then(()=>{u.setStorage(c.persistent)}).catch(()=>{c&&aB(c.persistent)})},onBeforeEvent({event:e,renderDecisions:t,personalization:n={},onResponse:r=eg}){let{decisionContext:i={}}=n;r((({renderDecisions:e,decisionProvider:t,applyResponse:n,event:r,personalization:i,decisionContext:a})=>{let o={...am(r.getContent()),...a};return({response:a})=>(t.addPayloads(a.getPayloadsByType("personalization:decisions")),r.hasQuery())?n({renderDecisions:e,propositions:t.evaluate(o),event:r,personalization:i}):{propositions:[]}})({renderDecisions:t,decisionProvider:m,applyResponse:o,event:e,personalization:n,decisionContext:p.getContext({[a$.TYPE]:aj.EDGE,[a$.SOURCE]:aU.REQUEST,...i})}))},onBeforeRequest({request:e}){let{events:t=[]}=e.getPayload().toJSON();0!==t.length&&t.forEach(e=>u.addExperienceEdgeEvent(e))}},commands:{evaluateRulesets:{run:({renderDecisions:e,personalization:t={}})=>{let{decisionContext:n={}}=t;return h.run({renderDecisions:e,decisionContext:{[a$.TYPE]:aj.RULES_ENGINE,[a$.SOURCE]:aU.REQUEST,...n},applyResponse:o})},optionsValidator:h.optionsValidator},subscribeRulesetItems:g.command}}};aQ.namespace="RulesEngine",aQ.configValidators=tr({personalizationStorageEnabled:e7().default(!1)});let aX=aQ,aW=tr({streamingMedia:tr({channel:ti().nonEmpty().required(),playerName:ti().nonEmpty().required(),appVersion:ti(),mainPingInterval:tt().minimum(10).maximum(50).default(10),adPingInterval:tt().minimum(1).maximum(10).default(10)}).noUnknownFields()}),aK=({config:e,logger:t,eventManager:n,sendEdgeNetworkRequest:r,consent:i})=>{let a=rt({config:e}),o=n8({config:e,eventManager:n,logger:t,consent:i,sendEdgeNetworkRequest:r,setTimestamp:tH(()=>new Date)}),s=rn({mediaSessionCacheManager:a,mediaEventManager:o,config:e}),l=rr({config:e,mediaEventManager:o,mediaSessionCacheManager:a}),d=ra({mediaSessionCacheManager:a,config:e,trackMediaEvent:s});return(({config:e,trackMediaEvent:t,trackMediaSession:n,mediaResponseHandler:r})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=eg}){if(!e)return;let{legacy:n,playerId:i,getPlayerDetails:a}=e;n||t(({response:e})=>r({playerId:i,getPlayerDetails:a,response:e}))}},commands:{createMediaSession:{optionsValidator:e=>(({options:e})=>e4([tr({playerId:ti().required(),getPlayerDetails:e8().required(),xdm:tr({mediaCollection:tr({sessionDetails:tr(e6()).required()})}),edgeConfigOverrides:ts}).required(),tr({xdm:tr({mediaCollection:tr({playhead:tt().required(),sessionDetails:tr(e6()).required()})}),edgeConfigOverrides:ts}).required()],"an object with playerId, getPlayerDetails and xdm.mediaCollection.sessionDetails, or an object with xdm.mediaCollection.playhead and xdm.mediaCollection.sessionDetails")(e))({options:e}),run:n},sendMediaEvent:{optionsValidator:e=>(({options:e})=>e4([tr({playerId:ti().required(),xdm:tr({eventType:ta(...Object.values(n7)).required(),mediaCollection:tr(e6())}).required()}).required(),tr({xdm:tr({eventType:ta(...Object.values(n7)).required(),mediaCollection:tr({playhead:tt().integer().required(),sessionID:ti().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e))({options:e}),run:n=>e.streamingMedia?t(n):Promise.reject(Error("Streaming media is not configured."))}}}))({config:e,trackMediaEvent:s,mediaEventManager:o,mediaResponseHandler:d,trackMediaSession:l})};aK.namespace="Streaming media",aK.configValidators=aW;let aZ=aK,a0="advertising",a1="_les_lsc",a2="lastConversionTime",a5="displayClickCookieExpires",a3="rampIdExpires",a4="surferId",a6="rampId",a9="id5Id",a7=30,a8="advertising.enrichment",oe="Ad conversion submission failed",ot="ev_lcc";async function on({eventManager:e,cookieManager:t,adConversionHandler:n,logger:r,skwcid:i,efid:a}){r.info("Processing ad conversion",{skwcid:i,efid:a});let o=e.createEvent();if(void 0!==i&&void 0!==a&&i.startsWith("AL!")){let e={click_time:Date.now(),...void 0!==i&&{skwcid:i},...void 0!==a&&{efid:a}};t.setValue(a1,e)}let s={_experience:{adcloud:{conversionDetails:{...void 0!==i&&{trackingCode:i},...void 0!==a&&{trackingIdentities:a}}}},eventType:"advertising.enrichment_ct",timestamp:new Date().toISOString()};o.setUserXdm(s),t.setValue(a2),t.setValue("lastConversionTimeExpires",Date.now()+78624e5);try{return await n.trackAdConversion({event:o})}catch(e){throw r.error(oe,e),e}}let or="",oi="",oa=null,oo=function(e,t,n=!0){if(t&&!es({getBrowser:t})())return Promise.resolve(null);if(or&&""!==or)return Promise.resolve(or);if(e){let t=e.getValue(a4);if(t)return or=t,Promise.resolve(t)}return n?(oa||(oa=new Promise((e,t)=>{setTimeout(()=>{var n;let r="https:"===document.location.protocol?"https:":"http:",i=new URLSearchParams({google:"__EFGCK__",gsurfer:"__EFGSURFER__",imsId:"__EFIMSORGID__",is_fb_cookie_synced:"__EFFB__",optout:"__EFOPTOUT__",throttleCookie:"__EFSYNC__",time:"__EFTIME__",ev_lcc:"__LCC__"}),a=new URLSearchParams({ev_gb:"0",url:`${r}//www.everestjs.net/static/pixel_details.html#${i.toString()}`});n=k("iframe",{src:`${r}//pixel.everesttech.net/1/gr?${a.toString()}`},{height:0,width:0,frameBorder:0,style:{display:"none"}},[]),document.body?document.body.appendChild(n):window.addEventListener("load",()=>{document.body.appendChild(n)},!1),window.addEventListener("message",function n(r){if(r.origin.includes("www.everestjs.net"))try{let t,i,a,o=r.data,s=o.indexOf("#");if(-1===s)return void e({surferId:null,displayClickCookie:null});let l=new URLSearchParams(o.substring(s+1)),d=l.get("gsurfer");d&&(t=d);let c=l.get(ot);c&&"__LCC__"!==c&&(i=c),a=n,window.removeEventListener("message",a,!1),t?(or=t,oi=i,e({surferId:or,displayClickCookie:oi})):e({surferId:null,displayClickCookie:null})}catch(e){t(e)}finally{oa=null}},!1)},5e3)}))).then(t=>(e&&t&&(t.surferId&&e.setValue(a4,t.surferId),t.displayClickCookie&&(e.setValue(ot,t.displayClickCookie),e.setValue(a5,Date.now()+9e5))),t.surferId)):Promise.resolve(null)},os={MAX_COUNT:15,MAX_TIME_MS:3e4,DELAY_BASE_MS:500,MAX_DELAY_MS:5e3,SHORT_TIMEOUT_MS:2e3},ol={rampIdEnv:void 0,rampIdCallInitiated:!1,inProgressRampIdPromise:null,envelopeRetrievalInProgress:!1},od=(e,t,n,r)=>{let i;try{i=JSON.parse(e).envelope}catch{i=e}i&&!ol.rampIdCallInitiated?(ol.rampIdCallInitiated=!0,ol.rampIdEnv=i,ol.envelopeRetrievalInProgress=!1,ol.inProgressRampIdPromise=null,n.setValue(a6,ol.rampIdEnv),n.setValue(a3,Date.now()+1728e5),t(ol.rampIdEnv)):(r.warn("Invalid RampID envelope received",{envelope:i}),ol.envelopeRetrievalInProgress=!1)},oc=(e,t,n,r=!0,i=!1)=>{if(ol.rampIdEnv)return Promise.resolve(ol.rampIdEnv);if(n){let e=n.getValue(a6),t=n.getValue(a3);if(e&&t&&t>Date.now())return ol.rampIdEnv=e,Promise.resolve(e)}return r&&null!=t?((e,t,n,r=!1)=>{if(ol.inProgressRampIdPromise)return ol.inProgressRampIdPromise;let i=r?os.SHORT_TIMEOUT_MS:os.MAX_TIME_MS,a=!1,o=new Promise((r,i)=>{F(e,{onLoad:()=>{void 0===window.ats||ol.envelopeRetrievalInProgress||(ol.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(e=>{e?a||od(e,r,t,n):(ol.envelopeRetrievalInProgress=!1,window.addEventListener("lrEnvelopePresent",()=>{ol.envelopeRetrievalInProgress||a||(ol.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(e=>{a||od(e,r,t,n)},e=>{a||(n.error("Failed to retrieve envelope after event",e),ol.envelopeRetrievalInProgress=!1,i(e),ol.inProgressRampIdPromise=null)}))}))}).catch(e=>{a||(n.error("Error retrieving envelope",e),ol.envelopeRetrievalInProgress=!1,i(e),ol.inProgressRampIdPromise=null)})),((e,t,n,r)=>{let i=os.MAX_COUNT,a=1,o=0,s=()=>{if(ol.rampIdEnv)return;if(o>os.MAX_TIME_MS){r.error("Maximum retry time exceeded"),ol.envelopeRetrievalInProgress=!1,t(Error("Failed to retrieve RampID - timeout")),ol.inProgressRampIdPromise=null;return}if(0===i){r.error("Maximum retries exceeded"),ol.envelopeRetrievalInProgress=!1,t(Error("Failed to retrieve RampID after maximum retries")),ol.inProgressRampIdPromise=null;return}let l=Math.min(os.DELAY_BASE_MS*a,os.MAX_DELAY_MS);setTimeout(()=>{o+=l,i-=1,a+=1,void 0===window.ats||null===window.ats||ol.rampIdEnv||ol.envelopeRetrievalInProgress?s():(ol.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(t=>{od(t,e,n,r),ol.rampIdEnv||s()},()=>{r.warn("Failed to retrieve envelope"),ol.envelopeRetrievalInProgress=!1,s()}))},l)};s()})(e=>{a||r(e)},e=>{a||i(e)},t,n)},onError:e=>{a||i(e),ol.inProgressRampIdPromise=null}})});return ol.inProgressRampIdPromise=Promise.race([o,new Promise(e=>{setTimeout(()=>{a=!0,e(null)},i)})]).finally(()=>{ol.inProgressRampIdPromise=null}),ol.inProgressRampIdPromise})(t,n,e,i):Promise.resolve(null)},ou="",om=null,op=function(e,t,n=!0,r=!1){return ou&&""!==ou?Promise.resolve(ou):n?((e,t,n)=>{if(e=Math.floor(Number(e)),om)return om;let r=t?2e3:3e4,i=!1;return om=Promise.race([new Promise((t,r)=>{if(!e){n.error("Missing partner ID"),r(Error("ID5 partner ID is required"));return}let a=()=>{try{if(void 0===window.ID5)return void r(Error("ID5 object not available after script load"));ou=window.ID5.init({partnerId:e}).getUserId();let a=e=>{i||t(e)};ou?a(ou):window.ID5.init({partnerId:e}).onAvailable(function(t){(ou=t.getUserId())?a(ou):window.ID5.init({partnerId:e}).onAvailable(function(e){(ou=e.getUserId())?a(ou):(n.error("Failed to get ID5 ID after all retries"),a(null))})},1e3)}catch(e){n.error("Error during ID5 initialization",e),r(e)}};void 0!==window.ID5?a():F("https://www.everestjs.net/static/id5-api.js",{onLoad:a,onError:e=>{n.error("Script loading failed",e),r(e)}})}),new Promise(e=>{setTimeout(()=>{i=!0,e(null)},r)})]).finally(()=>{om=null})})(t,r,e).then(e=>e).catch(t=>{throw e.error("Failed to get ID5 ID",t),t}):Promise.resolve(null)},oh=()=>{let e=ev.parse(window.location.search);return{skwcid:e.s_kwcid,efid:e.ef_id}},og=e=>e&&Array.isArray(e)?e.filter(e=>e&&!0===e.enabled&&e.advertiserId).map(e=>e.advertiserId).join(", "):"",of=(e,t,n,r,i=!1)=>{let a=n.getValue(a1),o=null,s=n.getValue(a5);s&&s>Date.now()&&(o=n.getValue(ot));let l={advertising:{...a?.click_time&&{lastSearchClick:a.click_time},...o&&{lastDisplayClick:o},stitchIds:{...e[a4]&&{surferId:e[a4]},...e[a9]&&{id5:e[a9]},...e[a6]&&{rampIdEnv:e[a6]},ipAddress:"DUMMY_IP_ADDRESS"},advIds:og(r.advertiserSettings),...i&&{eventType:a8}}};return t.mergeQuery(l),t},ov=(e,t)=>{let n=Date.now(),r=t.getValue(`${e}_last_conversion`);return!!(r&&n-r<18e5)};async function oy({eventManager:e,cookieManager:t,logger:n,componentConfig:r,adConversionHandler:i,getBrowser:a}){let o={},s={},l=async()=>{if(!Object.entries(o).some(([e])=>!s[e]))return null;let a=Object.keys(o);try{let l=of(o,e.createEvent(),t,r,!0),d={eventType:a8,timestamp:new Date().toISOString()};l.setUserXdm(d);let c=await i.trackAdConversion({event:l}),u=Date.now();return a.forEach(e=>{s[e]=!0,t.setValue(`${e}_last_conversion`,u),n.info("Ad conversion submitted successfully".replace("{0}",e))}),t.setValue(a2,u),c}catch(e){return n.error(oe,e),null}},d=((e,t,n,r)=>{let i={};return ov(a4,n)||(i.surferId=oo(n,r,!0).catch(()=>null)),t.id5PartnerId&&t.dspEnabled&&!ov(a9,n)&&(i.id5Id=op(e,t.id5PartnerId).catch(()=>null)),t.rampIdJSPath&&t.dspEnabled&&!ov(a6,n)&&(i.rampId=oc(e,t.rampIdJSPath,n,!0).catch(()=>null)),i})(n,r,t,a);return 0===Object.keys(d).length?[]:Promise.allSettled(Object.entries(d).map(([e,t])=>t.then(t=>{if(t)return o[e]=t,l()}).catch(t=>(n.error("Unable to obtain ad identity".replace("{0}",e),t),null))))}async function ow({cookieManager:e,logger:t,event:n,componentConfig:r,advertising:i,getBrowser:a}){let{skwcid:o,efid:s}=oh();if(!(![tf,tg].includes(i?.handleAdvertisingData?.toLowerCase())||o&&s||ov(a4,e)&&ov(a9,e)&&ov(a6,e)))try{let o=i?.handleAdvertisingData?.toLowerCase()===tg,s=null;a&&a()===et||(s=oc(t,r.rampIdJSPath,e,o,o));let[l,d,c]=await Promise.allSettled([oo(e,a,o),op(t,r.id5PartnerId,o,o),s]),u={};if("fulfilled"===l.status&&l.value&&!ov(a4,e)&&(u.surferId=l.value),"fulfilled"===d.status&&d.value&&!ov(a9,e)&&(u.id5Id=d.value),"fulfilled"===c.status&&c.value&&!ov(a6,e)&&(u.rampId=c.value),0===Object.keys(u).length&&(ov(a4,e)||ov(a9,e)||ov(a6,e)))return;of(u,n,e,r)}catch(e){t.error("Error in onBeforeSendEvent hook:",e)}}let oE=tr({advertising:tr({id5PartnerId:ti(),rampIdJSPath:ti(),dspEnabled:e7(),advertiserSettings:e9(tr({advertiserId:ti().required(),enabled:e7().required()}).noUnknownFields())}).noUnknownFields()}),ob=({logger:e,config:t,eventManager:n,sendEdgeNetworkRequest:r,consent:i,getBrowser:a})=>{let o=(({orgId:e,logger:t})=>{let n=b({logger:t,cookieJar:f}),r=(t,n=!0)=>n?Z(e,t):t,i=(e,i=!0)=>{try{let t=r(e,i),a=n.get(t);return a?(e=>{try{if(e?.startsWith("%7B")||e?.startsWith("{"))return JSON.parse(decodeURIComponent(e))}catch{}return e})(a):null}catch(n){return t.error(`Error reading cookie: ${e}`,n),null}};return{setValue:(e,a,o={})=>{let s={...i(a0)||{},[e]:a};return((e,i,a={},o=!0)=>{try{let t=r(e,o),s=(e=>"object"==typeof e&&null!==e?encodeURIComponent(JSON.stringify(e)):e)(i);return n.set(t,s,a),!0}catch(n){return t.error(`Error writing cookie: ${e}`,n),!1}})(a0,s,{expires:((e=a7)=>new Date(Date.now()+60*e*1e3))(527040),...o})},getValue:e=>(i(a0)||{})[e]}})({orgId:t.orgId,logger:e}),s=(({sendEdgeNetworkRequest:e,consent:t,createDataCollectionRequest:n,createDataCollectionRequestPayload:r,logger:i})=>({trackAdConversion:({event:a})=>{let o=r();o.addEvent(a),a.finalize();let s=n({payload:o});return t.awaitConsent().then(()=>e({request:s}).then(()=>({success:!0})).catch(e=>{throw i.error("Failed to send ad conversion event",e),e}))}}))({eventManager:n,sendEdgeNetworkRequest:r,consent:i,createDataCollectionRequest:tO,createDataCollectionRequestPayload:tx,logger:e});return(({logger:e,config:t,eventManager:n,cookieManager:r,adConversionHandler:i,getBrowser:a})=>{let o=t.advertising,s=(({eventManager:e,cookieManager:t,adConversionHandler:n,logger:r,componentConfig:i,getBrowser:a})=>{let o=i?.advertiserSettings?og(i.advertiserSettings):"";return async()=>{let{skwcid:s,efid:l}=oh(),d=!!(s||l);try{if(d)return on({eventManager:e,cookieManager:t,adConversionHandler:n,logger:r,skwcid:s,efid:l});o&&oy({eventManager:e,cookieManager:t,logger:r,componentConfig:i,adConversionHandler:n,getBrowser:a}).catch(e=>r.error("Error in view through:",e))}catch(e){r.error("Error in sendAdConversion:",e)}}})({eventManager:n,cookieManager:r,adConversionHandler:i,logger:e,componentConfig:o,getBrowser:a});return{lifecycle:{onComponentsRegistered:()=>s(),onBeforeEvent:({event:t,advertising:n={}})=>ow({cookieManager:r,logger:e,event:t,componentConfig:o,advertising:n,getBrowser:a})}}})({logger:e,config:t,eventManager:n,cookieManager:o,adConversionHandler:s,getBrowser:a})};ob.namespace="Advertising",ob.configValidators=oE;let oS=ob,oI=async({vapidPublicKey:e,window:t})=>{if(!("serviceWorker"in t.navigator))throw Error("Service workers are not supported in this browser.");if(!("PushManager"in t)||!("Notification"in t))throw Error("Push notifications are not supported in this browser.");if("granted"!==t.Notification.permission)throw Error("The user has not given permission to send push notifications.");let n=await t.navigator.serviceWorker.getRegistration();if(!n)throw Error("No service worker registration was found.");if(!e)throw Error("No VAPID public key was provided.");let r={userVisibleOnly:!0,applicationServerKey:m(e)};try{let e=await n.pushManager.subscribe(r);return{endpoint:e.endpoint,keys:{p256dh:p(new Uint8Array(e.getKey("p256dh")),{urlSafe:!0}),auth:p(new Uint8Array(e.getKey("auth")),{urlSafe:!0})}}}catch(i){let r=await n.pushManager.getSubscription();if(!r||!await r.unsubscribe())throw i;return oI({vapidPublicKey:e,window:t})}},oC=async({ecid:e,eventManager:t,serializedPushSubscriptionDetails:n,appId:r})=>{let i=t.createEvent();i.setUserData({pushNotificationDetails:[{appID:r,token:n,platform:"web",denylisted:!1,identity:{namespace:{code:"ECID"},id:e}}]}),i.finalize();let a=tx();return a.addEvent(i),a},ok="config",oD="alloyConfig";async function oT(e,t){try{let n,r=await (n=e=>{e.objectStoreNames.contains(ok)||e.createObjectStore(ok,{keyPath:"id"})},new Promise((e,t)=>{let r=indexedDB.open("alloyPushNotifications",1);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{let t=e.target.result;n&&n(t)}})),i={...await new Promise((e,t)=>{let n=r.transaction([ok],"readonly").objectStore(ok).get(oD);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result)})||{},...e,id:oD,timestamp:Date.now()};await new Promise((e,t)=>{let n=r.transaction([ok],"readwrite").objectStore(ok).put(i);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result)}),r.close(),t.info("Successfully saved web SDK config to IndexedDB",i)}catch(e){t.error("Failed to save config to IndexedDB",{error:e})}}let oA="subscriptionDetails",oN=async({config:{vapidPublicKey:e,appId:t},storage:n,logger:r,sendEdgeNetworkRequest:i,consent:a,eventManager:o,identity:s,window:l})=>{await s.awaitIdentity();let d=s.getEcidFromCookie(),c=JSON.stringify(ew(await oI({vapidPublicKey:e,window:l}))),u=`${d}${c}`;if(u===n.getItem(oA))return void r.info("Subscription details have not changed. Not sending to the server.");n.setItem(oA,u);let m=(({payload:e})=>tP({payload:e,getAction:()=>"interact",getUseSendBeacon:()=>!1}))({payload:await oC({eventManager:o,ecid:d,serializedPushSubscriptionDetails:c,appId:t})});await a.awaitConsent(),await i({request:m}),await oT({ecid:d},r)},o_=({orgId:e,pushNotifications:{vapidPublicKey:t,appId:n,trackingDatasetId:r}={vapidPublicKey:void 0,appId:void 0,trackingDatasetId:void 0}})=>e&&t&&n&&r,oP=({createNamespacedStorage:e,eventManager:t,config:n,logger:r,consent:i,identity:a,getBrowser:o,sendEdgeNetworkRequest:s})=>({lifecycle:{async onComponentsRegistered(){if(o_(n)){let{datastreamId:e,edgeDomain:t,edgeBasePath:i,pushNotifications:{trackingDatasetId:a}}=n;await oT({datastreamId:e,edgeDomain:t,edgeBasePath:i,datasetId:a,browser:o()},r)}}},commands:{sendPushSubscription:{run:async()=>{if(!o_(n))throw Error("Push notifications module is not configured.");let{orgId:o,pushNotifications:{vapidPublicKey:l,appId:d}={vapidPublicKey:void 0,appId:void 0}}=n||{};return oN({config:{vapidPublicKey:l,appId:d},storage:e(`${K(o)}.pushNotifications.`).persistent,logger:r,sendEdgeNetworkRequest:s,consent:i,eventManager:t,identity:a,window})},optionsValidator:tr({}).noUnknownFields()}}});oP.namespace="Push Notifications",oP.configValidators=tr({pushNotifications:tr({vapidPublicKey:ti().required(),appId:ti().required(),trackingDatasetId:ti().required()}).noUnknownFields()});let oO=oP,{console:oR}=window,oL=ec(window),ox="page-view";function oM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o${mergeDefaultConfig(e){return Object.assign({},this.defaultConfig,function(e,t=()=>!0){let n=Object.assign({},e||{});return Object.keys(n).forEach(e=>{t(e,n[e])||delete n[e]}),n}(e||{},(e,t)=>void 0!==t))}async setup(){var e;if(this.setupDone)return await this.lastAlloyPromise;this.alloy=((e={})=>{let{name:t,monitors:n}=tr({name:ti().default("alloy"),monitors:e9(tr({})).default([])}).noUnknownFields()(e);return((e={})=>{let{name:t,monitors:n,components:r}=tr({name:ti().default("alloy"),monitors:e9(tr({})).default([]),components:e9(e8())}).noUnknownFields()(e),i=(({console:e,locationSearch:t,createLogger:n,instanceName:r,createNamespacedStorage:i,getMonitors:a})=>{let o,s=ev.parse(t),l=i(`instance.${r}.`),d=l.session.getItem("debug"),c="true"===d,u=null===d,m=()=>c,p=(e,{fromConfig:t})=>{(!t||u)&&(c=e),t||(l.session.setItem("debug",e.toString()),u=!1)};return void 0!==s[tl]&&p("string"==typeof(o=s[tl])&&"true"===o.toLowerCase(),{fromConfig:!1}),{setDebugEnabled:p,logger:n({getDebugEnabled:m,context:{instanceName:r},getMonitors:a,console:e}),createComponentLogger:t=>n({getDebugEnabled:m,context:{instanceName:r,componentName:t},getMonitors:a,console:e})}})({console:oR,locationSearch:window.location.search,createLogger:nC,instanceName:t,createNamespacedStorage:oL,getMonitors:nk.bind(null,n)}),a=(({instanceName:e,logController:{setDebugEnabled:t,logger:n,createComponentLogger:r},components:i})=>{let a=(()=>{let e={},t={},n={};return{register(r,i){let{commands:a,lifecycle:o}=i;((e,n={})=>{let r,i,a=(r=Object.keys(t),i=Object.keys(n),r.filter(e=>i.includes(e)));if(a.length)throw Error(`[ComponentRegistry] Could not register ${e} because it has existing command(s): ${a.join(",")}`);Object.keys(n).forEach(r=>{let i=n[r];i.commandName=r,i.run=tc(i.run,`[${e}] An error occurred while executing the ${r} command.`),t[r]=i})})(r,a),((e,t={})=>{Object.keys(t).forEach(r=>{n[r]=n[r]||[],n[r].push(tc(t[r],`[${e}] An error occurred while executing the ${r} lifecycle hook.`))})})(r,o),e[r]=i},getCommand:e=>t[e],getCommandNames:()=>Object.keys(t),getLifecycleCallbacks:e=>n[e]||[],getComponentNames:()=>Object.keys(e)}})(),o=td.reduce((e,t)=>{let n;return e[t]=(n=(...e)=>Promise.all(a.getLifecycleCallbacks(t).map(t=>new Promise(n=>{n(t(...e))}))),(...e)=>Promise.resolve().then(()=>n(...e))),e},{}),s=i.concat(Object.values(d)),l=b({logger:n,cookieJar:f}),c=tA({errorPrefix:`[${e}]`,logger:n});return(({logger:e,configureCommand:t,setDebugCommand:n,handleError:r,validateCommandOptions:i})=>{let a;return(o,s={})=>new Promise(r=>{let l=((r,o)=>{let s;if(r===tC){if(a)throw Error("The library has already been configured and may only be configured once.");s=()=>(a=t(o)).then(()=>{})}else{if(!a)throw Error("The library must be configured first. Please do so by executing the configure command.");s=r===tk?()=>{n(i({command:{commandName:tk,optionsValidator:tr({enabled:e7().required()}).noUnknownFields()},options:o}))}:()=>a.then(e=>{let t=e.getCommand(r);if(!t||"function"!=typeof t.run){let t=[tC,tk].concat(e.getCommandNames()).join(", ");throw Error(`The ${r} command does not exist. List of available commands: ${t}.`)}let n=i({command:t,options:o});return t.run(n)},()=>(e.warn(`An error during configuration is preventing the ${r} command from executing.`),new Promise(()=>{})))}return s})(o,s);e.logOnBeforeCommand({commandName:o,options:s}),r(l())}).catch(e=>r(e,`${o} command`)).catch(t=>{throw e.logOnCommandRejected({commandName:o,options:s,error:t}),t}).then(t=>{let n=u(t)?t:{};return e.logOnCommandResolved({commandName:o,options:s,result:n}),n})})({logger:n,configureCommand:i=>{let d=(({options:e,componentCreators:t,coreConfigValidators:n,createConfig:r,logger:i,setDebugEnabled:a})=>{let o=(e=>{let t=[],n={get enabled(){return e.enabled},flush(){t.forEach(({method:t,args:n})=>e[t](...n))}};return Object.keys(e).filter(t=>"function"==typeof e[t]).forEach(e=>{n[e]=(...n)=>{t.push({method:e,args:n})}}),n})(i),s=r((({combinedConfigValidator:e,options:t,logger:n})=>{try{return e.noUnknownFields().required().call({logger:n},t)}catch(e){throw Error(`Resolve these configuration problems:
	 - ${e.message.split(`
`).join(`
	 - `)}
For configuration documentation see: https://adobe.ly/3sHh553`)}})({combinedConfigValidator:t.map(({configValidators:e})=>e).filter(e=>e).reduce((e,t)=>e.concat(t),n),options:e,logger:o}));a(s.debugEnabled,{fromConfig:!0}),o.flush();let l=t.reduce((e,{buildOnInstanceConfiguredExtraParams:t})=>(t&&(e={...e,...t({config:s,logger:i})}),e),{});return i.logOnInstanceConfigured({...l,config:s}),s})({options:i,componentCreators:s,coreConfigValidators:ny,createConfig:tT,logger:n,setDebugEnabled:t}),{orgId:c,targetMigrationEnabled:u}=d,p=(({cookieJar:e,shouldTransferCookie:t,apexDomain:n,dateProvider:r})=>({cookiesToPayload(r,i){let a=""!==n&&i.endsWith(n),o={domain:n,cookiesEnabled:!0};if(!a){let n=e.get(),r=Object.keys(n).filter(t).map(e=>({key:e,value:n[e]}));r.length&&(o.entries=r)}r.mergeState(o)},responseToCookies(t){t.getPayloadsByType("state:store").forEach(t=>{let i={domain:n},a=t.attrs&&t.attrs.SameSite&&t.attrs.SameSite.toLowerCase();void 0!==t.maxAge&&(i.expires=new Date(r().getTime()+1e3*t.maxAge)),void 0!==a&&(i.sameSite=a),"none"===a&&(i.secure=!0),e.set(t.key,t.value,i)})}}))({cookieJar:l,shouldTransferCookie:(({orgId:e,targetMigrationEnabled:t})=>n=>0===n.indexOf(`${W}_${K(e)}_`)||"at_qa_mode"===n||t&&"mbox"===n)({orgId:c,targetMigrationEnabled:u}),apexDomain:nw,dateProvider:()=>new Date}),h="function"==typeof nv.sendBeacon?(({sendBeacon:e,sendFetchRequest:t,logger:n})=>(r,i)=>e(r,new Blob([i],{type:"text/plain; charset=UTF-8"}))?Promise.resolve({statusCode:204,getHeader:()=>null,body:""}):(n.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(r,i)))({sendBeacon:nv.sendBeacon.bind(nv),sendFetchRequest:nE,logger:n}):nE,g=(({logger:e,sendFetchRequest:t,sendBeaconRequest:n,isRequestRetryable:r,getRequestRetryDelay:i})=>({requestId:a,url:o,payload:s,useSendBeacon:l})=>{let d=JSON.stringify(s),c=JSON.parse(d);e.logOnBeforeNetworkRequest({url:o,requestId:a,payload:c});let u=(s=0)=>(l?n:t)(o,d).then(t=>{let n;if(r({response:t,retriesAttempted:s})){let e=i({response:t,retriesAttempted:s});return new Promise(t=>{setTimeout(()=>{t(u(s+1))},e)})}try{n=JSON.parse(t.body)}catch{}return e.logOnNetworkResponse({requestId:a,url:o,payload:c,...t,parsedBody:n,retriesAttempted:s}),{statusCode:t.statusCode,body:t.body,parsedBody:n,getHeader:t.getHeader}});return u().catch(t=>{throw e.logOnNetworkError({requestId:a,url:o,payload:c,error:t}),eS({error:t,message:"Network request failed."})})})({logger:n,sendFetchRequest:nE,sendBeaconRequest:h,isRequestRetryable:tF,getRequestRetryDelay:tz}),v=(({logger:e})=>t=>{let{statusCode:n,body:r,parsedBody:i}=t;if(n<200||n>=300||!i&&204!==n||i&&!Array.isArray(i.handle)){let e=i?JSON.stringify(i,null,2):r,t=e?`response body:
${e}`:"no response body.";throw Error(`${tV} status code ${n} and ${t}`)}if(i){let{warnings:t=[],errors:n=[]}=i;t.forEach(t=>{e.warn(`${tV} warning:`,t)}),n.forEach(t=>{e.error(`${tV} non-fatal error:`,t)})}})({logger:n}),y=(({extractEdgeInfo:e})=>({content:t={},getHeader:n})=>{let{handle:r=[],errors:i=[],warnings:a=[]}=t;return{getPayloadsByType:e=>r.filter(t=>t.type===e).flatMap(e=>e.payload),getErrors:()=>i,getWarnings:()=>a,getEdge:()=>e(n("x-adobe-edge")),toJSON:()=>t}})({extractEdgeInfo:(({logger:e})=>t=>{if(t){let n=t.split(";");if(n.length>=2&&n[1].length>0)try{let e=parseInt(n[1],10);if(!Number.isNaN(e))return{regionId:e}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}})({logger:n})}),w=(({config:e,lifecycle:t,cookieTransfer:n,sendNetworkRequest:r,createResponse:i,processWarningsAndErrors:a,getLocationHint:o,getAssuranceValidationTokenParams:s})=>{let{edgeDomain:l,edgeBasePath:d,datastreamId:c}=e,u=!1,m=(e,t)=>{let n=o(),r=n?`${d}/${n}${t.getEdgeSubPath()}`:`${d}${t.getEdgeSubPath()}`,i=t.getDatastreamIdOverride()||c;return i!==c&&t.getPayload().mergeMeta({sdkConfig:{datastream:{original:c}}}),`https://${e}/${r}/v1/${t.getAction()}?configId=${i}&requestId=${t.getId()}${s()}`};return({request:e,runOnResponseCallbacks:o=eg,runOnRequestFailureCallbacks:s=eg})=>{let d=E();d.add(t.onResponse),d.add(o);let c=E();return c.add(t.onRequestFailure),c.add(s),t.onBeforeRequest({request:e,onResponse:d.add,onRequestFailure:c.add}).then(()=>{let t=u||!e.getUseIdThirdPartyDomain()?l:"adobedc.demdex.net",i=m(t,e),a=e.getPayload();return n.cookiesToPayload(a,t),r({requestId:e.getId(),url:i,payload:a,useSendBeacon:e.getUseSendBeacon()})}).then(e=>(a(e),e)).catch(t=>{let i;if(e.getUseIdThirdPartyDomain()&&("TypeError"===(i=t).name||"NetworkError"===i.name||0===i.status)){u=!0,e.setUseIdThirdPartyDomain(!1);let t=m(l,e),i=e.getPayload();return n.cookiesToPayload(i,l),r({requestId:e.getId(),url:t,payload:i,useSendBeacon:e.getUseSendBeacon()})}return tq(c)(t)}).then(({parsedBody:e,getHeader:t})=>{let r=i({content:e,getHeader:t});return n.responseToCookies(r),d.call({response:r}).then(tU)})}})({config:d,lifecycle:o,cookieTransfer:p,sendNetworkRequest:g,createResponse:y,processWarningsAndErrors:v,getLocationHint:(({orgId:e,cookieJar:t})=>{let n=Z(e,"cluster");return()=>t.get(n)||(()=>{let e=t.get("mboxEdgeCluster");if(e)return`t${e}`})()})({orgId:c,cookieJar:f}),getAssuranceValidationTokenParams:nS}),b=(({cookieTransfer:e,lifecycle:t,createResponse:n,processWarningsAndErrors:r})=>({request:i,responseHeaders:a,responseBody:o,runOnResponseCallbacks:s=eg,runOnRequestFailureCallbacks:l=eg})=>{let d=E();d.add(t.onResponse),d.add(s);let c=E();c.add(t.onRequestFailure),c.add(l);let u=e=>a[e];return t.onBeforeRequest({request:i,onResponse:d.add,onRequestFailure:c.add}).then(()=>r({statusCode:200,getHeader:u,body:JSON.stringify(o),parsedBody:o})).catch(tq(c)).then(()=>{let t=n({content:o,getHeader:u});return e.responseToCookies(t),d.call({response:t}).then(tU)})})({lifecycle:o,cookieTransfer:p,createResponse:y,processWarningsAndErrors:v}),I=(({generalConsentState:e,logger:t})=>{let n=(n,r)=>{switch(n[tv]){case"in":e.in(r);break;case"out":e.out(r);break;case tp:e.pending(r);break;default:t.warn(`Unknown consent value: ${n[tv]}`)}};return{initializeConsent(e,t){t[tv]?n(t,tE):n(e,tw)},setConsent(e){n(e,"new")},suspend(){e.pending()},awaitConsent:()=>e.awaitConsent(),withConsent:()=>e.withConsent(),current:()=>e.current()}})({generalConsentState:(({logger:e})=>{let t=[],n=()=>Promise.resolve(),r=()=>Promise.resolve(),i=()=>Promise.reject(tb("No consent preferences have been set.")),a=()=>Promise.reject(tb("The user declined consent.")),o=e=>{if(e)return Promise.reject(Error("Consent is pending."));let n=S();return t.push(n),n.promise};return{in(i){if(i===tw)this.awaitConsent=n;else{for(i===tE?e.info("Loaded user consent preferences. The user previously consented."):"new"===i&&this.awaitConsent!==r&&e.info("User consented.");t.length;)t.shift().resolve();this.awaitConsent=r}},out(n){if(n===tw)e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=i;else{for(n===tE?e.warn("Loaded user consent preferences. The user previously declined consent."):"new"===n&&this.awaitConsent!==a&&e.warn("User declined consent.");t.length;)t.shift().reject(tb("The user declined consent."));this.awaitConsent=a}},pending(t){t===tw&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=o},awaitConsent:()=>Promise.resolve(),withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case n:return{state:"in",wasSet:!1};case r:return{state:"in",wasSet:!0};case i:return{state:"out",wasSet:!1};case a:return{state:"out",wasSet:!0};case o:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}})({logger:n}),logger:n}),C=(({logger:e,loggingCookieJar:t,config:n})=>{let r=null,i=new Promise(e=>{r=e}),a=(({orgId:e,cookieJar:t,logger:n})=>{let r=Z(e,"identity");return()=>{let e=t.get(r);if(!e)return null;try{let t=decodeURIComponent(e).replace(/_/g,"/").replace(/-/g,"+"),n=m(t);return(e=>{let t=0,n=null;for(;t<e.length&&!n;){let{value:r,length:i}=tu(e,t);t+=i;let a=7&r;if(r>>3==1){if(a===tm.LEN){let r=tu(e,t);return t+=r.length,n=new TextDecoder().decode(e.slice(t,t+r.value)),t+=r.value,n}}else switch(a){case tm.VARINT:t+=tu(e,t).length;break;case tm.I64:t+=8;break;case tm.LEN:{let n=tu(e,t);t+=n.length+n.value;break}case tm.SGROUP:case tm.EGROUP:break;case tm.I32:t+=4;break;default:throw Error(`Malformed kndctr cookie. Unknown wire type: ${a}`)}}throw Error("No ECID found in cookie.")})(n)}catch(e){return n.warn(`Unable to decode ECID from ${r} cookie`,e),null}}})({orgId:n.orgId,cookieJar:t,logger:e});return{initialize(){a()&&this.setIdentityAcquired()},setIdentityAcquired(){r()},awaitIdentity:()=>i,getEcidFromCookie:()=>a()}})({config:d,logger:n,loggingCookieJar:l});C.initialize();let k=(({config:e,logger:t,lifecycle:n,consent:r,createEvent:i,createDataCollectionRequestPayload:a,createDataCollectionRequest:o,sendEdgeNetworkRequest:s,applyResponse:l})=>{let{onBeforeEventSend:d,edgeConfigOverrides:c}=e;return{createEvent:i,sendEvent(e,i={}){let{edgeConfigOverrides:l,...u}=i,m=tM({payload:a(),localConfigOverrides:l,globalConfigOverrides:c}),p=o(m),h=E(),g=E();return n.onBeforeEvent({...u,event:e,onResponse:h.add,onRequestFailure:g.add}).then(()=>(m.payload.addEvent(e),r.awaitConsent())).then(()=>{try{e.finalize(d)}catch(t){let e=()=>{throw t};return g.add(n.onRequestFailure),g.call({error:t}).then(e,e)}if(!e.shouldSend()){g.add(n.onRequestFailure),t.info(tj);let e=Error(tj);return g.call({error:e}).then(()=>{})}return s({request:p,runOnResponseCallbacks:h.call,runOnRequestFailureCallbacks:g.call})})},applyResponse(e,t={}){let{renderDecisions:r=!1,decisionContext:i={},responseHeaders:s={},responseBody:d={handle:[]},personalization:c}=t,u=a(),m=o({payload:u}),p=E();return n.onBeforeEvent({event:e,renderDecisions:r,decisionContext:i,decisionScopes:[tN],personalization:c,onResponse:p.add,onRequestFailure:eg}).then(()=>(u.addEvent(e),l({request:m,responseHeaders:s,responseBody:d,runOnResponseCallbacks:p.call})))}}})({config:d,logger:n,lifecycle:o,consent:I,createEvent:tI,createDataCollectionRequestPayload:tx,createDataCollectionRequest:tO,sendEdgeNetworkRequest:w,applyResponse:b});return(({componentCreators:e,lifecycle:t,componentRegistry:n,getImmediatelyAvailableTools:r})=>(e.forEach(e=>{let t,{namespace:i}=e,a=r(i);try{t=e(a)}catch(e){throw eS({error:e,message:`[${i}] An error occurred during component creation.`})}n.register(i,t)}),t.onComponentsRegistered({lifecycle:t}).then(()=>n)))({componentCreators:s,lifecycle:o,componentRegistry:a,getImmediatelyAvailableTools(t){let n=r(t);return{config:d,componentRegistry:a,consent:I,identity:C,eventManager:k,fireReferrerHideableImage:nb,logger:n,lifecycle:o,sendEdgeNetworkRequest:w,handleError:tA({errorPrefix:`[${e}] [${t}]`,logger:n}),createNamespacedStorage:nh,apexDomain:nw,getBrowser:nI}}})},setDebugCommand:e=>{t(e.enabled,{fromConfig:!1})},handleError:c,validateCommandOptions:tD})})({instanceName:t,logController:i,components:r});return i.logger.logOnInstanceCreated({instance:a}),a})({name:t,monitors:n,components:Object.values(c)})})({name:this.config.alloyNamespace}),Object.assign(window,{[this.config.alloyNamespace]:this.alloy});let t={clickCollectionEnabled:null!=(e=this.config.clickCollectionEnabled)&&e};return this.config.onBeforeLinkClickSend&&(t.onBeforeLinkClickSend=this.config.onBeforeLinkClickSend),void 0!==this.config.downloadLinkQualifier&&(t.downloadLinkQualifier=this.config.downloadLinkQualifier),t.onBeforeEventSend=this.config.onBeforeEventSend,this.lastAlloyPromise=this.alloy("configure",{debugEnabled:this.config.analyticsEnvironment.isDev,datastreamId:this.config.edgeConfigId,edgeDomain:this.config.edgeDomain,idMigrationEnabled:!0,targetMigrationEnabled:!0,context:["web","device","environment","placeContext","highEntropyUserAgentHints"],orgId:this.config.orgId,thirdPartyCookiesEnabled:this.config.thirdPartyCookiesEnabled||!1,...t}).then(()=>{}),this.setupDone=!0,await this.lastAlloyPromise}constructor(e){oM(this,"alloy",void 0),oM(this,"setupDone",!1),oM(this,"lastAlloyPromise",void 0),oM(this,"config",void 0),oM(this,"defaultConfig",{alloyNamespace:o$.DEFAULT_ALLOY_NAMESPACE,edgeConfigId:o$.DEFAULT_DEV_STREAM_ID,edgeDomain:o$.DEFAULT_EDGE_DOMAIN,orgId:o$.DEFAULT_ORG_ID}),this.config=this.mergeDefaultConfig(e),this.lastAlloyPromise=this.setup()}}oM(o$,"trackers",new Map),oM(o$,"DEFAULT_DEV_STREAM_ID","ffffffff-0000-ffff-0000-ffffffffffff"),oM(o$,"DEFAULT_EDGE_DOMAIN","replace.me"),oM(o$,"DEFAULT_ORG_ID","REPLACEME@AdobeOrg"),oM(o$,"DEFAULT_ALLOY_NAMESPACE","alloy"),oM(o$,"PAGE_VIEW_EVENT_LABEL",ox);let oj=/^www.hpe.com\/[^/]+\/[^/]+\/my-account/i,oU="hpeclick:queue",oq="bea3e0db-1994-44a1-9d6e-4ebd79295d6b",oV="dnbdatav5",oB="dnbdatav5_info",oF="6sensedata",oz="  6sensedata_info",oH=".COCKPIT.AUTH#userInfo",oJ="hpe.mktg.uuid",oY={page:{pageInfo:{bootstrap_version:"basic_measurement v3.0"},category:{}},product:[],user:[]},oG=[2401502,2413079,2413068,2413064,2413054,2406336,2409443,2413081,2442840,2418415,2439774,2439766,2407669,2441749,2416056,2389638,2376602,2443555,2456668,2456804,2456846,2469425,2472458,2473903,2475556,2475582,2484659],oQ=/^\d{38}$/,oX="no-ecid",oW="alloy:ecid";function oK(e){var t;e.log;let n=null!=(t=e.window.localStorage.getItem(oW))?t:oX;if(oQ.test(n))return n}function oZ(e){let t=/_mkto_trk=([^;]+)/.exec(e.document.cookie);if(null!==t)return t[1]}let o0=/[^\d.]+/g;function o1(e){if(void 0!==e)return+`${e}`.replace(o0,"")}function o2(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function o5(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function o3(e,t){var n=o5(e,t,"get");return n.get?n.get.call(e):n.value}function o4(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}function o6(e,t){o2(e,t),t.add(e)}let o9="hpefhsn",o7=RegExp(`${o9}=([^;]+)`);var o8=function(e){return e.Lookup="lookup",e.Survey="survey",e.Identity="identity",e.Drift="drift",e.Data="data",e}({}),se=new WeakMap,st=new WeakSet,sn=new WeakSet,sr=new WeakSet;class si{send(e,t){let n=o3(this,se).window,r=n.navigator;o3(this,se).log;let i=o4(this,sr,ss).call(this,e),a=JSON.stringify(i),o=i.seq;void 0!==r.sendBeacon&&a.length>0&&(r.sendBeacon("https://data-fh.ext.hpe.com/"+t,a),n.sessionStorage.setItem("lastFHPayload",a),o4(this,sn,so).call(this,o))}constructor(e){o6(this,st),o6(this,sn),o6(this,sr),function(e,t,n){o2(e,t),t.set(e,n)}(this,se,{writable:!0,value:void 0}),function(e,t,n){var r=o5(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}}(this,se,e)}}function sa(){let e=1;try{let n=o7.exec(o3(this,se).window.document.cookie);if(null!==n){var t;e=null!=(t=parseInt(n[1]))?t:e}}catch(e){}return e>2500&&(e=1),e}function so(e){o3(this,se).window.document.cookie=`${o9}=${e+1};domain=.hpe.com;path=/;SameSite=None`}function ss(e){let t=o3(this,se).window.navigator,n=o3(this,se).window.location;return{dl:e,userAgent:t.userAgent,"location.href":n.href,"document.referrer":document.referrer,seq:o4(this,st,sa).call(this)}}var sl=function(e){return e.READY="HPEPRIVACYBANNER.READY",e.OPEN="HPEPRIVACYBANNER.OPEN",e.CLOSE="HPEPRIVACYBANNER.CLOSE",e.CONFIGREADY="HPEPRIVACYBANNER.CONFIGREADY",e.CONFIGCHANGE="HPEPRIVACYBANNER.CONFIGCHANGE",e}({});function sd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class sc{static get banner(){return window.HPEPRIVACYBANNER}static hasCurrentStateChanged(e){var t,n,r;let i=e.required===(null==(t=this.lastState)?void 0:t.required),a=e.functional===(null==(n=this.lastState)?void 0:n.functional),o=e.personalization===(null==(r=this.lastState)?void 0:r.personalization);return!i||!a||!o}static waitForConsentAssertion(e){let t=e.consentSource,n=e.consentManagerProvider.toLowerCase(),r=t.includes("implied")&&t.includes("eu")||t.includes("implied")&&"hpe"===n,i=t.includes("implied")&&t.includes("us")&&window.location.pathname.includes("/us/en/search-results.html");return r||i}static fetchConsentState(){try{var e;if(null==(e=sc.banner)?void 0:e.isConfigReady())return sc.banner.getConsentInfo()}catch(e){}}static setupPrivacyStateListeners(e,t){let{log:n}=e,r=sc.fetchConsentState();if(r)if(this.waitForConsentAssertion(r)){let n=r.consentManagerProvider.toLowerCase();window.addEventListener("hpe"===n?sl.CLOSE:sl.CONFIGCHANGE,()=>{this.setupPrivacyStateListeners(e,t)})}else e.initializedPrivacyEvents=!0,sc.lastState=r,t(r);else sc.alreadySetConfigReadyListener||(window.addEventListener(sl.CONFIGREADY,()=>{this.setupPrivacyStateListeners(e,t)}),sc.alreadySetConfigReadyListener=!0)}static setupPrivacyStateChangeListeners(e,t){var n;let{log:r}=e,i=()=>{let e=sc.fetchConsentState();e&&sc.hasCurrentStateChanged(e)&&(sc.lastState=e,t(e))};(null==(n=sc.lastState)?void 0:n.consentManagerProvider)==="trustarc"?window.addEventListener(sl.CONFIGCHANGE,i):window.addEventListener(sl.CLOSE,i)}}function su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}sd(sc,"alreadySetConfigReadyListener",!1),sd(sc,"lastState",void 0);let sm="AMPLITUDE_EVENT_DATA";var sp=new WeakSet;class sh{config(){}isValidAmplitudePage(){let e=this.env.window.location.hostname+this.env.window.location.pathname;return oj.test(e)}async track(e,t="default-page-call"){if(this.isValidAmplitudePage())if(this.isReadyToSend){let n=JSON.parse(JSON.stringify(e));this.env.window.dispatchEvent(new CustomEvent("AMPLITUDE.EVENT",{detail:[t,n]}))}else(function(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n})(this,sp,sg).call(this,e,t)}constructor(e){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,sp),su(this,"env",void 0),su(this,"isReadyToSend",void 0),this.env=e,this.isReadyToSend=!1,sh.currentInstance=this,this.env=e,e.window.AMPLITUDE_INTERFACE=this}}function sg(e,t){let n=this.env.window.sessionStorage,r=[];try{r=JSON.parse(n.getItem(sm)||"[]")}catch(e){}r.push([t,e]),n.setItem(sm,JSON.stringify(r))}async function sf(e,t){try{if(null!=t){let e=new TextEncoder().encode(`glav3|-|${t}`),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}}catch(e){}}su(sh,"currentInstance",void 0);class sv extends o${async track(e=o$.PAGE_VIEW_EVENT_LABEL,t="default-page-call",n){if(this.config.analyticsEnvironment.log,void 0!==sc.lastState){var r;if(sc.lastState.functional||(null==(r=sc.lastState)?void 0:r.personalization)){let r="no-event-name";this.lastAlloyPromise=this.lastAlloyPromise.then(async()=>{let e=oK(this.config.analyticsEnvironment);return void 0===e?await this.alloy("getIdentity").then(e=>{var t,n;let r=null!=(n=null==e||null==(t=e.identity)?void 0:t.ECID)?n:oX;return this.config.analyticsEnvironment.window.localStorage.setItem(oW,r),r}):e}).then(async e=>{var t,r,i,a,o;let s=this.config.analyticsEnvironment.window;null==(i=s.digitalData)||null==(r=i.defers)||null==(t=r.adobeIsMCIDReady)||t.resolve(e);let l=function(e){var t;let n=null!=(t=e.localStorage.getItem(oH))?t:void 0;if(void 0!==n&&n.length>0)try{let e=JSON.parse(n).v,t=null==e?void 0:e.email;if(void 0!==t&&t.length>0)return t}catch(e){}}(s),d=null!=(o=null!=(a=null==n?void 0:n.emid)?a:null==n?void 0:n.email)?o:l;return await sf(this.config.analyticsEnvironment,null==d?void 0:d.replace(/\s+/,"").toLowerCase())}).then(async i=>{var a,o,s,l,d,c,u;let m=this.config.datalayer.build(n);if(m.id=function(e){var t,n;e.log;let r={ecid:null!=(t=oK(e))?t:oX},i=null!=(n=function(e){var t;let n=null!=(t=e.localStorage.getItem(oJ))?t:void 0;if(void 0!==n&&n.length>0)try{let e=JSON.parse(n),t=null==e?void 0:e.uuid;if(void 0!==t&&t.length>0)return e.uuid}catch(e){}}(window))?n:function(e){var t;let n=e.localStorage,r=null!=(t=n.getItem(oH))?t:void 0;if(void 0!==r&&r.length>0)try{let e=JSON.parse(r).v,t=null==e?void 0:e.uuid;if(void 0!==t&&t.length>0)return n.setItem(oJ,JSON.stringify(e)),e.uuid}catch(e){}}(window);void 0!==i&&(r.oktaId=i);let a=oZ(window);void 0!==a&&(r.marketoId=a);let o=function(e){let t=/aam_uuid=([^;]+)/.exec(e.document.cookie);if(null!==t)return t[1]}(window);void 0!==o&&(r.aamUuid=o);let s=function(e){let t=/_clsk=([^;]+)/.exec(e.document.cookie);if(null!==t)return decodeURIComponent(t[1])}(window);return void 0!==s&&(r.clarityId=s),r}(this.config.analyticsEnvironment),void 0!==i){m.id.hashedEmid=i;try{m.event.hva.emid=i}catch(e){}}m.diagnostics.ruleLabel=t,m.event.eventType=e,(null==n?void 0:n.link_region_id)&&(m.event.link_region_id=n.link_region_id);let p=JSON.parse(JSON.stringify({data:m}));if(p.documentUnloading=!1,r=null!=(d=m.event.eventName)?d:"no-event-name",e===o$.PAGE_VIEW_EVENT_LABEL?p.xdm={web:{webPageDetails:{pageViews:{value:1}}}}:p.xdm={web:{webInteraction:{linkClicks:{value:1},name:"hva"===e?r:`hpe:link:${r}`,type:"other"}}},(null==(a=m.page)?void 0:a.pageName)!==void 0){let e=p.xdm.web,t=e.webPageDetails,n={name:m.page.pageName};e.webPageDetails=void 0!==t?Object.assign({...t},n):n}let h=null!=(u=null!=(c=null==n?void 0:n.products)?c:null==(o=window.digitalData)?void 0:o.product)?u:null==(l=window.digitalData)||null==(s=l.cart)?void 0:s.item;if(void 0!==h&&h.length>0){let e=h.reduce((e,t)=>{let r=o1(t.productInfo.quantity),i=function(e,t){try{let n=o1(e),r=o1(t);if(void 0===n||void 0===r)return;return n*r}catch(e){}}(r,t.productInfo.price),a=function(e,t){let n;function r(e){return e.replace(/\|/g,"~")}void 0!==t.vendor&&(n={eVar42:t.vendor});try{if(void 0!==t.bundleProducts){let e="object"==typeof t.bundleProducts?t.bundleProducts.join("_"):t.bundleProducts,i={eVar85:r(e)};n=void 0!==n?{...n,...i}:i}}catch(e){}try{if(void 0!==t.configName){let e={eVar165:r(t.configName)};n=void 0!==n?{...n,...e}:e}}catch(e){}try{if((null==e?void 0:e.finding_methods)!==void 0){let t={eVar73:e.finding_methods};n=void 0!==n?{...n,...t}:t}}catch(e){}try{var i,a,o;let e=null!=(i=o1(null==t?void 0:t.configBasePrice))?i:NaN,r=null!=(a=o1(null==t?void 0:t.configEndPrice))?a:NaN,s=null!=(o=o1(null==t?void 0:t.configPriceDiff))?o:NaN;if(!isNaN(e)||!isNaN(r)||!isNaN(s)){let t={eVar166:`${e}~${r}~${s}`};n=void 0!==n?{...n,...t}:t}}catch(e){}return n}(n,t.productInfo),o={SKU:t.productInfo.productID,name:t.productInfo.productName,...void 0!==r&&void 0!==i?{quantity:r,priceTotal:i}:{}};if(void 0!==a&&(o._experience={analytics:{customDimensions:{eVars:a}}}),void 0!==i){let e=function(e,t){var n,r;if(/(submit|thank).*quote/.test(e.event.eventName)||(null!=(r=null==(n=e.event.ecom)?void 0:n.eventString)?r:"").includes("quote"))return{event74:{value:t}}}(m,i);void 0!==e&&(void 0!==o._experience?o._experience.analytics.event1to100=e:o._experience={analytics:{event1to100:e}})}return e.push(o),e},[]);void 0!==e&&(p.xdm.productListItems=e)}this.config.analyticsEnvironment.lastDatalayer=JSON.parse(JSON.stringify(m)),sh.currentInstance&&sh.currentInstance.track(this.config.analyticsEnvironment.lastDatalayer,"standard-track-relay");let g=new si(this.config.analyticsEnvironment);try{g.send(p,o8.Data)}catch(e){}return await this.alloy("sendEvent",p).then(()=>{})}).catch(e=>{})}}return await this.lastAlloyPromise}}let sy=/\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/;class sw{constructor(e){!function(e,t,n){"env"in e?Object.defineProperty(e,"env",{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"env",void 0),this.env=e}}var sE=function(e){return e.language="language",e.target_country="target_country",e.locale="locale",e.keywords="keywords",e.description="description",e.web_section_id="web_section_id",e.hpe_design_version="hpe_design_version",e.hp_inav_version="hp_inav_version",e.title="title",e.primary_keyword="primary_keyword",e}({});function sb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class sS{getAllMetatags(){return JSON.parse(JSON.stringify(this.metatags))}getHTMLLangAttribute(){if(this.htmlLang)return this.htmlLang.getAttribute("lang")}getValue(e){return this.metatags[e]}addMetatagIfExists(e,t,n){this.metatags[t]&&(e[t]=n?n(this.metatags[t]):this.metatags[t])}getWithDefaultValidation(e,t,n=[]){let r=this.metatags[e];if(r){if(n.length>0){let t=!1;return n.forEach(e=>{t=t||r.toLowerCase().trim()===e.toLowerCase().trim()}),t?r:`${this.invalidPrefix}-${e}`}return r||t}return t||`${this.notFoundPrefix}-${e}`}constructor(e,t="invalid",n="not-found"){sb(this,"window",void 0),sb(this,"invalidPrefix",void 0),sb(this,"notFoundPrefix",void 0),sb(this,"metatags",void 0),sb(this,"htmlLang",void 0),this.window=e,this.invalidPrefix=t,this.notFoundPrefix=n,this.metatags=Array.from(e.document.querySelectorAll("meta")).reduce((e,t)=>{let n=t.getAttribute("name"),r=t.getAttribute("content");return n&&n.length>0&&r&&r.trim().length>0&&(e[n]=r),e},{});try{this.htmlLang=e.document.querySelectorAll("html[lang]")[0]}catch(e){}this.invalidPrefix=t,this.notFoundPrefix=n}}let sI=":us:ca:ww",sC=":asia_pac:au:cn:hk:hk:in:id:jp:kr:my:nz:ph:sg:tw:th:vn",sk=":emea_europe:emea_africa:at:be:be:by:bg:hr:cz:dk:ee:fi:fr:de:gb:gr:hu:ie:il:it:kz:lv:lt:emea_middle_east:nl:no:pl:pt:ro:ru:rs:sa:sk:si:za:es:se:ch:ch:tr:ua:uk:al:am:az:ba:dz:ge:is:ke:ks:ma:md:mk:mt:ng:tn:pk:bd:lk:ae",sD=":lamerica:ar:bo:br:jm:lamerica_nsc_carib:lamerica_nsc_cnt_amer:cl:co:ec:mx:py:pe:pr:uy:ve:",sT=sI+sC+sk+sD;function sA(e){return sT.includes(":"+e+":")}let sN=/[-_][^-_]+$/;function s_(e){return":aa:ab:af:ak:sq:am:ar:an:hy:as:av:ae:ay:az:bm:ba:eu:be:bn:bh:bi:bs:br:bg:my:ca:ch:ce:ny:zh:zh-Hans:zh_Hant:cv:kw:co:cr:hr:cs:da:dv:nl:dz:en:eo:et:ee:fo:fj:fi:fr:ff:gl:gd:gv:ka:de:el:kl:gn:gu:ht:ha:he:hz:hi:ho:hu:is:io:ig:id:in:ia:ie:iu:ik:ga:it:ja:jv:kl:kn:kr:ks:kk:km:ki:rw:rn:ky:kv:kg:ko:ku:kj:lo:la:lv:li:ln:lt:lu:lg:lb:gv:mk:mg:ms:ml:mt:mi:mr:mh:mo:mn:na:nv:ng:nd:ne:no:nb:nn:ii:oc:oj:cu:or:om:os:pi:ps:fa:pl:pt:pa:qu:rm:ro:ru:se:sm:sg:sa:sr:sh:st:tn:sn:sd:si:ss:sk:sl:so:nr:es:su:sw:ss:sv:tl:ty:tg:ta:tt:te:th:bo:ti:to:ts:tr:tl:ug:uk:ur:uz:ve:vi:vo:wa:cy:wo:fy:xh:yi:ji:yo:za:zu".includes(":"+e+":")}let sP="home",sO=/^\/psnow/i,sR=/\.hpe\.com$/i;function sL(e){let t=e.replace(/^www\./i,"").replace(/\.(com|net)/i,""),n=`unknown:${t}`;switch(t){case"connect.hpe":n="connect";break;case"opsramp":n="opsramp";break;case"auth.hpe":n="iam";break;case"paths.ext.hpe":n="pathfactory";break;case"hpe":n="www"}return(/splashthat.com/i.test(e)&&(n="splashthat"),n.startsWith("unknown:")&&sR.test(e))?e.replace(sR,""):n.toLowerCase()}function sx(e){var t,n,r,i,a;let o=e.window,s=o.location,l=function(e,t){let n=sL(t),r=e.window.location.pathname,i=function(e,t){let n=e.window.location,r=n.pathname,i=n.hostname,a=r.replace(/\.[^.]*\/?$/,"").toLowerCase().replace(/^\//,"").split("/"),o=sP;if(/^(connect|auth)/.test(t)&&(o="main"),"pathfactory"===t&&(o="overlay",o="c"===a[0]?"overlay":"l"===a[0]?"landing-page":a[0]),"iam"===t){if(a.length>=1&&a[0].length>0){let e=a[0].toLowerCase();return e.includes("v3")||/(%[A-Za-z0-9]{2,4})+/g.test(e)&&(e=e.replace(/(%[A-Za-z0-9]{2,4})+.*/g,"")+"<hash>"),e}return sP}return"myenterpriselicense"===t?(/^cwp/.test(a[0])&&a.shift(),a[0]):"community"===t?(/^t\d/.test(a[0])&&a.shift(),a[0]):i.includes("onlinestore-japan")?a[2]:(/^[^.]+\.hpe\.com/i.test(i)&&!i.includes("certification-learning")&&(sO.test(r)?o="psnow":(null==(o=a[0])?void 0:o.length)>0?sA(o)&&(o=a.length>2?a[2]:sP):o=sP),o.toLowerCase())}(e,n),a=e.window.location.hash.toLowerCase(),o=a.length>1&&!n.includes("community"),s=function(e,t,n){let r=e.replace(/\.[^/]+\/?$/,"").toLowerCase().replace(/^\//,"").split("/"),i=r.indexOf(n),a=i>0?r.slice(i+1):r;if("www"===t){if(n===sP)return;return a}if("iam"===t){if(2===a.length){if("hpe"===a[0])return;return a}if(a.length>2){let e=a.slice(1).join(":").replace(/(auth-state:|reset-password:|welcome:|tokens:|2ftokens:|v3:)(.*)/i,"$1<hash>").replace(/(cf:registration|forgot-password|change-password)(.*)/i,"$1:<hash>").replace(/(%[A-Za-z0-9]{2,4})+/g,"").split(/:/);if(/tokens|welcome|(%[A-Za-z0-9]{2,4})+/.test(a[0])||a[0].includes("v3"))return;return e}return}if("pathfactory"===t){let e=a.slice(1);return e.length<=2?[sP]:e}if("onlinestore-japan"===t&&(a.shift(),a.shift(),a.shift()),"community"===t&&/^t\d/.test(a[0])&&a.shift(),t.includes("certification-learning"))return a;let o=a.reduce((e,t)=>(t&&-1!==":us:ca:ww:asia_pac:au:cn:hk:hk:in:id:jp:kr:my:nz:ph:sg:tw:th:vn:emea_europe:emea_africa:at:be:be:by:bg:hr:cz:dk:ee:fi:fr:de:gb:gr:hu:ie:il:it:kz:lv:lt:emea_middle_east:nl:no:pl:pt:ro:ru:rs:sa:sk:si:za:es:se:ch:ch:tr:ua:uk:al:am:az:ba:dz:ge:is:ke:ks:ma:md:mk:mt:ng:tn:pk:bd:lk:ae:lamerica:ar:bo:br:jm:lamerica_nsc_carib:lamerica_nsc_cnt_amer:cl:co:ec:mx:py:pe:pr:uy:ve:".indexOf(":"+t+":")||s_(t)||e.push(t),e),[]);if(1!==o.length||0!==o[0].length)return o}(r,n,i),l=[n,i];if("buy"===n){var d,c,u,m;return(null!=(m=null==(u=e.window.digitalData)||null==(c=u.page)||null==(d=c.pageInfo)?void 0:d.breadCrumbs)?m:l).join("||").toLocaleLowerCase().split("||")}return void 0!==s&&(i===sP?s.length>0&&s[0].length>0&&(l=[n,...s]):l=[n,i,...s]),o&&l.push(a),l.reduce((e,t)=>(void 0===t||!(t.length>0)||/^[-_\W]$/.test(t)||e.includes(t)||e.push(t),e),[])}(e,s.hostname),d=sL(s.hostname),c=new sS(o),u=function(e,t){let n=t.getHTMLLangAttribute(),r=e.window.document,i={},a=t.getAllMetatags();for(let e in(null==r?void 0:r.title)!==void 0&&r.title.length>0&&(i.title=r.title.toLocaleLowerCase()),a)e in sE&&(i[e]=a[e].toLocaleLowerCase());if(void 0!==n&&(i.locale=n.toLocaleLowerCase()),void 0!==i.keywords)try{i.primary_keyword=i.keywords.split(/\s*,\s*/)[0]}catch(e){}if(Object.keys(i).length>0)return i}(e,c),m=function(e,t){let n=e.window,r=n.location,i=t.getValue("target_country");if(void 0===i){let e=/[^\w]?cc=([^;]+)/.exec(n.document.cookie);null!==e&&(i=e[1])}return(void 0===i&&"www.hpe.com"===r.hostname&&(i=r.pathname.split("/").splice(1)[0]),void 0!==i&&sA(i=i.toLocaleLowerCase()))?i:"ww"}(e,c),p=function(e,t){let n=e.window,r=n.location,i=t.getHTMLLangAttribute();if(void 0===i){let e=/[^\w]lang=([^;]+)/.exec(n.document.cookie);null!==e&&(i=e[1])}return(void 0===i&&"www.hpe.com"===r.hostname&&(i=r.pathname.split("/").splice(1)[1]),void 0!==i&&s_(i=(i=i.toLocaleLowerCase()).replace(sN,"")))?i:"en"}(e,c),h=l.filter(e=>!e.startsWith("#")).join(":").toLowerCase().replace(/[:/]+$/,""),g={url:function(e){let t={href:e.href};return void 0!==e.hostname&&(t.hostname=e.hostname),void 0!==e.href&&(t.href=e.href),void 0!==e.protocol&&(t.protocol=e.protocol),void 0!==e.port&&(t.port=e.port),void 0!==e.pathname&&(t.pathname=e.pathname),void 0!==e.search&&(t.search=e.search),void 0!==e.hash&&(t.hash=e.hash),t}(s),B2DCategory:null==(t=Object.entries({"(www.hpe.com\\/.*\\/.*\\/(hpe\\-ezmeral\\-data\\-fabric\\.html|hpe\\-greenlake\\-file\\-storage\\.html|hpe\\-ezmeral\\-unified\\-analytics\\.html|hpe\\-greenlake\\-private\\-cloud\\-business\\-edition\\.html|hpe\\-greenlake\\-backup\\-recovery\\.html|hpe\\-proliant\\-dl380\\-gen11\\.html|hpe\\-greenlake\\-block\\-storage\\.html|hpe\\-proliant\\-dl385\\-gen11\\.html|hpe\\-cray\\-xd2000\\.html|hpe\\-extended\\-deployment\\-services\\.html|hpe\\-asset\\-upcycling\\-services\\.html|hpe\\-alletra\\.html))":"B2D Data","(www.hpe.com\\/.*\\/.*\\/(hpe\\-machine\\-learning\\-data\\-management\\-software\\.html|hpe\\-machine\\-learning\\-development\\-environment\\.html|hpe\\-enterprise\\-computing\\-solution\\-gen\\-ai\\.html|hpe\\-proliant\\-dl320\\-gen11\\.html|hpe\\-cray\\-supercomputing\\-xd670\\.html|services\\/generative\\-ai\\-implementation\\-service\\.html|hpe\\-supercomputing\\-solution\\-gen\\-ai\\.html))":"B2D AI","(www.hpe.com\\/.*\\/.*\\/(hpe\\-greenlake\\-private\\-cloud\\-enterprise\\.html|hpe\\-greenlake\\-compute\\-ops\\-management\\.html|aruba\\-central\\.html|hpe\\-accelerated\\-migration\\.html|zerto\\.html))":"B2D Cloud","(www.hpe.com\\/.*\\/.*\\/(aruba\\-edgeconnect\\-sd\\-wan\\.html|aruba\\-access\\-points\\.html|hpe\\-greenlake\\-for\\-networking\\.html))":"B2D Edge","(www.hpe.com\\/.*\\/.*\\/(compute\\/hpc\\.html|hpe\\-proliant\\-servers\\.html))":"TBD","(www.hpe.com\\/.*\\/.*\\/(private\\-cloud\\-ai\\.html|solutions\\/artificial\\-intelligence\\/nvidia\\-collaboration\\.html))":"AI"}).find(([e])=>RegExp(e,"i").test(o.location.href)))?void 0:t[1],platform:(n=s.hostname,(null==o||null==(a=o.digitalData)||null==(i=a.page)||null==(r=i.pageInfo)?void 0:r.technology_stack)==="AEM"||/www.hpe.com/i.test(n)?"aem":/communit/i.test(n)?"lithium":"non-aem"),breadCrumbs:l,pageName:h,country:m,language:p,region:function(e){if(`${sI}:`.includes(e));else if(`${sC}:`.includes(e))return"apj";else if(`${sk}:`.includes(e))return"emea";else if(`${sD}:`.includes(e))return"latam";return"na"}(m),section:l[1],site:"www"===d?l[1]:d,user_interaction:e.movedMouseOrTouchOrScroll?"Y":"N"};return null!=u&&(g.metatags=u),g}function sM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let s$={status:"0"};class sj{get(e,t={}){try{var n;return JSON.parse(null!=(n=this.storage.getItem(e))?n:JSON.stringify(t))}catch(e){return t}}set(e,t){this.storage.setItem(e,JSON.stringify(t))}constructor(e){sM(this,"storage",void 0),this.storage=e}}class sU{canRetry(e){return this.dataStore.get(e,{retries:0}).retries<this.maxRetries}incrementRetry(e){let t=this.dataStore.get(e,{retries:0});t.retries+=1,this.dataStore.set(e,t)}constructor(e,t){sM(this,"maxRetries",void 0),sM(this,"dataStore",void 0),this.dataStore=e,this.maxRetries=t}}class sq{capture(){this.hasUserConsented()&&(this.initializeFromLocalStorage(),sq.ready||this.attemptDNBDataRequest())}hasUserConsented(){var e;return!!(null==(e=sc.lastState)?void 0:e.personalization)}initializeFromLocalStorage(){let e=this.localStorage.get(oz,{last_fetch_time:0}),t=this.localStorage.get(oF,s$);Date.now()-e.last_fetch_time<1296e6&&(sq.ready=!!Object.keys(t.company).length,sq.latestData=t)}attemptDNBDataRequest(){this.retryManager.canRetry(oz)&&this.fetchCompanyDetails().then(e=>{e&&this.storeDNBValues(e),this.retryManager.incrementRetry(oz)})}storeDNBValues(e){let t={last_fetch_time:Date.now()};sq.ready=!!Object.keys(e.company).length,sq.latestData=e,this.localStorage.set(oF,e),this.localStorage.set(oz,t)}async fetchCompanyDetails(){let e=this.env.isDev?"6761080e554d3410ccad12fee46ceac1bcf752c6":"3fa4e55e66eef24cdee33cd11634cbbacdfa7e82";try{let t=await fetch("https://epsilon.6sense.com/v3/company/details",{method:"GET",headers:{Authorization:`Token ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw Error(`HTTP error! Status: ${t.status}`);return await t.json()}catch(e){return null}}static parseData(e){let t="<6s.companyId>|<6s.country_iso_code>|<6s.domain>|<6s.name>|<6s.country>|<6s.state_code>|<6s.city>|<6s.address>|<6s.zip>|<6s.naics>|<6s.confidence>".repeat(1);for(let n in e.company){let r=e.company[n];t=t.replace(`<6s.${n}>`,r)}return{v218List:t=t.replace("<6s.confidence>",e.confidence)}}constructor(e){sM(this,"env",void 0),sM(this,"localStorage",void 0),sM(this,"sessionStorage",void 0),sM(this,"retryManager",void 0),this.env=e,this.localStorage=new sj(this.env.window.localStorage),this.sessionStorage=new sj(this.env.window.sessionStorage),this.retryManager=new sU(this.sessionStorage,2)}}sM(sq,"ready",!1),sM(sq,"latestData",void 0);var sV=function(e){return e.isp="isp",e.status="status",e.companyName="companyName",e.companyAddress="companyAddress",e.companyCity="companyCity",e.companyState="companyState",e.companyZip5="companyZip5",e.companyCountry="companyCountry",e.techOfficeDemand="techOfficeDemand",e.naicsCodes="naicsCodes",e.sicCodes="sicCodes",e.industryNaics="industryNaics",e.industrySic="industrySic",e.employeesInAllLocationsNum="employeesInAllLocationsNum",e.itExpense="itExpense",e.telecomSpend="telecomSpend",e.matchSource="matchSource",e.confidenceCode="confidenceCode",e.duns="duns",e.fortune1000="fortune1000",e.jobSeniority="jobSeniority",e.jobFunction="jobFunction",e.parentDuns="parentDuns",e.domesticUltimateDuns="domesticUltimateDuns",e.ultimateDuns="ultimateDuns",e.message="message",e.dnb_fake="dnb_fake",e.hpe_last_call_time="hpe_last_call_time",e.hpeSegment="hpeSegment",e.hpeAttributeSummary="hpeAttributeSummary",e.hpeAttributeList="hpeAttributeList",e}({});function sB(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}function sF(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}function sz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sH=new WeakSet,sJ=new WeakSet;class sY{start(){var e,t;if(this.env.log,(null==(e=sc.lastState)?void 0:e.personalization)&&(sB(this,sH,sG).call(this),!sY.ready)){let e=this.env.window.sessionStorage,n=JSON.parse(null!=(t=e.getItem(oB))?t:'{"retries":0}');n.retries<2&&(!function(e,t){let n=e.location,r=e.navigator;e.IGNORE_DNB_REQUEST||({ajax:function(t,n){var i=arguments[2]||"",a=r.userAgent.match(/MSIE 9.0/i)?((xdr=new XDomainRequest).onload=function(){n(200,xdr.responseText)},xdr):!!e.XMLHttpRequest&&new XMLHttpRequest;try{a&&(a.onreadystatechange=function(){4==a.readyState&&n(a.status,a.responseText)},""!==i?(a.open("POST",t,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("Connection","close")):a.open("GET",t,!0),a.withCredentials=!0,a.send(i))}catch(e){n(200,'{"status": "404", "message":"not found"}')}},getData:function(e,t,r,i){var a=n.protocol+"//"+e+".d41.co/api/?req="+e+"&form="+t;this.ajax(a,function(e,t){if(200==e){var n=JSON.parse(t);return 200!=n.status&&404!=n.status&&402!=n.status&&403!=n.status?void i({}):void("raw"==r?i(t):i(n))}})}}).getData("vid9430","json","T",function(e){let n={last_fetch_time:new Date().getTime()};"function"==typeof t&&t(e,n)})}(this.env.window,e=>{sB(this,sJ,sQ).call(this,e)}),n.retries+=1,e.setItem(oB,JSON.stringify(n)))}}constructor(e){sF(this,sH),sF(this,sJ),sz(this,"env",void 0),this.env=e}}function sG(){var e,t;let n=this.env.window.localStorage,r=new Date().getTime(),i=null!=(e=n.getItem(oV))?e:"{}",a=null!=(t=n.getItem(oB))?t:'{"last_fetch_time":0}';try{let e=JSON.parse(i),t=JSON.parse(a);r-t.last_fetch_time<1296e6&&(sY.ready=void 0!==e.duns&&e.duns.length>0,sY.latestData=e)}catch(e){}}function sQ(e,t={last_fetch_time:new Date().getTime()}){if(void 0!==e){sY.ready=void 0!==e.duns&&e.duns.length>0,sY.latestData=e;let n=this.env.window.localStorage;n.setItem(oV,JSON.stringify(e)),n.setItem(oB,JSON.stringify(t))}}sz(sY,"ready",!1),sz(sY,"latestData",void 0);var sX=function(e){return e.s_kwcid="s_kwcid",e.gclid="gclid",e.ppctype="ppctype",e.ppcoffr="ppcoffr",e.intsrc="intsrc",e}({}),sW=function(e){return e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_content="utm_content",e.plid="plid",e.crid="crid",e}({});function sK(e,t){let n=RegExp(`${e}=([^&]+)`).exec(t);if(null!=n)return decodeURIComponent(n[1])}let sZ=/client\.greenlake\.hpe\.com/,s0=/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,s1=/[?&]testmeasure=true/i;function s2(e){let t=e.sessionStorage;try{if("true"===t.getItem("testmeasure")||s1.test(e.location.search))return t.setItem("testmeasure","true"),!0}catch(e){}return!1}function s5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s3{get currentState(){return s3.currentState}compute(){let e=this.window,t=e.location,n=e.navigator,r=()=>{let e=t.hostname,r=/headless|Googlebot|Bingbot|Slurp|DuckDuckBot|Baiduspider|YandexBot|Sogou|Exabot|facebot|ia_archiver|spider|SeznamBot|PetalBot|63.0.3239.0|Yeti|coccocbot|applebot/i.test(n.userAgent);try{r=r||!!n.webdriver}catch(e){}try{r=r||!(n.languages.length>0)}catch(e){r=!0}return!/developer(?:\.greenlake)?\.hpe.com/i.test(e)&&(r||/(localhost|\d+\.\d+\.\d+\.\d+|testing)/i.test(e)||/www.hpe.com\/h22229/i.test(t.href)||/(origin.*www.*|stg|itg|dev|uat|qa\.it|itg\.it|stg\.it).*\.hpe\.com/i.test(e)||/\.(hp[ieq]corp|hpcorp|hqcorp|cloudfront|appspot|astadia)\.(net|com)/i.test(e))};return s3.currentState={is_testing:s2(e)||r(),is_dev:s2(e)||r(),is_blacklist:(()=>{let e=[/(SMAGENTNAME=|docname=|CategoryName=)/i];0x18913fc34b2>new Date().getTime()&&(e=[/(SMAGENTNAME=|docname=|CategoryName=)/i]);let n=!1,r=!1,i=!1,a=!1,o=!1,s=!1;for(let e of[/(attend.hpe.com.+semail=)/i,/itcs.hpecorp.net.+email/i,/engage.hpe?.com.+em=/i,/esam.hpe.com.+email/i,/norton.+internet.+security/i,/hc9w03272\.etcs\.hpe\.com/i,/solutionsizers\.ext\.hpe\.com/i,/staging\.mylearning\.com/i])n=n||e.test(t.href);for(let e of[/(mail=|name=|phone=|password=|pwd=|employeenum|empid|employeeid|kioskid|user=)/i,/userid=/i])r=r||e.test(t.search);for(let n of e)i=i||n.test(t.search);for(let e of[/ngec-qa\.it\.hpe\.com|(occ-ext|ezc-itg)\.wip\.it\.hpe\.com/i])a=a||e.test(t.hostname);for(let e of[/zerto\.com|arubanetworks\.com/,/(\.hp\.com|.*sbc\.hpe\.com|gordon\.|sitebuilder\.hpe.+com|softwaresupport\.|softwaregrp\.|microfocus\.|viewcentral\.|archive\.org|internal\.support\.)/i,/(\d\.\d\.\d\.\d)/i,/(austin|houston|myroomalpha\d\.\w*|origin-(auth|stg)-www-hpe-com\.\w*).hpe?.com|microfocus\.com|partsurfermobile\.ext\.hpe\.com/i])o=o||e.test(t.hostname);try{s=(e=>{let t=!1;try{t=s0.test(e)||s0.test(decodeURIComponent(e))}catch(e){}return t})(t.href)}catch(e){}return(s||n||o||r)&&!(i||a)})()||function(e){let t=e.location.hostname;return/www\.qbert(?:-qa|-uat|-dev|npi)?\.gss\.ext\.hpe\.com/i.test(t)||sZ.test(e.location.hostname)}(e)},s3.currentState}constructor(e){s5(this,"window",void 0),this.window=e,void 0===s3.currentState&&(s3.currentState=this.compute())}}s5(s3,"currentState",void 0);let s4=/_mkto_trk=([^;]+)/,s6=/^id:117-SZC-407/;var s9=function(e){return e[e["register.signup"]=0]="register.signup",e[e["register.register"]=1]="register.register",e[e["product.category"]=2]="product.category",e[e["product.listing"]=3]="product.listing",e[e["product.view"]=4]="product.view",e[e["cart.view"]=5]="cart.view",e[e["quote.complete"]=6]="quote.complete",e[e["quote.start"]=7]="quote.start",e[e["search.results"]=8]="search.results",e[e["product.compare"]=9]="product.compare",e[e["checkout.start"]=10]="checkout.start",e[e["checkout.review"]=11]="checkout.review",e[e.purchase=12]="purchase",e}({});let s7=[],s8=/["'[\]]+/g,le=/[,]+/g;class lt extends sw{build(e){let t,n;this.env.log;let r=this.env.window,i=sx(this.env),a="HPEDatalayer-v1";try{var o;a=null!=(o=r.digitalData.BS_VERSION)?o:a}catch(e){}let s={codeVersion:"HPE-20251028-031526",taxonomyVersion:"HPE-1.25",ruleLabel:"buildDatalayer-routine",boostrapVersion:a,hitStatus:s3.currentState},l={diagnostics:s,event:{eventName:"unknown",eventType:ox},page:i,consent:function(e){var t,n;let r=null==(n=sc.lastState)||null==(t=n.consentManagerProvider)?void 0:t.toLocaleLowerCase(),i=e.window.HPEPRIVACYBANNER||{},a={provider:null!=r?r:"unknown",state:{hpeuck:function(e){let t,n=/hpeuck_prefs=(\d+)/.exec(e);return n&&(t=n[1]),t}(e.window.document.cookie),country:null==i?void 0:i.cc,language:null==i?void 0:i.ll}};if(void 0!==a.state){a.state.trustarc=function(e){let t="",n=/notice_gdpr_prefs=([^;]+)/.exec(e),r=/notice_preferences=([^;]+)/.exec(e);return n&&(t=n[1]),r&&(t=t+"|"+r[1]),t.length>0?t:void 0}(e.window.document.cookie);try{a.state.gpc=!!e.window.navigator.globalPrivacyControl}catch(e){}}return a}(this.env),user:function(e){let t,n,r;try{t=e.window.digitalData.user[0].profile[0].profileInfo.hpe_persona}catch(e){}try{var i,a;n=null==(i=e.window.digitalData)?void 0:i.user[0].profile[0].profileInfo.eps_usertype;let t=null==(a=e.window.digitalData)?void 0:a.user[0].profile[0].profileInfo.eps_billing_id;t&&t.length>0&&(n+=":"+t)}catch(e){}try{r=window.digitalData.user[0].profile[0].profileInfo.userID}catch(e){}return{userSegment:"anonymous",hpePersona:t,partsStoreId:n,b2bId:r}}(this.env)},d=function(e){var t,n,r,i,a,o,s,l;let d,c=null==(t=e.digitalData)?void 0:t.page,u=null!=(a=null!=(i=null!=(r=null==c?void 0:c.search)?r:null==c?void 0:c.pageInfo)?i:null==c||null==(n=c.pageInfo)?void 0:n.search)?a:{},m="object"==typeof(d=null!=(l=null!=(s=null!=(o=u.search_term)?o:u.search_keywords)?s:u.search_keyword)?l:function(e){let t=/SearchCriteria=([^&]+)/i.exec(e);if(t&&t.length>0)return t[1]}(e.location.search))&&null!==d?JSON.stringify(d).replace(s8,"").replace(le," "):d;if(m)return{keyword:m}}(r);d&&(l.search=d);let c=(sY.ready&&void 0!==sY.latestData&&(t=function(e){var t,n;let r,i="not-defined:status=<dnb_Data.status>:c=undefined|<dnb_Data.duns>|<dnb_Data.confidenceCode>|<dnb_Data.isp>|<dnb_Data.matchSource>|<dnb_Data.companyName>|<dnb_Data.companyAddress>|<dnb_Data.companyCity>|<dnb_Data.companyState>|<dnb_Data.companyZip5>|<dnb_Data.companyCountry>|<dnb_Data.techOfficeDemand>|<dnb_Data.naicsCodes>|<dnb_Data.sicCodes>|<dnb_Data.industryNaics>|<dnb_Data.industrySic>|<dnb_Data.employeesInAllLocationsNum>|<dnb_Data.itExpense>|<dnb_Data.telecomSpend>|<dnb_Data.fortune1000>|<dnb_Data.jobSeniority>|<dnb_Data.jobFunction>|<dnb_Data.parentDuns>|<dnb_Data.domesticUltimateDuns>|<dnb_Data.ultimateDuns>|<dnb_Data.message>|<dnb_Data.dnb_fake>|<dnb_Data.hpe_last_call_time>".repeat(1),a="status=<dnb_Data.status>,duns=<dnb_Data.duns>,matchSource=<dnb_Data.matchSource>,confidenceCode=<dnb_Data.confidenceCode>,companyName=<dnb_Data.companyName>,companyAddress=<dnb_Data.companyAddress>,companyCity=<dnb_Data.companyCity>,companyState=<dnb_Data.companyState>,companyZip5=<dnb_Data.companyZip5>,companyCountry=<dnb_Data.companyCountry>,techOfficeDemand=<dnb_Data.techOfficeDemand>,naicsCodes=<dnb_Data.naicsCodes>,sicCodes=<dnb_Data.sicCodes>,industryNaics=<dnb_Data.industryNaics>,industrySic=<dnb_Data.industrySic>,employeesInAllLocationsNum=<dnb_Data.employeesInAllLocationsNum>,itExpense=<dnb_Data.itExpense>,telecomSpend=<dnb_Data.telecomSpend>,fortune1000=<dnb_Data.fortune1000>,jobSeniority=<dnb_Data.jobSeniority>,jobFunction=<dnb_Data.jobFunction>,parentDuns=<dnb_Data.parentDuns>,domesticUltimateDuns=<dnb_Data.domesticUltimateDuns>,ultimateDuns=<dnb_Data.ultimateDuns>,message=<dnb_Data.message>,dnb_fake=<dnb_Data.dnb_fake>,hpe_last_call_tim=<dnb_Data.hpe_last_call_time>".repeat(1),o=(n=+(null!=(t=e.employeesInAllLocationsNum)?t:"0"),r="no-segment",isNaN(n)||(r=n>1e3?"enterprise":n>499?"mid-market":n>99?"small-business-medium":"small-business-small"),r);for(let t in sV){let n=e[t];i=i.replace(`<dnb_Data.${t}>`,n),a=a.replace(`<dnb_Data.${t}>`,n)}return{v39List:i,mvar3List:a,segment:o,...e}}(sY.latestData)),sq.ready&&void 0!==sq.latestData&&(n=sq.parseData(sq.latestData)),t||n?Object.assign({},t,n):void 0);void 0!==c&&(l.firmographic=c);let u=function(e){let t=e.location.search,n=function(e){let t=sK("jumpid",e.location.search);if(void 0!==t){let r=/^(re|in)_/.test(t),i=/aid-(\d+)$/.exec(t),a={jumpid:t};if(r?a.internalJumpid=t:a.externalJumpid=t,null!=i){a.aid=i[1];var n=a.aid;let t=e.document,r=new Date(new Date().getTime()+2592e6);t.cookie=`hpe-aid=${n};domain=.hpe.com;path=/;expires=${r.toUTCString()};SameSite=None;Secure`}return a}}(e),r=function(e){let t=Object.values(sW).reduce((t,n)=>{let r=sK(n,e);return t[n]=r,t},{hasUTM:!1});return t.utm_campaign&&t.utm_campaign.length>0&&t.utm_content&&t.utm_content.length>0&&t.utm_medium&&t.utm_medium.length>0&&t.utm_source&&t.utm_source.length>0?(t.hasUTM=!0,t):{hasUTM:!1}}(e.location.search),i=Object.values(sX).reduce((e,n)=>(e[n]=sK(n,t),e),{});if((null==n?void 0:n.jumpid)!==void 0||r.hasUTM||void 0!==i.intsrc)return{...n,...r,...i}}(r);void 0!==u&&(l.promotion=u),l.leadnurture=function(e){let t=e.window,n={marketo_env:function(e){let t=e.window,n="prod",r=n,i=t.location.hostname;if(/(^origin-(dev|qa)-www-hpe-com\.ext\.hpe\.com)|(^localhost)|(^itg-ecalendar-customer\.it\.hpe\.com|www-dev-www-hpe-com\.ext\.hpe\.com)/i.test(i))r="non-prod";else if(/^origin-(stg|stage|prod)-www-hpe-com\.ext\.hpe\.com/i.test(i)||/^stg\.www\.hpe\.com/i.test(i)){let t=e.window;if(e.log,/^www\.hpe\.com/.test(t.location.hostname)){let e=s4.exec(t.document.cookie);null==e||s6.test(e[1])||(t.document.cookie="_mkto_trk=;path=/;domain=.hpe.com;expires=Thu, 01 Jan 1970 00:00:00 UTC;SameSite=None")}r=n}return r}(e)},r=oZ(t);return{marketo:{...n,_mkto_trk:r}}}(this.env),l.event.eventName=l.page.breadCrumbs.join(":");let m=function(e,t){if(null!=t){var n,r,i,a,o;let s="type"in t&&/^hva/.test(t.type);if("linkName"in t||"link_name"in t)e.event={eventName:null!=(n=t.linkName)?n:t.link_name,eventType:"click"};else if("pageName"in t||"page_name"in t){e.page.breadCrumbs.push(null!=(r=t.pageName)?r:t.page_name);let n=e.page.breadCrumbs.join(":");e.page.pageName=n,e.event={eventName:n,eventType:ox}}let l=null!=(a=null!=(i=t.search_term)?i:t.search_keyword)?a:t.search_keywords;if(l&&(e.search=e.search||{keyword:l},Object.assign(e.search,t,{keyword:l})),s&&(e=function(e,t){var n,r,i,a;let o="hva.threemin"===t.type?"hva:three-minutes-visit":`hva call:${t.type}`,s=null!=(a=null!=(i=null!=(r=null!=(n=t.formName)?n:t.emailProgramName)?r:t.targetPhone)?i:t.eventName)?a:void 0;if(void 0!==s&&(o+=`:${s}`),e.event={eventName:o,eventType:"hva",hva:{type:t.type,parentPage:t.parentPage,emid:t.emid}},/hva\.(formview|lead|gate|ungate)/.test(t.type)){let n=sy.test(t.assetId)?t.assetId:void 0,r={type:t.type,formName:t.formName,assetId:t.assetId,assetTitle:t.assetTitle,assetType:t.assetType,disclosureLevel:t.disclosureLevel};void 0!==n&&(r.assetIdUAID=n,delete r.assetId),"pp"in t&&(r.progressiveProfile=t.pp),e.event.hva={...e.event.hva,...r}}else if(/hva\.(salesagent)/.test(t.type)){let n={type:t.type,formName:t.formName,formType:t.formType};"pp"in t&&(n.progressiveProfile=t.pp),e.event.hva={...e.event.hva,...n}}else if(/hva\.email/.test(t.type)){let n={type:t.type,emailProgramName:t.emailProgramName};e.event.hva={...e.event.hva,...n}}else if(/hva.video\.stream/.test(t.type)){let n={type:t.type,videoName:`${t.stream_name}:id=${t.stream_id}`,playerType:"stream-player",assetId:t.asset_id,parentPage:t.stream_location};e.event.hva={...e.event.hva,...n}}else if(/hva\.video/.test(t.type)){let n={type:t.type,videoName:t.videoName,playerType:t.playerType,assetId:t.assetId,disclosureLevel:t.disclosureLevel};e.event.hva={...e.event.hva,...n}}else if(/hva\.social/.test(t.type)){let n={type:t.type,socialChannel:t.socialChannel};e.event.hva={...e.event.hva,...n}}else if(/hva\.clicktocall/.test(t.type)){let n={type:t.type,targetPhone:t.targetPhone};e.event.hva={...e.event.hva,...n}}else if(/hva\.eventreg/.test(t.type)){let n={type:t.type,eventName:t.eventName};e.event.hva={...e.event.hva,...n}}return e}(e,t)),void 0!==t.event_action_detail){let n={eventActionDetail:t.event_action_detail,widgetLanguage:t.widget_language,widgetPortal:t.widget_portal,recommendationType:t.recommend_type,recommendationModel:t.recommend_model,assetType:t.asset_type,assetTypeDetail:t.asset_type_detail,assetUaid:t.asset_uaid,assetUcid:t.asset_ucid,assetEnglishTitle:t.asset_english_title};e.event.assetRecommendations=n}if("aruba-cta"in t){let n=null!=(o=t["aruba-cta-description"])?o:void 0;e.event.aruba={cta:t["aruba-cta"],"cta-description":n}}if("scrollPercentage"in t&&(e.page.scrollPercentage=t.scrollPercentage),"chatState"in t){let n={chatState:t.chatState};"driftVisuals"in t&&(n.visuals=t.driftVisuals),"driftPlaybookId"in t&&(n.playbookId=t.driftPlaybookId,n.proactive=void 0!==t.isProactive&&!0===t.isProactive?"true":"false"),e.chat={drift:n}}}return e}(l,e),p=function(e,t){var n;if((null==(n=e.digitalData)?void 0:n.event)!==void 0){let t=e.digitalData.event;if(t.length>0){let e=t.reduce((e,t)=>{var n,r;let i=null!=(r=null==(n=t.eventInfo)?void 0:n.eventName)?r:"";return i in s9&&e.push(i),e},[]),n={events:e,eventString:e.join(",")};if(!s7.includes(n.eventString))return s7.push(n.eventString),n}}}(r,0);void 0!==p&&(l.event.ecom=p);let h=function(e,t){var n,r,i,a;let o=function(e,t){if(!e)return;if(!t)return e;let n={};for(let r=0;r<t.length;r++){let i=t[r];i in e&&(n[i]=e[i])}if(Object.keys(n).length>0)return n}(t,["resellerId","finding_methods","search_criteria","campaign","campaignMeta1","campaignMeta2","resellerSlotId","campaignName","currencyCode"]);(null==o?void 0:o.resellerId)&&(o.reseller_name=o.resellerId),(null==o?void 0:o.currencyCode)&&(o.currencyCode=o.currencyCode||"USD");try{(null==(r=e.digitalData)||null==(n=r.cart)?void 0:n.cartID)&&((o=o||{}).cartId=e.digitalData.cart.cartID)}catch(e){}try{(null==(a=e.digitalData)||null==(i=a.event)?void 0:i.length)&&((o=o||{}).rawEvents=JSON.stringify(e.digitalData.event).replace(/["{}[\]]/g,"").replace(/eventInfo:eventName/,"eventName"))}catch(e){}return o}(r,e);return h&&(l.ecommerce=h),this.env.lastDatalayer=JSON.parse(JSON.stringify(m)),m}}function ln(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function lr(e,t,n){return lo(e,t),ln(n,"get"),n.get?n.get.call(e):n.value}function li(e,t,n,r){lo(e,t),ln(n,"set");if(n.set)n.set.call(e,r);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=r}return r}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}class ls{static setup(e,t=()=>{},n=0){li(ls,ls,ll,e),lr(ls,ls,ld).push(t),ls.doneDOMSetup||(li(ls,ls,lc,n),ls.doListenerSetup(),ls.doneDOMSetup=!0)}static doListenerSetup(){let e=lr(ls,ls,ll).window;lr(ls,ls,ll).log,ls.lastObservedURL=e.location.href,new e.MutationObserver(()=>{lr(ls,ls,ll).isDev,lr(ls,ls,ll).log;let t=e.location.href;t!==ls.lastObservedURL&&(ls.lastObservedURL=t,lr(ls,ls,ld).forEach(e=>setTimeout(()=>{e(lr(ls,ls,ll))},lr(ls,ls,lc))))}).observe(e.document,{subtree:!0,childList:!0})}}var ll={writable:!0,value:void 0},ld={writable:!0,value:[]},lc={writable:!0,value:100};la(ls,"doneDOMSetup",!1),la(ls,"lastObservedURL","");let lu="hpeVST",lm=RegExp(`${lu}=([^;]+)`);function lp(e){return e.personalization||e.functional}function lh(e,t,n){if(lp(n)){e.log;let o=e.window;o.dataLayer=o.dataLayer||[],o.gtag=void 0!==o.gtag?o.gtag:function(){o.dataLayer.push(arguments)};let s={ad_storage:n.personalization?"granted":"denied",analytics_storage:"granted",functionality_storage:n.functional?"granted":"denied",personalization_storage:n.personalization?"granted":"denied",security_storage:"granted",ad_user_data:n.personalization?"granted":"denied",ad_personalization:n.personalization?"granted":"denied"};o.gtag("consent","default",s);var r=document,i="script",a="dataLayer";o[a]=o[a]||[],o[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});let l=r.getElementsByTagName(i)[0],d=r.createElement(i);d.async=!0,d.src="https://www.googletagmanager.com/gtm.js?id="+t,l.parentNode.insertBefore(d,l)}}function lg(e){try{let t=new URL(e),n=/google\.|bing\.|yahoo\.|duckduckgo\.|baidu\.|yandex\.|ecosia\./,r=/^(q|autocomplete)$/,i=[];return t.searchParams.forEach((e,t)=>(n.test(e)||r.test(t))&&i.push(t)),i.forEach(e=>t.searchParams.delete(e)),t.toString()}catch(t){return e}}let lf=/h50146\.www5\.hpe\.com|onlinestore-japan\.hpe\.com/i,lv=/www\.hpe\.com\/jp\/ja/i;function ly(e){return e.xdm.web.webPageDetails.URL=lg(e.xdm.web.webPageDetails.URL),e.xdm.web.webReferrer.URL=lg(e.xdm.web.webReferrer.URL),!0}let lw=new Set,lE="data-analytics-region-id";function lb(e,t){e.log,e.isDev;e.log;let n=e.window.document;if(window.location.hostname.includes("instant-on.hpe.com"))try{n.querySelectorAll('a.button[href*="/buy-now/"]').forEach(e=>{let t=/https?:\/\/[^/]+\/(.+)$/.exec(e.href),n="no-link";t&&(n=t[1]),e.addEventListener("mousedown",e=>{let t={linkName:"buy-now:button","aruba-cta":"buy-now","aruba-cta-description":`click:${n}`},r=new CustomEvent("ANALYTICS.LINK",{detail:t});window.dispatchEvent(r)})}),n.querySelectorAll(".partner-logos-main")[0].querySelectorAll("a").forEach(e=>{let t=e.href;e.addEventListener("mousedown",e=>{let n=new CustomEvent("ANALYTICS.LINK",{detail:{linkName:"buy-now:partner-link","aruba-cta":"buy-now","aruba-cta-description":t}});window.dispatchEvent(n)})})}catch(e){}!function(e){var t,n;function r(e,t,n){let r=new Date;r.setTime(r.getTime()+2592e6);let i=`expires=${r.toUTCString()}`;e.cookie=`${t}=${encodeURIComponent(n)};${i};domain=.hpe.com;path=/;Secure;SameSite=None`}function i(e,t){e.cookie=`${t}=-;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.hpe.com;path=/;Secure;SameSite=None`}if((null==(t=sc.lastState)?void 0:t.functional)||(null==(n=sc.lastState)?void 0:n.personalization)){let t=e.window.document,n=["utm_campaign","utm_medium","utm_source","utm_content"],a=Object.fromEntries([...n,"crid","plid"].map(t=>[t,e.qsParam(t)]));if(n.every(e=>{let t=a[e];return t&&t.length>0&&!/{my.utm/i.test(t)})){n.forEach(e=>{r(t,e,a[e])});let{crid:e,plid:o}=a;e&&(null==e?void 0:e.length)>0?r(t,"crid",e):t.cookie.includes("crid")&&i(t,"crid"),o&&(null==o?void 0:o.length)>0?r(t,"plid",o):t.cookie.includes("plid")&&i(t,"plid")}}}(e);let r=!e.isDev,i=new lt(e),a=t.functional||t.personalization;if(!e.initializedAnalyticsEvents&&a){let t={analyticsEnvironment:e,datalayer:i,alloyNamespace:"hpeAlloy",edgeConfigId:r?oq:"fdcf17ca-f077-42b8-995a-5ec8a6cfd71a",edgeDomain:"smetrics.hpe.com",thirdPartyCookiesEnabled:!0,orgId:"56B5A25055667EED7F000101@AdobeOrg",clickCollectionEnabled:!0,downloadLinkQualifier:"\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx|xml)$",onBeforeEventSend:ly,...function(e){let t=e.window.location.hostname,n=e.window.location.href;return(e.log,lf.test(t)||lv.test(n))?{clickCollectionEnabled:!0,downloadLinkQualifier:"\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx|xml)$",onBeforeLinkClickSend:e=>{var t,n,r,i,a,o;let s=null!=(i=null==e||null==(r=e.xdm)||null==(n=r.web)||null==(t=n.webInteraction)?void 0:t.type)?i:void 0;if(s&&/download|exit/.test(s)&&(e.xdm.web.webInteraction.name=void 0,"exit"===s)){let t=null!=(o=null==e||null==(a=e.clickedElement)?void 0:a.hostname)?o:"hpe.com";return!/hpe\.com/i.test(t)}return!0}}:{}}(e)};e.window.location.search.includes("utm_")&&(t.edgeConfigId=oq);let n=new sv(t);new sh(e).config(),n.track("page-view","hpe:alloy-std-page-listener").catch(e=>{}),ls.setup(e,()=>{n.track("page-view","hpe:alloy-dyn-page-listener").catch(e=>{})});let a=[20,50,75,100].sort((e,t)=>t-e),o=0,s=()=>{let e=Math.floor((window.scrollY||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-window.innerHeight)*100);a.forEach(t=>{e>=t&&t>o&&(o=t,window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{linkName:"page:scrollPercentage",scrollPercentage:t}})))})};s(),window.addEventListener("scroll",s),window.addEventListener("ANALYTICS.LAUNCH_LOADED",()=>{!function(e,t,n=!1){let r=e.window;function i(n,r,a="page-view"){if((null==n?void 0:n.detail)!==void 0){(null==(s=n.detail)||null==(o=s.hva)?void 0:o.length)>0&&(null==(l=n.detail)?void 0:l.hva.indexOf("hva."))===0&&(n.detail.type=n.detail.hva),t.track(a,`hpe:alloy-custom-event-${r}-listener`,n.detail).catch(e=>{});var o,s,l,d=n.type,c=n.detail;try{e.window.dataLayer.push({event:d,detail:c})}catch(e){}}}e.log,r.addEventListener("ANALYTICS.PAGE",e=>i(e,"page")),r.addEventListener("ANALYTICS.PAGEVIEW",e=>i(e,"page")),r.addEventListener("ANALYTICS.LINK",e=>i(e,"linkclick","click")),r.addEventListener("ANALYTICS.HVA",e=>i(e,"hva","hva")),r.addEventListener("ANALYTICS.VIDEO.STREAM.START",e=>{i({detail:{type:"hva.video.stream.start",...e.detail}},"video-stream","hva")}),r.addEventListener("ANALYTICS.VIDEO.STREAM.COMPLETE",e=>{i({detail:{type:"hva.video.stream.complete",...e.detail}},"video-stream","hva")}),r.addEventListener("ASSET.RECOMMENDATION",e=>i(e,"assetrecommendation","hva")),r.addEventListener("ANALYTICS.PRIVACY_STATE_CHANGE",e=>{(null==e?void 0:e.detail)!==void 0&&t.track("click","hpe:alloy-custom-event-privacy-listener",{link_name:"consent:privacy-state-change"}).catch(e=>{})}),n||function(e,t){let n=e.window.document;!function e(){let r=lm.exec(n.cookie),i=null!==r?r[1]:void 0,a="sent"===i,o=void 0!==i&&i.length>3,s=o&&"sent"!==i?parseInt(i):new Date().getTime();a||(o?new Date().getTime()-s>18e4?(n.cookie=`${lu}=sent;domain=.hpe.com; path=/; SameSite=None; Secure`,t(),a=!0):setTimeout(e,5e3):(n.cookie=`${lu}=${s}; domain=.hpe.com; path=/; SameSite=None; Secure`,setTimeout(e,5e3)))}()}(e,()=>{e.window.dispatchEvent(new CustomEvent("ANALYTICS.HVA",{detail:{type:"hva.threemin"}}))})}(e,n),(window.location.hostname.includes("www.hpe.com")||window.location.hostname.includes("www-hpe-com"))&&document.body.addEventListener("mousedown",e=>{var t,n;let r=null==(n=e.target)||null==(t=n.closest(`[${lE}]`))?void 0:t.getAttribute(lE);r&&(r.includes("_")||r.includes("click"))&&!lw.has(r)&&(lw.add(r),window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_region_id:r}})))});let t=e.window;t.addEventListener("message",n=>{var r,i,a,o;if((null==n||null==(r=n.data)?void 0:r.pfmessage)!==void 0&&(null==n||null==(a=n.data)||null==(i=a.external_id)?void 0:i.length)>0&&!/^v\d+/i.test(n.data.external_id)){let r=sx(e);t.dispatchEvent(new CustomEvent("ANALYTICS.HVA",{detail:{type:"hva.ungatedview",parentPage:r.pageName,assetId:n.data.external_id,assetType:"pathfactory:asset_view",assetTitle:decodeURIComponent(null!=(o=n.data.content_title)?o:"no-asset-title")}}))}})}),e.initializedAnalyticsEvents=!0}else i.build({})}function lS(e,t,n,r=!0,i=!1){var a;let o=e.document.createElement("script");o.type="text/javascript",o.async=!0,o.defer=r,o.src=t,i&&o.setAttribute("loading","lazy"),n&&(o.onload=n,o.addEventListener("readystatechange",n));let s=e.document.getElementsByTagName("script")[0];null==(a=s.parentNode)||a.insertBefore(o,s)}function lI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lC{get checkDatalayerReady(){return void 0!==this.lastDatalayer}get checkEngagementAndDatalayerReady(){return this.checkDatalayerReady&&this.movedMouseOrTouchOrScroll}qsParam(e){let t=new URL(this.window.location.href).searchParams.get(e);return t?decodeURIComponent(t):void 0}constructor(e,t,n=!1,r=!1,i=!1,a=!1,o=!1){lI(this,"window",void 0),lI(this,"log",void 0),lI(this,"isDev",void 0),lI(this,"isBlacklist",void 0),lI(this,"initializedPrivacyEvents",void 0),lI(this,"initializedAnalyticsEvents",void 0),lI(this,"initializedTMSEvents",void 0),lI(this,"domContentLoaded",void 0),lI(this,"lastDatalayer",void 0),lI(this,"customEventListener",void 0),lI(this,"movedMouseOrTouchOrScroll",void 0),this.window=e,this.log=t,this.isDev=n,this.isBlacklist=r,this.initializedPrivacyEvents=i,this.initializedAnalyticsEvents=a,this.initializedTMSEvents=o,this.movedMouseOrTouchOrScroll=!1,this.domContentLoaded=/complete|loaded|loading/.test(e.document.readyState);let s=()=>{this.movedMouseOrTouchOrScroll=!0,e.removeEventListener("scroll",s),e.removeEventListener("touchmove",s),e.removeEventListener("touchdown",s),e.removeEventListener("mousemove",s),e.removeEventListener("mousedown",s),e.removeEventListener("keydown",s)};e.addEventListener("scroll",s),e.addEventListener("mousemove",s),e.addEventListener("mousedown",s),e.addEventListener("touchdown",s),e.addEventListener("touchmove",s),e.addEventListener("keydown",s)}}class lk{constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"reporter",void 0),this.reporter=e}}class lD extends lk{info(){}log(){}debug(){}warn(){}error(){}success(){}}function lT(e,t,n,r){if(n.startsWith("hva."))e.dispatchEvent(new CustomEvent("ANALYTICS.HVA",{detail:{type:n,...r}}));else if("link_name"in r)e.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:n,...r}}));else{var i,a;let t=null!=(a=null!=(i=r.page_name)?i:r.modal_name)?a:n;e.dispatchEvent(new CustomEvent("ANALYTICS.PAGE",{detail:{page_name:t,...r}}))}}function lA(e,t,n){let r=e.window,i=r.sessionStorage.getItem(oU),a=[];if(null!=i)try{a=JSON.parse(i)}catch(e){}a.push([t,n]),r.sessionStorage.setItem(oU,JSON.stringify(a))}class lN{setupEventListeners(){let e=this.env.window,t=this.env.log;function n(t,n,r){if(void 0===e._satellite){var i;lA(t,null!=(i=r.detail.type)?i:n,r.detail)}}void 0===e.trackMetrics&&(e.trackMetrics=(n,r)=>{void 0!==e._satellite?lT(e,t,n,r):lA(this.env,n,r)}),e.addEventListener("ANALYTICS.HVA",e=>n(this.env,"ANALYTICS.HVA",e)),e.addEventListener("ANALYTICS.LINK",e=>n(this.env,"ANALYTICS.LINK",e)),e.addEventListener("ANALYTICS.PAGE",e=>n(this.env,"ANALYTICS.PAGE",e)),e.addEventListener("ANALYTICS.PAGEVIEW",e=>n(this.env,"ANALYTICS.PAGE",e)),e.addEventListener("ANALYTICS.VIDEO.STREAM.START",e=>n(this.env,"ANALYTICS.VIDEO.STREAM.START",e)),e.addEventListener("ANALYTICS.VIDEO.STREAM.COMPLETE",e=>n(this.env,"ANALYTICS.VIDEO.STREAM.COMPLETE",e)),e.addEventListener("ASSET.RECOMMENDATION",e=>n(this.env,"ASSET.RECOMMENDATION",e)),void 0!==e.digitalData&&e.digitalData.defers.trackMetricsReady.resolve(!0),e.addEventListener("ANALYTICS.LAUNCH_LOADED",()=>{setTimeout(()=>{try{this.processCurrentQueue()}catch(e){}},50)})}processCurrentQueue(){let e=this.env.log;try{var t;let n=this.env.window,r=null!=(t=n.sessionStorage.getItem(oU))?t:"[]",i=0;JSON.parse(r).forEach(t=>{n.setTimeout(()=>{lT(n,e,t[0],t[1])},i+=200)}),n.sessionStorage.removeItem(oU)}catch(e){}}constructor(e){!function(e,t,n){"env"in e?Object.defineProperty(e,"env",{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"env",void 0),this.env=e}}function l_(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function lP(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function lO(e,t){var n=lP(e,t,"get");return n.get?n.get.call(e):n.value}function lR(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}function lL(e,t){l_(e,t),t.add(e)}function lx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lM=new WeakMap,l$=new WeakSet,lj=new WeakSet;class lU{setupTriggers(){this.env.log;let e=window.drift;e.on("ready",()=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-ready",chatState:"chat-ready",...lR(this,l$,lq).call(this)}}))}),e.on("conversation:playbookFired",e=>{lR(this,lj,lV).call(this,e.playbookId),window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:`drift:chat:playbook-fired:${lO(this,lM)}`,chatState:`playbook-fired:${lO(this,lM)}`,...lR(this,l$,lq).call(this)}}))}),e.on("chatOpen",e=>{let t=lR(this,l$,lq).call(this).isProactive,n=`drift:chat:chat-open-${t?"proactive":"reactive"}`,r=`hva.chatstart.${t?"proactive":"reactive"}`;window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:n,chatState:"chat-open",...lR(this,l$,lq).call(this)}})),window.dispatchEvent(new CustomEvent("ANALYTICS.HVA",{detail:{type:r}}))}),e.on("gdprClicked",e=>{(null==e?void 0:e.accepted)===!0&&window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:gdpr-accepted",chatState:"gdpr-accepted",...lR(this,l$,lq).call(this)}}))}),e.on("chatClose",()=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-close",chatState:"chat-close",...lR(this,l$,lq).call(this)}}))}),e.on("startConversation",e=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-start",chatState:"chat-start",...lR(this,l$,lq).call(this)}}))}),e.on("emailCapture",e=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-email_capture",chatState:"chat-email_capture",...lR(this,l$,lq).call(this)}}))}),e.on("phoneCapture",e=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-phone_capture",chatState:"chat-phone_capture",...lR(this,l$,lq).call(this)}}))}),e.on("scheduling:requestMeeting",e=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-meeting_request",chatState:"chat-meeting_request",...lR(this,l$,lq).call(this)}}))}),e.on("scheduling:meetingBooked",e=>{window.dispatchEvent(new CustomEvent("ANALYTICS.LINK",{detail:{link_name:"drift:chat:chat-meeting_booked",chatState:"chat-meeting_booked",...lR(this,l$,lq).call(this)}}))})}constructor(e){lL(this,l$),lL(this,lj),lx(this,"env",void 0),lx(this,"isProactive",void 0),function(e,t,n){l_(e,t),t.set(e,n)}(this,lM,{writable:!0,value:void 0}),this.env=e,this.isProactive=!1}}function lq(){let e={},t=this.env.window.sessionStorage.getItem("drift-visuals");return null!=t&&(e.driftVisuals=t),void 0!==lO(this,lM)&&(e.driftPlaybookId=lO(this,lM),e.isProactive=this.isProactive),e}function lV(e){void 0!==e&&(!function(e,t,n){var r=lP(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}}(this,lM,""+e),this.isProactive=window.location.href.includes("chatsrc-dl-")||oG.reduce((e,t)=>void 0!==lO(this,lM)&&lO(this,lM)===`${t}`||e,!1))}let lB=/^www\.hpe\.com/;(()=>{let e=new s3(window),t=e.currentState.is_dev||e.currentState.is_testing;if(t)lS(window,"https://d3brryyoc4rul6.cloudfront.net/metrics/bootstrap/prod_wsdk_dev.js",()=>{},!1,!1);else if(!function(e,t){let n="_already_loaded_"+t,r=!0===e[n];return r||(e[n]=!0),r}(window,"analytics_prod_wskd_js")){!function(e){lB.test(e.location.hostname)&&lS(e,"https://www.hpe.com/global/assets/seo-schema/schema.js",()=>{},!0,!0)}(window),function(e){var t;e.digitalData=null!=(t=e.digitalData)?t:JSON.parse(JSON.stringify(oY)),function(e){let t=(null==e?void 0:e.promises)===void 0?{}:e.promises,n=(null==e?void 0:e.defers)===void 0?{}:e.defers;t.DCEReady=new Promise((e,t)=>{n.DCEReady={resolve:e,reject:t}}),t.trackMetricsReady=new Promise((e,t)=>{n.trackMetricsReady={resolve:e,reject:t}}),t.adobeIsMCIDReady=new Promise((e,t)=>{n.adobeIsMCIDReady={resolve:e,reject:t}}),t.promisesReady=new Promise(e=>{e()}),e.promises=t,e.defers=n}(e.digitalData)}(window),window.location.search.includes("testmeasure=nochat")||function(e,t){let n=/(dcedev|dcelog|driftvadev)=true/i.test(e.location.search);lS(e,n?"https://www.hpe.com/global/metrics/chat/chat-init/chat-init-dev.js":"https://www.hpe.com/global/metrics/chat/chat-init/chat-init.js",void 0,!1,!1)}(window);let n=new lC(window,new lD(window.console),t,e.currentState.is_blacklist);(n.customEventListener=new lN(n)).setupEventListeners(),function(e){void 0!==e.window.drift?new lU(e).setupTriggers():e.window.addEventListener("DCEData:drift:invoked",()=>new lU(e).setupTriggers())}(n),function(e){e.log,Object.assign(window,{hpeAlloyEnv:e}),e.window.addEventListener(sl.CONFIGCHANGE,()=>{}),e.window.addEventListener(sl.CONFIGREADY,()=>{}),e.window.addEventListener(sl.OPEN,()=>{}),e.window.addEventListener(sl.CLOSE,()=>{});let t=t=>{let n=lp(t);e.log;let r=e.window;try{let e={ad_storage:t.personalization?"granted":"denied",analytics_storage:n?"granted":"denied",functionality_storage:t.functional?"granted":"denied",personalization_storage:t.personalization?"granted":"denied",security_storage:"granted",ad_user_data:t.personalization?"granted":"denied",ad_personalization:t.personalization?"granted":"denied"};r.gtag("consent","update",e),r.dataLayer.push({event:"gtm_consent_update"})}catch(e){}lb(e,t),e.window.dispatchEvent(new CustomEvent("ANALYTICS.PRIVACY_STATE_CHANGE",{detail:t})),e.initializedPrivacyEvents=!0};sc.setupPrivacyStateListeners(e,n=>{lh(e,"GTM-N5B6RF33",n),/instant-on.hpe.com/i.test(e.window.location.hostname)&&lh(e,"GTM-5G6PLDQ3",n),(n.personalization||n.functional)&&(new sY(e).start(),new sq(e).capture()),lb(e,n),window.addEventListener("ANALYTICS.NETWORKQUIET",()=>lS(window,e.isDev?"https://d3brryyoc4rul6.cloudfront.net/metrics/launch/launch-marketing-dev.min.js":"https://www.hpe.com/global/metrics/launch/launch-marketing.min.js",()=>{window._satellite.setDebug(e.isDev)},!0,!0));e.log;let r=e.window;e.initializedTMSEvents||(function(e,t){if(e.log,e.checkEngagementAndDatalayerReady)t();else{let n,r=e.window,i=0,a=500,o=r.performance.getEntries().length;n=setTimeout(function s(){let l=o===r.performance.getEntries().length;e.checkEngagementAndDatalayerReady||e.checkDatalayerReady&&(l||i>4e3)?(clearTimeout(n),n=!1,t()):(o=r.performance.getEntries().length,n=setTimeout(s,a+=500),i+=a)},a)}}(e,()=>{r.dispatchEvent(new CustomEvent("ANALYTICS.NETWORKQUIET"))}),e.initializedTMSEvents=!0),sc.setupPrivacyStateChangeListeners(e,t)})}(n)}})()})();